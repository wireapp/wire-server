Bug fixes and other updates