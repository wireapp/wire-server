Build docker images using nix derivations instead of Dockerfiles (#2331, #2771, #2772, #2775)
