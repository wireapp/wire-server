<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Server and team feature settings &mdash; Wire 0.0.4 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/wire.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Notes for developers" href="../developer/index.html" />
    <link rel="prev" title="User Searchability" href="searchability.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <a href="../index.html">
        <img src="../_static/Wire_logo.svg" class="logo" alt="Logo"/>
    </a>

    <!--
            <div class="version">
                0.0.4
            </div> -->
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../security-responses/index.html">Security responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/administrate/index.html">Administration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="single-sign-on/index.html">Single Sign-On and User Provisioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="restund.html">Audio/video calling, restund servers (TURN/STUN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="sft.html">Conference Calling 2.0 (aka SFT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="sft.html#federated-conference-calling">Federated Conference Calling</a></li>
<li class="toctree-l2"><a class="reference internal" href="minio.html">Minio</a></li>
<li class="toctree-l2"><a class="reference internal" href="helm.html">Helm</a></li>
<li class="toctree-l2"><a class="reference internal" href="federation/index.html">Federation</a></li>
<li class="toctree-l2"><a class="reference internal" href="associate/index.html">Connecting Wire Clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-client-perspective/index.html">Client API documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto-libs.html">Crypto libraries and sources of randomness</a></li>
<li class="toctree-l2"><a class="reference internal" href="block-user-creation.html">Block personal user creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="classified-domains.html">Classified Domains</a></li>
<li class="toctree-l2"><a class="reference internal" href="configure-federation.html">Federation</a></li>
<li class="toctree-l2"><a class="reference internal" href="legalhold.html">Installing and setting up Legal Hold</a></li>
<li class="toctree-l2"><a class="reference internal" href="mls.html">Messaging Layer Security (MLS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="searchability.html">User Searchability</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Server and team feature settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nd-factor-password-challenge">2nd factor password challenge</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rate-limiting-of-code-generation-requests">Rate limiting of code generation requests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#guest-links">Guest links</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ttl-for-nonces">TTL for nonces</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mls-end-to-end-identity">MLS End-to-End Identity</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developers Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Wire</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Reference</a></li>
      <li class="breadcrumb-item active">Server and team feature settings</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/wireapp/wire-server/blob/develop/docs/src/understand/team-feature-settings.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="server-and-team-feature-settings">
<h1>Server and team feature settings<a class="headerlink" href="#server-and-team-feature-settings" title="Permalink to this heading"></a></h1>
<p>Features can be enabled or disabled on a team level or server wide. Here we will only cover the server wide configuration.</p>
<p>When a feature’s lock status is <code class="docutils literal notranslate"><span class="pre">unlocked</span></code> it means that its settings can be overridden on a team level by team admins. This can be done via the team management app or via the team feature API and is not covered here.</p>
<section id="nd-factor-password-challenge">
<h2>2nd factor password challenge<a class="headerlink" href="#nd-factor-password-challenge" title="Permalink to this heading"></a></h2>
<p>By default Wire enforces a 2nd factor authentication for certain user operations like e.g. activating an account, changing email or password, or deleting an account.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">sndFactorPasswordChallenge</span></code> feature is enabled, a 6 digit verification code will be send per email to authenticate for additional user operations like e.g. for login, adding a new client, generating SCIM tokens, or deleting a team.</p>
<p>After 3 attempts, the key is invalidated, and requests for generating new verification codes are rate limited. The default delay between two consecutive requests is 5 minutes.</p>
<p>Usually the default is what you want. If you explicitly want to enable additional password challenges, add the following to your Helm overrides in <code class="docutils literal notranslate"><span class="pre">values/wire-server/values.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">galley</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ...</span>
<span class="w">    </span><span class="nt">settings</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># ...</span>
<span class="w">      </span><span class="nt">featureFlags</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># ...</span>
<span class="w">        </span><span class="nt">sndFactorPasswordChallenge</span><span class="p">:</span>
<span class="w">          </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">            </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
<span class="w">            </span><span class="nt">lockStatus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">locked</span>
</pre></div>
</div>
<p>Note that the lock status is required but has no effect, as it is currently not supported for team admins to enable or disable <code class="docutils literal notranslate"><span class="pre">sndFactorPasswordChallenge</span></code>. We recommend to set the lock status to <code class="docutils literal notranslate"><span class="pre">locked</span></code>.</p>
<p>Currently the 2nd factor password challenge if enabled has no effect for SSO users.</p>
<p>As there is currently no feasible way for bots to use the 2nd factor password challenge, bots and the service API are blocked when this feature is enabled.</p>
</section>
<section id="rate-limiting-of-code-generation-requests">
<h2>Rate limiting of code generation requests<a class="headerlink" href="#rate-limiting-of-code-generation-requests" title="Permalink to this heading"></a></h2>
<p>The default delay between code generation requests is 5 minutes. This setting can be overridden in the Helm charts:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">brig</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ...</span>
<span class="w">    </span><span class="nt">optSettings</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># ...</span>
<span class="w">      </span><span class="nt">set2FACodeGenerationDelaySecs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span><span class="w"> </span><span class="c1"># 5 minutes</span>
</pre></div>
</div>
</section>
<section id="guest-links">
<h2>Guest links<a class="headerlink" href="#guest-links" title="Permalink to this heading"></a></h2>
<p>The guest link feature is the ability for a Wire users to join a group conversation by tapping on a unique link generated by an admin of that group.</p>
<p>The feature is enabled and unlocked by default and can be disabled on a per-team (via team management) basis or disabled and optionally locked for the entire backend (via Helm overrides). If the feature is locked, it cannot be enabled by team admins via team management.</p>
<p>To change the configuration for the entire server, add the following to your Helm overrides in <code class="docutils literal notranslate"><span class="pre">values/wire-server/values.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">galley</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ...</span>
<span class="w">    </span><span class="nt">settings</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># ...</span>
<span class="w">      </span><span class="nt">featureFlags</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># ...</span>
<span class="w">        </span><span class="nt">conversationGuestLinks</span><span class="p">:</span>
<span class="w">          </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">            </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disabled</span>
<span class="w">            </span><span class="nt">lockStatus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">locked</span>
</pre></div>
</div>
</section>
<section id="ttl-for-nonces">
<h2>TTL for nonces<a class="headerlink" href="#ttl-for-nonces" title="Permalink to this heading"></a></h2>
<p>Nonces that can be retrieved e.g. by calling <code class="docutils literal notranslate"><span class="pre">HEAD</span> <span class="pre">/nonce/clients</span></code> have a default time-to-live of 5 minutes. To change this setting add the following to your Helm overrides in <code class="docutils literal notranslate"><span class="pre">values/wire-server/values.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">brig</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ...</span>
<span class="w">    </span><span class="nt">optSettings</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># ...</span>
<span class="w">      </span><span class="nt">setNonceTtlSecs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">360</span><span class="w"> </span><span class="c1"># 6 minutes</span>
</pre></div>
</div>
</section>
<section id="mls-end-to-end-identity">
<h2>MLS End-to-End Identity<a class="headerlink" href="#mls-end-to-end-identity" title="Permalink to this heading"></a></h2>
<p>The MLS end-to-end identity team feature adds an extra level of security and practicability. If turned on, automatic device authentication ensures that team members know they are communicating with people using authenticated devices. Team members get a certificate on all their devices.</p>
<p>When a client first tries to fetch or renew a certificate, they may need to login to an identity provider (IdP) depending on their IdP domain authentication policy. The user may have a grace period during which they can “snooze” this login. The duration of this grace period (in seconds) is set in the <code class="docutils literal notranslate"><span class="pre">verificationDuration</span></code> parameter, which is enforced separately by each client. After the grace period has expired, the client will not allow the user to use the application until they have logged to refresh the certificate. The default value is 1 day (86400s).</p>
<p>The client enrolls using the Automatic Certificate Management Environment (ACME) protocol <a class="reference external" href="https://www.rfc-editor.org/rfc/rfc8555.html">RFC 8555</a>. The <code class="docutils literal notranslate"><span class="pre">acmeDiscoveryUrl</span></code> parameter must be set to the HTTPS URL of the ACME server discovery endpoint for this team. It is of the form “https://acme.{backendDomain}/acme/{provisionerName}/discovery”. For example: <code class="docutils literal notranslate"><span class="pre">https://acme.example.com/acme/provisioner1/discovery</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">galley</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ...</span>
<span class="w">    </span><span class="nt">settings</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># ...</span>
<span class="w">      </span><span class="nt">featureFlags</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># ...</span>
<span class="w">        </span><span class="nt">mlsE2EId</span><span class="p">:</span>
<span class="w">          </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">            </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disabled</span>
<span class="w">            </span><span class="nt">config</span><span class="p">:</span>
<span class="w">              </span><span class="nt">verificationExpiration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">86400</span>
<span class="w">              </span><span class="nt">acmeDiscoveryUrl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">            </span><span class="nt">lockStatus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unlocked</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="searchability.html" class="btn btn-neutral float-left" title="User Searchability" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../developer/index.html" class="btn btn-neutral float-right" title="Notes for developers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019 - 2023, Wire Swiss GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>