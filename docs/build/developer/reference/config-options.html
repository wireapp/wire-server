<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Config Options &mdash; Wire 0.0.4 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/wire.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2. Creating and populating conversations" href="conversation.html" />
    <link rel="prev" title="Reference" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <a href="../../index.html">
        <img src="../../_static/Wire_logo.svg" class="logo" alt="Logo"/>
    </a>

    <!--
            <div class="version">
                0.0.4
            </div> -->
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../security-responses/index.html">Security responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/administrate/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../understand/index.html">Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developers Notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../developer/index.html">Developer</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Reference</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">1. Config Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#settings-in-galley">1.1. Settings in galley</a></li>
<li class="toctree-l4"><a class="reference internal" href="#feature-flags">1.2. Feature flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="#outlook-calalendar-integration">1.3. Outlook calalendar integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#settings-in-brig">1.4. Settings in brig</a></li>
<li class="toctree-l4"><a class="reference internal" href="#settings-in-cargohold">1.5. Settings in cargohold</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="conversation.html">2. Creating and populating conversations</a></li>
<li class="toctree-l3"><a class="reference internal" href="elastic-search.html">3. Maintaining ElasticSearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="elasticsearch-migration-2021-02-16.html">4. ElasticSearch migration instructions for release 2021-02-16</a></li>
<li class="toctree-l3"><a class="reference internal" href="make-docker-and-qemu.html">5. Make docker and QEMU</a></li>
<li class="toctree-l3"><a class="reference internal" href="oauth.html">6. OAuth</a></li>
<li class="toctree-l3"><a class="reference internal" href="provisioning/scim-token.html">7. SCIM tokens</a></li>
<li class="toctree-l3"><a class="reference internal" href="spar-braindump.html">8. Spar braindump</a></li>
<li class="toctree-l3"><a class="reference internal" href="team/legalhold.html">9. Legal hold</a></li>
<li class="toctree-l3"><a class="reference internal" href="user/activation.html">10. User Activation</a></li>
<li class="toctree-l3"><a class="reference internal" href="user/connection.html">11. Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="user/connection.html#connection-backend-internals">12. Connection backend internals</a></li>
<li class="toctree-l3"><a class="reference internal" href="user/registration.html">13. User Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="user/rich-info.html">14. User Rich info</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Wire</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Notes for developers</a></li>
          <li class="breadcrumb-item"><a href="index.html">Reference</a></li>
      <li class="breadcrumb-item active"><span class="section-number">1. </span>Config Options</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/wireapp/wire-server/blob/develop/docs/src/developer/reference/config-options.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="config-options">
<h1><span class="section-number">1. </span>Config Options<a class="headerlink" href="#config-options" title="Permalink to this heading"></a></h1>
<p>Reference: {#RefConfigOptions}</p>
<p>Fragment.</p>
<p>This page is about the yaml files that determine the configuration of
the Wire backend services.</p>
<section id="settings-in-galley">
<h2><span class="section-number">1.1. </span>Settings in galley<a class="headerlink" href="#settings-in-galley" title="Permalink to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># [galley.yaml]</span>
<span class="n">settings</span><span class="p">:</span>
  <span class="n">enableIndexedBillingTeamMembers</span><span class="p">:</span> <span class="n">false</span>
</pre></div>
</div>
<section id="indexed-billing-team-members">
<h3><span class="section-number">1.1.1. </span>Indexed Billing Team Members<a class="headerlink" href="#indexed-billing-team-members" title="Permalink to this heading"></a></h3>
<p>Use indexed billing team members for journaling. When <code class="docutils literal notranslate"><span class="pre">enabled</span></code>,
galley would use the <code class="docutils literal notranslate"><span class="pre">billing_team_member</span></code> table to send billing
events with user ids of team owners (who have the <code class="docutils literal notranslate"><span class="pre">SetBilling</span></code>
permission). Before enabling this flag, the <code class="docutils literal notranslate"><span class="pre">billing_team_member</span></code>
table must be backfilled.</p>
<p>Even when the flag is <code class="docutils literal notranslate"><span class="pre">disabled</span></code>, galley will keep writing to the
<code class="docutils literal notranslate"><span class="pre">biling_team_member</span></code> table, this flag only affects the reads and has
been added in order to deploy new code and backfill data in
production.</p>
</section>
<section id="mls-private-key-paths">
<h3><span class="section-number">1.1.2. </span>MLS private key paths<a class="headerlink" href="#mls-private-key-paths" title="Permalink to this heading"></a></h3>
<p>Note: This developer documentation. Documentation for site operators can be found here: <a class="reference internal" href="../../understand/mls.html#mls-message-layer-security"><span class="std std-ref">Messaging Layer Security (MLS)</span></a></p>
<p>The <code class="docutils literal notranslate"><span class="pre">mlsPrivateKeyPaths</span></code> field should contain a mapping from <em>purposes</em> and
signature schemes to file paths of corresponding x509 private keys in PEM
format.</p>
<p>At the moment, the only purpose is <code class="docutils literal notranslate"><span class="pre">removal</span></code>, meaning that the key will be used
to sign external remove proposals.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">mlsPrivateKeyPaths</span><span class="p">:</span>
    <span class="n">removal</span><span class="p">:</span>
      <span class="n">ed25519</span><span class="p">:</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">secrets</span><span class="o">/</span><span class="n">ed25519</span><span class="o">.</span><span class="n">pem</span>
</pre></div>
</div>
<p>A simple way to generate an ed25519 private key, discarding the corresponding
certificate, is to run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openssl</span> <span class="n">req</span> <span class="o">-</span><span class="n">nodes</span> <span class="o">-</span><span class="n">newkey</span> <span class="n">ed25519</span> <span class="o">-</span><span class="n">keyout</span> <span class="n">ed25519</span><span class="o">.</span><span class="n">pem</span> <span class="o">-</span><span class="n">out</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span> <span class="o">-</span><span class="n">subj</span> <span class="o">/</span>
</pre></div>
</div>
</section>
</section>
<section id="feature-flags">
<h2><span class="section-number">1.2. </span>Feature flags<a class="headerlink" href="#feature-flags" title="Permalink to this heading"></a></h2>
<blockquote>
<div><p>Also see <a class="reference external" href="https://docs.wire.com/how-to/install/team-feature-settings.html">Wire docs</a> where some of the feature flags are documented from an operations point of view.</p>
</div></blockquote>
<p>Feature flags can be used to turn features on or off, or determine the
behavior of the features. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># [galley.yaml]</span>
<span class="n">settings</span><span class="p">:</span>
  <span class="n">featureFlags</span><span class="p">:</span>
    <span class="n">sso</span><span class="p">:</span> <span class="n">disabled</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">default</span>
    <span class="n">legalhold</span><span class="p">:</span> <span class="n">disabled</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">default</span>
    <span class="n">teamSearchVisibility</span><span class="p">:</span> <span class="n">disabled</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">default</span>
    <span class="n">setEmailVisibility</span><span class="p">:</span> <span class="n">visible_to_self</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">featureFlags</span></code> field in the galley settings is mandatory, and all
features must be listed.  Each feature defines its own set of allowed
flag values.  (The reason for that is that as we will see, the
semantics is slightly different (or more specific) than boolean.)</p>
<section id="sso">
<h3><span class="section-number">1.2.1. </span>SSO<a class="headerlink" href="#sso" title="Permalink to this heading"></a></h3>
<p>This sets the default setting for all teams, and can be overridden by
customer support / backoffice.  <a class="reference external" href="https://github.com/wireapp/wire-server/blob/46713382a1a6544de3936eb03e987b9f76df3faa/libs/galley-types/src/Galley/Types/Teams.hs#L327-L329">Allowed
values</a>:
<code class="docutils literal notranslate"><span class="pre">disabled-by-default</span></code>, <code class="docutils literal notranslate"><span class="pre">enabled-by-default</span></code>.</p>
<p>IMPORTANT: if you change this from ‘enabled-by-default’ to
‘disabled-by-default’ in production, you need to run <a class="reference external" href="https://github.com/wireapp/wire-server/tree/master/tools/db/migrate-sso-feature-flag">this migration
script</a>
to fix all teams that have registered an idp.  (if you don’t, the idp
will keep working, but the admin won’t be able to register new idps.)</p>
</section>
<section id="legalhold">
<h3><span class="section-number">1.2.2. </span>LegalHold<a class="headerlink" href="#legalhold" title="Permalink to this heading"></a></h3>
<p>Optionally block customer support / backoffice from enabling legal
hold for individual teams.  <a class="reference external" href="https://github.com/wireapp/wire-server/blob/46713382a1a6544de3936eb03e987b9f76df3faa/libs/galley-types/src/Galley/Types/Teams.hs#L332-L334">Allowed
values</a>:
‘disabled-permanently’, ‘disabled-by-default’.</p>
<p>IMPORTANT: If you switch this back to <code class="docutils literal notranslate"><span class="pre">disabled-permanently</span></code> from
<code class="docutils literal notranslate"><span class="pre">disabled-by-default</span></code>, LegalHold devices may still be active in teams
that have created them while it was allowed.  This may change in the
future.</p>
</section>
<section id="expose-invitation-urls-to-team-admin">
<h3><span class="section-number">1.2.3. </span>Expose invitation URLs to team admin<a class="headerlink" href="#expose-invitation-urls-to-team-admin" title="Permalink to this heading"></a></h3>
<p>For further processing (e.g. sending custom emails or rendering the URLs as QR
codes), team invitation URLs can be made part of the result of
<code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/teams/{tid}/invitations</span></code>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;has_more&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;invitations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-09-15T15:47:28.577Z&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;created_by&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;375f56fe-7f12-4c0c-aed8-d48c0326d1fb&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;foo@example.com&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4decf7f8-bdd4-43b3-aaf2-e912e2c0c46f&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;phone&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;member&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;team&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;51612209-3b61-49b0-8c55-d21ae65efc1a&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://127.0.0.1:8080/register?team=51612209-3b61-49b0-8c55-d21ae65efc1a&amp;team_code=RpxGkK_yjw8ZBegJuFQO0hha-2Tneajp&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This can be a privacy issue as it allows the team admin to impersonate as
another team member. The feature is disabled by default.</p>
<p>To activate this feature two steps are needed. First, the team id (tid) has to
be added to the list of teams for which this feature <em>can</em> be enabled
(<code class="docutils literal notranslate"><span class="pre">exposeInvitationURLsTeamAllowlist</span></code>). This is done in <code class="docutils literal notranslate"><span class="pre">galley</span></code>’s <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">exposeInvitationURLsTeamAllowlist</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;51612209-3b61-49b0-8c55-d21ae65efc1a&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">...</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>Then, the feature can be set for the team by enabling the
<code class="docutils literal notranslate"><span class="pre">exposeInvitationURLsToTeamAdmin</span></code> flag. This is done by making a <code class="docutils literal notranslate"><span class="pre">PUT</span></code> request
to <code class="docutils literal notranslate"><span class="pre">/teams/{tid}/features/exposeInvitationURLsToTeamAdmin</span></code> with the body:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;enabled&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="team-searchvisibility">
<h3><span class="section-number">1.2.4. </span>Team searchVisibility<a class="headerlink" href="#team-searchvisibility" title="Permalink to this heading"></a></h3>
<p>The team flag <code class="docutils literal notranslate"><span class="pre">searchVisibility</span></code> affects the outbound search of user
searches. If it is set to <code class="docutils literal notranslate"><span class="pre">no-name-outside-team</span></code> for a team then all users of
that team will no longer be able to find users that are not part of their team
when searching. This also includes finding other users by by providing their
exact handle. By default it is set to <code class="docutils literal notranslate"><span class="pre">standard</span></code>, which doesn’t put any
additional restrictions to outbound searches.</p>
<p>The setting can be changed via endpoint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">teams</span><span class="o">/</span><span class="p">{</span><span class="n">tid</span><span class="p">}</span><span class="o">/</span><span class="n">search</span><span class="o">-</span><span class="n">visibility</span>
  <span class="o">--</span> <span class="n">Shows</span> <span class="n">the</span> <span class="n">current</span> <span class="n">TeamSearchVisibility</span> <span class="n">value</span> <span class="k">for</span> <span class="n">the</span> <span class="n">given</span> <span class="n">team</span>

<span class="n">PUT</span> <span class="o">/</span><span class="n">teams</span><span class="o">/</span><span class="p">{</span><span class="n">tid</span><span class="p">}</span><span class="o">/</span><span class="n">search</span><span class="o">-</span><span class="n">visibility</span>
  <span class="o">--</span> <span class="n">Set</span> <span class="n">specific</span> <span class="n">search</span> <span class="n">visibility</span> <span class="k">for</span> <span class="n">the</span> <span class="n">team</span>

<span class="n">pull</span><span class="o">-</span><span class="n">down</span><span class="o">-</span><span class="n">menu</span> <span class="s2">&quot;body&quot;</span><span class="p">:</span>
  <span class="s2">&quot;standard&quot;</span>
  <span class="s2">&quot;no-name-outside-team&quot;</span>
</pre></div>
</div>
<p>The team feature flag <code class="docutils literal notranslate"><span class="pre">teamSearchVisibility</span></code> determines whether it is allowed to change the <code class="docutils literal notranslate"><span class="pre">searchVisibility</span></code> setting or not.
The default is <code class="docutils literal notranslate"><span class="pre">disabled-by-default</span></code>. Note that whenever this feature setting is disabled the <code class="docutils literal notranslate"><span class="pre">searchVisibility</span></code> will be reset to <code class="docutils literal notranslate"><span class="pre">standard</span></code>.</p>
<p>The default setting that applies to all teams on the instance can be defined at configuration</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">featureFlags</span><span class="p">:</span>
<span class="w">    </span><span class="nt">teamSearchVisibility</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disabled-by-default</span><span class="w"> </span><span class="c1"># or enabled-by-default</span>
</pre></div>
</div>
</section>
<section id="teamfeature-searchvisibilityinbound">
<h3><span class="section-number">1.2.5. </span>TeamFeature searchVisibilityInbound<a class="headerlink" href="#teamfeature-searchvisibilityinbound" title="Permalink to this heading"></a></h3>
<p>The team feature flag <code class="docutils literal notranslate"><span class="pre">searchVisibilityInbound</span></code> affects if the team’s users are
searchable by users from <em>other</em> teams. The default setting is
<code class="docutils literal notranslate"><span class="pre">searchable-by-own-team</span></code> which hides users from search results by users from
other teams. If it is set to <code class="docutils literal notranslate"><span class="pre">searchable-by-all-teams</span></code> then users of this team
may be included in the results of search queries by other users.</p>
<p>Note: The configuration of this flag does <em>not</em> affect search results when the
search query matches the handle exactly. If the handle is provdided then any user on the instance can find users.</p>
<p>This team feature flag can only by toggled by site-administrators with direct access to the galley instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PUT</span> <span class="o">/</span><span class="n">i</span><span class="o">/</span><span class="n">teams</span><span class="o">/</span><span class="p">{</span><span class="n">tid</span><span class="p">}</span><span class="o">/</span><span class="n">features</span><span class="o">/</span><span class="n">search</span><span class="o">-</span><span class="n">visibility</span><span class="o">-</span><span class="n">inbound</span>
<span class="k">with</span> <span class="n">JSON</span> <span class="n">body</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;enabled&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">body</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">disabled</span><span class="p">}</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">enabled</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">searchable-by-all-teams</span></code> and disabled is equivalent to <code class="docutils literal notranslate"><span class="pre">searchable-by-own-team</span></code>.</p>
<p>The default setting that applies to all teams on the instance can be defined at configuration.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">searchVisibilityInbound</span><span class="p">:</span>
<span class="w">  </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">    </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="w"> </span><span class="c1"># OR disabled</span>
</pre></div>
</div>
<p>Individual teams can overwrite the default setting.</p>
</section>
<section id="email-visibility">
<h3><span class="section-number">1.2.6. </span>Email Visibility<a class="headerlink" href="#email-visibility" title="Permalink to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/wireapp/wire-server/blob/0126651a25aabc0c5589edc2b1988bb06550a03a/services/brig/src/Brig/Options.hs#L304-L306">Allowd values</a> and their <a class="reference external" href="https://github.com/wireapp/wire-server/blob/0126651a25aabc0c5589edc2b1988bb06550a03a/services/brig/src/Brig/Options.hs#L290-L299">description</a>.</p>
</section>
<section id="classified-domains">
<h3><span class="section-number">1.2.7. </span>Classified domains<a class="headerlink" href="#classified-domains" title="Permalink to this heading"></a></h3>
<p>To enable classified domains, the following needs to be in galley.yaml or wire-server/values.yaml under <code class="docutils literal notranslate"><span class="pre">settings</span></code> / <code class="docutils literal notranslate"><span class="pre">featureFlags</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">classifiedDomains</span><span class="p">:</span>
<span class="w">  </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">domains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;example.com&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;example2.com&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>Note that when enabling this feature, it is important to provide your own domain
too in the list of domains. In the example above, <code class="docutils literal notranslate"><span class="pre">example.com</span></code> or <code class="docutils literal notranslate"><span class="pre">example2.com</span></code> is your domain.</p>
<p>To disable, either omit the entry entirely (it is disabled by default), or provide the following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">classifiedDomains</span><span class="p">:</span>
<span class="w">  </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disabled</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">domains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
</pre></div>
</div>
</section>
<section id="conference-calling">
<h3><span class="section-number">1.2.8. </span>Conference Calling<a class="headerlink" href="#conference-calling" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">conferenceCalling</span></code> feature flag controls whether a user can initiate a conference call. The flag can be toggled between its states <code class="docutils literal notranslate"><span class="pre">enabled</span></code> and <code class="docutils literal notranslate"><span class="pre">disabled</span></code> per team via an internal endpoint.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">conferenceCalling</span></code> section in <code class="docutils literal notranslate"><span class="pre">featureFlags</span></code> defines the state of the <code class="docutils literal notranslate"><span class="pre">conferenceCalling</span></code> feature flag for all personal users (users that don’t belong to a team). For personal users there is no way to toggle the flag, so the setting of the config section wholly defines the state of <code class="docutils literal notranslate"><span class="pre">conferenceCalling</span></code> flag for all personal users.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">conferenceCalling</span></code> section in <code class="docutils literal notranslate"><span class="pre">featureFlags</span></code> also defines the <em>initial</em> state of the <code class="docutils literal notranslate"><span class="pre">conferenceCalling</span></code> flag for all teams. After the flag is set for the first time for a team via the internal endpoint the value from the config section will be ignored.</p>
<p>Example value for the config section:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">conferenceCalling</span><span class="p">:</span>
<span class="w">  </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">    </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">conferenceCalling</span></code> section is optional in <code class="docutils literal notranslate"><span class="pre">featureFlags</span></code>. If it is omitted then it is assumed to be <code class="docutils literal notranslate"><span class="pre">enabled</span></code>.</p>
<p>See also: conference falling for personal accounts (below).</p>
</section>
<section id="file-sharing">
<h3><span class="section-number">1.2.9. </span>File Sharing<a class="headerlink" href="#file-sharing" title="Permalink to this heading"></a></h3>
<p>File sharing is enabled and unlocked by default. If you want a different configuration, use the following syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">fileSharing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">    </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disabled|enabled</span>
<span class="w">    </span><span class="nt">lockStatus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">locked|unlocked</span>
</pre></div>
</div>
<p>These are all the possible combinations of <code class="docutils literal notranslate"><span class="pre">status</span></code> and <code class="docutils literal notranslate"><span class="pre">lockStatus</span></code>:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">status</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">lockStatus</span></code></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">enabled</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">locked</span></code></p></td>
<td><p>Feature enabled, cannot be disabled by team admin</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">enabled</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">unlocked</span></code></p></td>
<td><p>Feature enabled, can be disabled by team admin</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">disabled</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">locked</span></code></p></td>
<td><p>Feature disabled, cannot be enabled by team admin</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">disabled</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">unlocked</span></code></p></td>
<td><p>Feature disabled, can be enabled by team admin</p></td>
</tr>
</tbody>
</table>
<p>The lock status for individual teams can be changed via the internal API (<code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/i/teams/:tid/features/fileSharing/(un)?locked</span></code>).</p>
<p>The feature status for individual teams can be changed via the public API (if the feature is unlocked).</p>
</section>
<section id="validate-saml-emails">
<h3><span class="section-number">1.2.10. </span>Validate SAML Emails<a class="headerlink" href="#validate-saml-emails" title="Permalink to this heading"></a></h3>
<p>If this is enabled, if a new user account is created with an email address as SAML NameID or SCIM externalId, users will receive a validation email.  If they follow the validation procedure, they will be able to receive emails about their account, eg., if a new device is associated with the account.  If the user does not validate their email address, they can still use it to login.</p>
<p>Validate SAML emails is enabled by default; this is almost always what you want. If you want a different configuration, use the following syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># galley.yaml</span>
<span class="nt">validateSAMLEmails</span><span class="p">:</span>
<span class="w">  </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">    </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disabled</span>
</pre></div>
</div>
</section>
<section id="nd-factor-password-challenge">
<h3><span class="section-number">1.2.11. </span>2nd Factor Password Challenge<a class="headerlink" href="#nd-factor-password-challenge" title="Permalink to this heading"></a></h3>
<p>By default Wire enforces a 2nd factor authentication for certain user operations like e.g. activating an account, changing email or password, or deleting an account.
If this feature is enabled, a 2nd factor password challenge will be performed for a set of additional user operations like e.g. for generating SCIM tokens, login, or adding a client.</p>
<p>Usually the default is what you want. If you explicitly want to enable the feature, use the following syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># galley.yaml</span>
<span class="nt">sndFactorPasswordChallenge</span><span class="p">:</span>
<span class="w">  </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">    </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disabled|enabled</span>
<span class="w">    </span><span class="nt">lockStatus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">locked|unlocked</span>
</pre></div>
</div>
</section>
<section id="mls">
<h3><span class="section-number">1.2.12. </span>MLS<a class="headerlink" href="#mls" title="Permalink to this heading"></a></h3>
<p>This feature specifies how should behave. It has no effect on the server’s behaviour.</p>
<p>If this feature is enabled then clients that support this feature will allowing its user to switch between Proteus and the MLS protocol provided the user is listed ini <code class="docutils literal notranslate"><span class="pre">protocolToggleUsers</span></code>. The default protocol that clients will create new conversations with is specified in <code class="docutils literal notranslate"><span class="pre">defaultProtocol</span></code>. The <code class="docutils literal notranslate"><span class="pre">defaultCipherSuite</span></code> and <code class="docutils literal notranslate"><span class="pre">allowedCipherSuites</span></code> contain the default ciphersuite and the allowed ciphersuites that clients should be using. The numerical values should correspond to the indices (starting at 1) specified here https://messaginglayersecurity.rocks/mls-protocol/draft-ietf-mls-protocol.html#table-5</p>
<p>If this feature is disabled then clients will use the Proteus protocol with this backend.</p>
<p>The default configuration that applies to all teams that didn’t explicitly change their feature configuration can be given in galley’s <code class="docutils literal notranslate"><span class="pre">featureFlags</span></code> section in the config file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># galley.yaml</span>
<span class="n">mls</span><span class="p">:</span>
  <span class="n">defaults</span><span class="p">:</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">disabled</span>
    <span class="n">config</span><span class="p">:</span>
      <span class="n">protocolToggleUsers</span><span class="p">:</span> <span class="p">[]</span>
      <span class="n">defaultProtocol</span><span class="p">:</span> <span class="n">proteus</span>
      <span class="n">allowedCipherSuites</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
      <span class="n">defaultCipherSuite</span><span class="p">:</span> <span class="mi">1</span>

</pre></div>
</div>
<p>This default configuration can be overriden on a per-team basis through the <a class="reference internal" href="../developer/features.html"><span class="std std-doc">feature config API</span></a></p>
</section>
<section id="mls-end-to-end-identity">
<h3><span class="section-number">1.2.13. </span>MLS End-to-End Identity<a class="headerlink" href="#mls-end-to-end-identity" title="Permalink to this heading"></a></h3>
<p>The MLS end-to-end identity team feature adds an extra level of security and practicability. If turned on, automatic device authentication ensures that team members know they are communicating with people using authenticated devices. Team members get a certificate on all their devices.</p>
<p>When a client first tries to fetch or renew a certificate, they may need to login to an identity provider (IdP) depending on their IdP domain authentication policy. The user may have a grace period during which they can “snooze” this login. The duration of this grace period (in seconds) is set in the <code class="docutils literal notranslate"><span class="pre">verificationDuration</span></code> parameter, which is enforced separately by each client. After the grace period has expired, the client will not allow the user to use the application until they have logged to refresh the certificate. The default value is 1 day (86400s).</p>
<p>The client enrolls using the Automatic Certificate Management Environment (ACME) protocol <a class="reference external" href="https://www.rfc-editor.org/rfc/rfc8555.html">RFC 8555</a>. The <code class="docutils literal notranslate"><span class="pre">acmeDiscoveryUrl</span></code> parameter must be set to the HTTPS URL of the ACME server discovery endpoint for this team. It is of the form “https://acme.{backendDomain}/acme/{provisionerName}/discovery”. For example: <code class="docutils literal notranslate"><span class="pre">https://acme.example.com/acme/provisioner1/discovery</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># galley.yaml</span>
<span class="nt">mlsE2EId</span><span class="p">:</span>
<span class="w">  </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">    </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disabled</span>
<span class="w">    </span><span class="nt">config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">verificationExpiration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">86400</span>
<span class="w">      </span><span class="nt">acmeDiscoveryUrl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">lockStatus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unlocked</span>
</pre></div>
</div>
</section>
<section id="federation-domain">
<h3><span class="section-number">1.2.14. </span>Federation Domain<a class="headerlink" href="#federation-domain" title="Permalink to this heading"></a></h3>
<p>Regardless of whether a backend wants to enable federation or not, the operator
must decide what its domain is going to be. This helps in keeping things
simpler across all components of Wire and also enables to turn on federation in
the future if required.</p>
<p>For production uses, it is highly recommended that this domain be configured as
something that is controlled by the operator(s). The backend or frontend do not
need to be available on this domain. As per our current federation design, you
must be able to set an SRV record for <code class="docutils literal notranslate"><span class="pre">_wire-server-federator._tcp.&lt;domain&gt;</span></code>.
This record should have entries which lead to the federator.</p>
<p><strong>IMPORTANT</strong> Once this option is set, it cannot be changed without breaking
experience for all the users which are already using the backend.</p>
<p>This configuration needs to be made in brig, cargohold and galley (note the
slighly different spelling of the config options).</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># brig.yaml</span>
<span class="nt">optSettings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">setFederationDomain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># cargohold.yaml</span>
<span class="nt">settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">federationDomain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># galley.yaml</span>
<span class="nt">settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">federationDomain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
</pre></div>
</div>
</section>
<section id="federation-allow-list">
<h3><span class="section-number">1.2.15. </span>Federation allow list<a class="headerlink" href="#federation-allow-list" title="Permalink to this heading"></a></h3>
<p>See <a class="reference internal" href="../../understand/configure-federation.html#configure-federation-strategy-in-brig"><span class="std std-ref">Configure federation strategy (whom to federate with) in brig</span></a> (since <a class="reference external" href="https://github.com/wireapp/wire-server/pull/3260">PR#3260</a>).</p>
</section>
<section id="federation-tls-config">
<h3><span class="section-number">1.2.16. </span>Federation TLS Config<a class="headerlink" href="#federation-tls-config" title="Permalink to this heading"></a></h3>
<p>When a federator connects with another federator, it does so over HTTPS. There
are a few options to configure the CA for this:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">useSystemCAStore</span></code>: Boolean. If set to <code class="docutils literal notranslate"><span class="pre">True</span></code> it will use the system CA.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remoteCAStore</span></code>: Maybe Filepath. This config option can be used to specify
multiple certificates from either a single file (multiple PEM formatted
certificates concatenated) or directory (one certificate per file, file names
are hashes from certificate).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clientCertificate</span></code>: Maybe Filepath. A client certificate to use when
connecting to remote federators. If this option is omitted, no client
certificate is used. If it is provided, then the <code class="docutils literal notranslate"><span class="pre">clientPrivateKey</span></code> option
(see below) must be provided as well.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clientPrivateKey</span></code>: Maybe Filepath. The private key corresponding to the
<code class="docutils literal notranslate"><span class="pre">clientCertificate</span></code> option above. It is an error to provide only a private key
without the corresponding certificate.</p></li>
</ol>
<p>Both the <code class="docutils literal notranslate"><span class="pre">useSystemCAStore</span></code> and <code class="docutils literal notranslate"><span class="pre">remoteCAStore</span></code> options can be specified, in
which case the stores are concatenated and used for verifying certificates.
When <code class="docutils literal notranslate"><span class="pre">useSystemCAStore</span></code> is set to <code class="docutils literal notranslate"><span class="pre">false</span></code> and <code class="docutils literal notranslate"><span class="pre">remoteCAStore</span></code> is not provided,
all outbound connections will fail with a TLS error as there will be no CA for
verifying the server certificate.</p>
<section id="examples">
<h4><span class="section-number">1.2.16.1. </span>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h4>
<p>Federate with anyone, no client certificates, use system CA store to verify
server certificates:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">federator</span><span class="p">:</span>
<span class="w">  </span><span class="nt">optSettings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">federationStrategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">allowAll</span><span class="p">:</span>
<span class="w">    </span><span class="nt">useSystemCAStore</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>Federate only with <code class="docutils literal notranslate"><span class="pre">server2.example.com</span></code>, use a client certificate and a
specific CA:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">federator</span><span class="p">:</span>
<span class="w">  </span><span class="nt">optSettings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">federationStrategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">allowedDomains</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server2.example.com</span>
<span class="w">    </span><span class="nt">useSystemCAStore</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">clientCertificate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">client.pem</span>
<span class="w">    </span><span class="nt">clientPrivateKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">client-key.pem</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="outlook-calalendar-integration">
<h2><span class="section-number">1.3. </span>Outlook calalendar integration<a class="headerlink" href="#outlook-calalendar-integration" title="Permalink to this heading"></a></h2>
<p>This feature setting only applies to the Outlook Calendar extension for Wire. As it is an external service, it should only be configured through this feature flag and otherwise ignored by the backend.</p>
<p>Example default configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># galley.yaml</span>
<span class="nt">outlookCalIntegration</span><span class="p">:</span>
<span class="w">  </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">    </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disabled</span>
<span class="w">    </span><span class="nt">lockStatus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">locked</span>
</pre></div>
</div>
</section>
<section id="settings-in-brig">
<h2><span class="section-number">1.4. </span>Settings in brig<a class="headerlink" href="#settings-in-brig" title="Permalink to this heading"></a></h2>
<p>Some features (as of the time of writing this: only
<code class="docutils literal notranslate"><span class="pre">conferenceCalling</span></code>) allow to set defaults for personal accounts in
brig. Those are taken into account in galley’s end-points <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/feature-configs*</span></code>.</p>
<p>To be specific:</p>
<section id="id1">
<h3><span class="section-number">1.4.1. </span>Conference Calling<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<p>Two values can be configured for personal accounts: a default for when
the user record contains <code class="docutils literal notranslate"><span class="pre">null</span></code> as feature config, and default that
should be inserted into the user record when creating new users:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># [brig.yaml]</span>
<span class="n">settings</span><span class="p">:</span>
  <span class="n">setFeatureFlags</span><span class="p">:</span>
    <span class="n">conferenceCalling</span><span class="p">:</span>
      <span class="n">defaultForNew</span><span class="p">:</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">disabled</span>
      <span class="n">defaultForNull</span><span class="p">:</span>
        <span class="n">status</span><span class="p">:</span> <span class="n">enabled</span>
</pre></div>
</div>
<p>You can omit the entire <code class="docutils literal notranslate"><span class="pre">conferenceCalling</span></code> block, but not parts of
it.  Built-in defaults: <code class="docutils literal notranslate"><span class="pre">defaultForNew:</span> <span class="pre">null</span></code> (user record attribute
is left empty); <code class="docutils literal notranslate"><span class="pre">defaultForNull:</span> <span class="pre">enabled</span></code>.  This maintains behavior
prior to the introduction of this change, while allowing site owners
to postpone the decision about the default setting.</p>
<p>When new users are created, their config will be initialized with
what’s in <code class="docutils literal notranslate"><span class="pre">defaultForNew</span></code>.</p>
<p>When a <code class="docutils literal notranslate"><span class="pre">null</span></code> value is encountered, it is assumed to be
<code class="docutils literal notranslate"><span class="pre">defaultForNull</span></code>.</p>
<p>(Introduced in https://github.com/wireapp/wire-server/pull/1811.)</p>
</section>
<section id="sft-configuration">
<h3><span class="section-number">1.4.2. </span>SFT configuration<a class="headerlink" href="#sft-configuration" title="Permalink to this heading"></a></h3>
<p>Configuring SFT load balancing can be done in two (mutually exclusive) settings:</p>
<ol class="arabic simple">
<li><p>Configuring a SRV DNS record based load balancing setting</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># [brig.yaml]</span>
<span class="n">sft</span><span class="p">:</span>
  <span class="n">sftBaseDomain</span><span class="p">:</span> <span class="n">sft</span><span class="o">.</span><span class="n">wire</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
  <span class="n">sftSRVServiceName</span><span class="p">:</span> <span class="n">sft</span>
  <span class="n">sftDiscoveryIntervalSeconds</span><span class="p">:</span> <span class="mi">10</span>
  <span class="n">sftListLength</span><span class="p">:</span> <span class="mi">20</span>
</pre></div>
</div>
<p>or</p>
<ol class="arabic simple" start="2">
<li><p>Configuring a HTTP-based load balancing setting</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># [brig.yaml]</span>
<span class="n">settings</span><span class="p">:</span>
  <span class="n">setSftStaticUrl</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">sft</span><span class="o">.</span><span class="n">wire</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>This setting assumes that the sft load balancer has been deployed with the <code class="docutils literal notranslate"><span class="pre">sftd</span></code> helm chart.</p>
<p>Additionally if <code class="docutils literal notranslate"><span class="pre">setSftListAllServers</span></code> is set to <code class="docutils literal notranslate"><span class="pre">enabled</span></code> (disabled by default) then the <code class="docutils literal notranslate"><span class="pre">/calls/config/v2</span></code> endpoint will include a list of all servers that are load balanced by <code class="docutils literal notranslate"><span class="pre">setSftStaticUrl</span></code> at field <code class="docutils literal notranslate"><span class="pre">sft_servers_all</span></code>. This is required to enable calls between federated instances of Wire.</p>
</section>
<section id="locale">
<h3><span class="section-number">1.4.3. </span>Locale<a class="headerlink" href="#locale" title="Permalink to this heading"></a></h3>
<section id="setdefaultlocale-deprecated-ignored">
<h4><span class="section-number">1.4.3.1. </span>setDefaultLocale (deprecated / ignored)<a class="headerlink" href="#setdefaultlocale-deprecated-ignored" title="Permalink to this heading"></a></h4>
<p>The brig server config option <code class="docutils literal notranslate"><span class="pre">setDefaultLocale</span></code> has been replaced by <code class="docutils literal notranslate"><span class="pre">setDefaultUserLocale</span></code> and <code class="docutils literal notranslate"><span class="pre">setDefaultTemplateLocale</span></code>. Both settings are optional and <code class="docutils literal notranslate"><span class="pre">setDefaultTemplateLocale</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">EN</span></code> and <code class="docutils literal notranslate"><span class="pre">setDefaultLocale</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">setDefaultTemplateLocale</span></code>. If <code class="docutils literal notranslate"><span class="pre">setDefaultLocale</span></code> was not set or set to <code class="docutils literal notranslate"><span class="pre">EN</span></code> before this change, nothing needs to be done. If <code class="docutils literal notranslate"><span class="pre">setDefaultLocale</span></code> was set to any other language other than <code class="docutils literal notranslate"><span class="pre">EN</span></code> the name of the setting should be changed to <code class="docutils literal notranslate"><span class="pre">setDefaultTemplateLocale</span></code>.</p>
</section>
<section id="setdefaulttemplatelocale">
<h4><span class="section-number">1.4.3.2. </span><code class="docutils literal notranslate"><span class="pre">setDefaultTemplateLocale</span></code><a class="headerlink" href="#setdefaulttemplatelocale" title="Permalink to this heading"></a></h4>
<p>This option determines the default locale for email templates. The language of the email communication is determined by the user locale (see above). Only if templates of the the locale of the user do not exist or if user locale is not set the <code class="docutils literal notranslate"><span class="pre">setDefaultTemplateLocale</span></code> is used as a fallback. If not set the default is <code class="docutils literal notranslate"><span class="pre">EN</span></code>. This setting should not be changed unless a complete set of templates is available for the given language.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># [brig.yaml]</span>
<span class="n">optSettings</span><span class="p">:</span>
  <span class="n">setDefaultTemplateLocale</span><span class="p">:</span> <span class="n">en</span>
</pre></div>
</div>
</section>
<section id="setdefaultuserlocale">
<h4><span class="section-number">1.4.3.3. </span><code class="docutils literal notranslate"><span class="pre">setDefaultUserLocale</span></code><a class="headerlink" href="#setdefaultuserlocale" title="Permalink to this heading"></a></h4>
<p>This option determines which language to use for email communication. It is the default value if none is given in the user profile, or if no user profile exists (eg., if user is being provisioned via SCIM or manual team invitation via the team management app). If not set, <code class="docutils literal notranslate"><span class="pre">setDefaultTemplateLocale</span></code> is used instead.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># [brig.yaml]</span>
<span class="n">optSettings</span><span class="p">:</span>
  <span class="n">setDefaultUserLocale</span><span class="p">:</span> <span class="n">en</span>
</pre></div>
</div>
</section>
</section>
<section id="mls-settings">
<h3><span class="section-number">1.4.4. </span>MLS settings<a class="headerlink" href="#mls-settings" title="Permalink to this heading"></a></h3>
<section id="setenablemls">
<h4><span class="section-number">1.4.4.1. </span><code class="docutils literal notranslate"><span class="pre">setEnableMLS</span></code><a class="headerlink" href="#setenablemls" title="Permalink to this heading"></a></h4>
<p>This option determines whether MLS is supported on this backend. When set to false (or absent), MLS endpoints will fail without performing any action.</p>
</section>
<section id="setkeypackagemaximumlifetime">
<h4><span class="section-number">1.4.4.2. </span><code class="docutils literal notranslate"><span class="pre">setKeyPackageMaximumLifetime</span></code><a class="headerlink" href="#setkeypackagemaximumlifetime" title="Permalink to this heading"></a></h4>
<p>This option specifies the maximum accepted lifetime of a key package from the moment it is uploaded, in seconds. For example, when brig is configured as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># [brig.yaml]</span>
<span class="n">optSettings</span><span class="p">:</span>
  <span class="n">setKeyPackageMaximumLifetime</span><span class="p">:</span> <span class="mi">1296000</span> <span class="c1"># 15 days</span>
</pre></div>
</div>
<p>any key package whose expiry date is set further than 15 days after upload time will be rejected.</p>
</section>
</section>
<section id="federated-domain-specific-configuration-settings">
<h3><span class="section-number">1.4.5. </span>Federated domain specific configuration settings<a class="headerlink" href="#federated-domain-specific-configuration-settings" title="Permalink to this heading"></a></h3>
<section id="restrict-user-search">
<h4><span class="section-number">1.4.5.1. </span>Restrict user search<a class="headerlink" href="#restrict-user-search" title="Permalink to this heading"></a></h4>
<p>See <a class="reference internal" href="../../understand/configure-federation.html#configure-federation-strategy-in-brig"><span class="std std-ref">Configure federation strategy (whom to federate with) in brig</span></a> (since <a class="reference external" href="https://github.com/wireapp/wire-server/pull/3260">PR#3260</a>).</p>
</section>
</section>
<section id="api-versioning">
<h3><span class="section-number">1.4.6. </span>API Versioning<a class="headerlink" href="#api-versioning" title="Permalink to this heading"></a></h3>
<section id="setenabledevelopmentversions">
<h4><span class="section-number">1.4.6.1. </span><code class="docutils literal notranslate"><span class="pre">setEnableDevelopmentVersions</span></code><a class="headerlink" href="#setenabledevelopmentversions" title="Permalink to this heading"></a></h4>
<p>This options determines whether development versions should be enabled. If set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, all development versions are removed from the <code class="docutils literal notranslate"><span class="pre">supported</span></code> field of the <code class="docutils literal notranslate"><span class="pre">/api-version</span></code> endpoint. Note that they are still listed in the <code class="docutils literal notranslate"><span class="pre">development</span></code> field, and continue to work normally.</p>
</section>
</section>
<section id="oauth">
<h3><span class="section-number">1.4.7. </span>OAuth<a class="headerlink" href="#oauth" title="Permalink to this heading"></a></h3>
<p>For more information on OAuth please refer to <a class="reference external" href="https://docs.wire.com/developer/reference/oauth.html">https://docs.wire.com/developer/reference/oauth.html</a>.</p>
<p>En-/Disable OAuth as follows (if not set the default is disabled):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># [brig.yaml]</span>
<span class="nt">optSettings</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">setOAuthEnabled</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">true|false</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<section id="jwk">
<h4><span class="section-number">1.4.7.1. </span>JWK<a class="headerlink" href="#jwk" title="Permalink to this heading"></a></h4>
<p>The JSON Web Keys in <code class="docutils literal notranslate"><span class="pre">test/resources/oauth/</span></code> are used to sign and verify OAuth access tokens in the local integration tests.
The path to the JWK can be configured in <code class="docutils literal notranslate"><span class="pre">brig.integration.yaml</span></code> as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># [brig.yaml]</span>
<span class="nt">optSettings</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">setOAuthJwkKeyPair</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test/resources/oauth/ed25519.jwk</span>
</pre></div>
</div>
<p>A JWK can be generated with <code class="docutils literal notranslate"><span class="pre">didkit</span></code> e.g. Run <code class="docutils literal notranslate"><span class="pre">cargo</span> <span class="pre">install</span> <span class="pre">didkit-cli</span></code> to install and <code class="docutils literal notranslate"><span class="pre">didkit</span> <span class="pre">generate-ed25519-key</span></code> to generate a JWK.</p>
</section>
<section id="expiration-time">
<h4><span class="section-number">1.4.7.2. </span>Expiration time<a class="headerlink" href="#expiration-time" title="Permalink to this heading"></a></h4>
<p>Optionally, configure the OAuth authorization code, access token, and refresh token expiration time in seconds with the following settings:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># [brig.yaml]</span>
<span class="nt">optSettings</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">setOAuthAuthCodeExpirationTimeSecs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span><span class="w"> </span><span class="c1"># 5 minutes</span>
<span class="w">  </span><span class="nt">setOAuthAccessTokenExpirationTimeSecs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span><span class="w"> </span><span class="c1"># 5 minutes</span>
<span class="w">  </span><span class="nt">setOAuthRefreshTokenExpirationTimeSecs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14515200</span><span class="w"> </span><span class="c1"># 24 weeks</span>
</pre></div>
</div>
<p>For more information on what these settings mean in particular, please refer to <a class="reference external" href="https://docs.wire.com/developer/reference/oauth.html">https://docs.wire.com/developer/reference/oauth.html</a>.</p>
</section>
<section id="max-number-of-active-refresh-tokens">
<h4><span class="section-number">1.4.7.3. </span>Max number of active refresh tokens<a class="headerlink" href="#max-number-of-active-refresh-tokens" title="Permalink to this heading"></a></h4>
<p>The maximum number of active OAuth refresh tokens a user is allowed to have.  Built-in default:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># [brig.yaml]</span>
<span class="nt">optSettings</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">setOAuthMaxActiveRefreshTokens</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</pre></div>
</div>
</section>
<section id="disabling-api-versions">
<h4><span class="section-number">1.4.7.4. </span>Disabling API versions<a class="headerlink" href="#disabling-api-versions" title="Permalink to this heading"></a></h4>
<p>It is possible to disable one ore more API versions. When an API version is disabled it won’t be advertised on the <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/api-version</span></code> endpoint, neither in the <code class="docutils literal notranslate"><span class="pre">supported</span></code>, nor in the <code class="docutils literal notranslate"><span class="pre">development</span></code> section. Requests made to any endpoint of a disabled API version will result in the same error response as a request made to an API version that does not exist.</p>
<p>Each of the services brig, cannon, cargohold, galley, gundeck, proxy, spar should to be configured with the same set of disable API versions in each service’s values.yaml config files.</p>
<p>For example to disable API version v3, you need to configure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># brig&#39;s values.yaml</span>
<span class="n">config</span><span class="o">.</span><span class="n">optSettings</span><span class="o">.</span><span class="n">setDisabledAPIVersions</span><span class="p">:</span> <span class="p">[</span> <span class="n">v3</span> <span class="p">]</span>

<span class="c1"># cannon&#39;s values.yaml</span>
<span class="n">config</span><span class="o">.</span><span class="n">disabledAPIVersions</span><span class="p">:</span> <span class="p">[</span> <span class="n">v3</span> <span class="p">]</span>

<span class="c1"># cargohold&#39;s values.yaml</span>
<span class="n">config</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">disabledAPIVersions</span><span class="p">:</span> <span class="p">[</span> <span class="n">v3</span> <span class="p">]</span>

<span class="c1"># galley&#39;s values.yaml</span>
<span class="n">config</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">disabledAPIVersions</span><span class="p">:</span> <span class="p">[</span> <span class="n">v3</span> <span class="p">]</span>

<span class="c1"># gundecks&#39; values.yaml</span>
<span class="n">config</span><span class="o">.</span><span class="n">disabledAPIVersions</span><span class="p">:</span> <span class="p">[</span> <span class="n">v3</span> <span class="p">]</span>

<span class="c1"># proxy&#39;s values.yaml</span>
<span class="n">config</span><span class="o">.</span><span class="n">disabledAPIVersions</span><span class="p">:</span> <span class="p">[</span> <span class="n">v3</span> <span class="p">]</span>

<span class="c1"># spar&#39;s values.yaml</span>
<span class="n">config</span><span class="o">.</span><span class="n">disabledAPIVersions</span><span class="p">:</span> <span class="p">[</span> <span class="n">v3</span> <span class="p">]</span>
</pre></div>
</div>
<p>The default setting is that no API version is disabled.</p>
</section>
</section>
</section>
<section id="settings-in-cargohold">
<h2><span class="section-number">1.5. </span>Settings in cargohold<a class="headerlink" href="#settings-in-cargohold" title="Permalink to this heading"></a></h2>
<section id="fake-aws">
<h3><span class="section-number">1.5.1. </span>(Fake) AWS<a class="headerlink" href="#fake-aws" title="Permalink to this heading"></a></h3>
<p>AWS S3 (or an alternative provider / service) is used to upload and download
assets. The Haddock of
<a class="reference external" href="https://github.com/wireapp/wire-server/blob/develop/services/cargohold/src/CargoHold/Options.hs#L64"><code class="docutils literal notranslate"><span class="pre">CargoHold.Options.AWSOpts</span></code></a>
provides a lot of useful information.</p>
<section id="multi-ingress-setup">
<h4><span class="section-number">1.5.1.1. </span>Multi-Ingress setup<a class="headerlink" href="#multi-ingress-setup" title="Permalink to this heading"></a></h4>
<p>In a multi-ingress setup the backend is reachable via several domains, each
handled by a separate Kubernetes ingress. This is useful to obfuscate the
relationship of clients to each other, as an attacker on TCP/IP-level could only
see domains and IPs that do not obviously relate to each other.</p>
<p>In case of a fake AWS S3 service its identity needs to be obfuscated by making
it accessible via several domains, too. Thus, there isn’t one
<code class="docutils literal notranslate"><span class="pre">s3DownloadEndpoint</span></code>, but one per domain at which the backend is reachable. Each
of these backend domains represents a virtual backend. N.B. these backend
domains are <em>DNS domains</em>. Do not confuse them with the federation domain! The
latter is just an identifier, and may or may not be equal to the backend’s DNS
domain. Backend DNS domain(s) and federation domain are usually set equal by
convention. But, this is not true for multi-ingress setups!</p>
<p>The backend domain of a download request is defined by its <code class="docutils literal notranslate"><span class="pre">Z-Host</span></code> header which
is set by <code class="docutils literal notranslate"><span class="pre">nginz</span></code>. (Multi-ingress handlling only applies to download requests as
these are implemented by redirects to the S3 assets host for local assets.
Uploads are handled by cargohold directly itself.)</p>
<p>The config <code class="docutils literal notranslate"><span class="pre">aws.multiIngress</span></code> is a map from backend domain (<code class="docutils literal notranslate"><span class="pre">Z-Host</span></code> header
value) to a S3 download endpoint. The <code class="docutils literal notranslate"><span class="pre">Z-Host</span></code> header is set by <code class="docutils literal notranslate"><span class="pre">nginz</span></code> to the
value of the incoming requests <code class="docutils literal notranslate"><span class="pre">Host</span></code> header. If there’s no config map entry for
a provided <code class="docutils literal notranslate"><span class="pre">Z-Host</span></code> in a download request for a local asset, then an error is
returned.</p>
<p>This example shows a setup with fake backends <em>red</em>, <em>green</em> and <em>blue</em>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">aws</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># S3 endpoint for internal communication (cargohold -&gt; S3)</span>
<span class="w">  </span><span class="nt">s3Endpoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://s3.internal.example</span>

<span class="w">  </span><span class="c1"># This option is ignored when multiIngress is configured</span>
<span class="w">  </span><span class="nt">s3DownloadEndpoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://assets.default.example.com</span>

<span class="w">  </span><span class="c1"># Other settings can still be used</span>
<span class="w">  </span><span class="c1"># ...</span>

<span class="w">  </span><span class="c1"># Map from backend domain to S3 download domain</span>
<span class="w">  </span><span class="nt">multiIngress</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">nginz-https.red.example.com</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://assets.red.example.com</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">nginz-https.blue.example.com</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://assets.blue.example.com</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">nginz-https.green.example.com</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://assets.green.example.com</span>
</pre></div>
</div>
<p>This sequence diagram illustrates how users on different virtual backends
(represented by different Kubernetes ingresses) download local assets according
to the configuration example above:</p>
<p><img alt="Sequence Diagram: Alice and Bob download an asset" src="../../_images/multi-ingress-example-sequence.svg" /></p>
<!-- 
Unfortunately, kroki currently doesn't work on our CI: SQPIT-1810
Link to diagram:
https://mermaid.live/edit#pako:eNrdVbFu2zAQ_ZUDJ7ewDdhtUkBDgBRB0CHIYCNL4eVEnmWiMk8lKbttkH8vJbsW5dCOUXSqBkHiPT6-e3yinoVkRSITEC5H32syku40FhbXCwP7C6VnC1hqSQNL6l1XeWRPwBuKqxk8OXKwpRyrahxGxvQD11VJY8mvSHPOB4UlMknSrtonbcfStBVar6Wu0HjQJgCdGwUNKfaonMGMax8WeH9acIq5FXKOuwVE7BcqN4U2v9IlibbgFZcqXZ5_ABeMxYK6uiXpwRb5YHp1NYTJ9FN7ixw3jW6ri5UHXva28rZ5BsVbUzIqB-gc-WgTD9DRzU3Pz7v9FChZYnk8L4KGiW23Gdyz3aJVQW7IoYvQbT3gDq2_wsIIbpWCr6MvHF5WhIpsL2p6g6HFhHePvdajFR6Yv0Fd7ZTDquF9mj3AMoR2t0zHcZg1CiJj92akdGP-OLBJ9JpDFOa73YGNxnRAFZ3Te9rxey5L3gZHdmueMrsLyBnHDwpScerGQr_9dn1tzfFeR_2k2MioRFIn15MhTD82Sb0-ndT4fPjM-emcdsDItf23eVlSW_D_ltXYv0uzenTknU_rOd_fzOsfy_9xYvtN_21ixVCsya5Rq_D3fG6KC-FXtKaFyMKjoiXWpV-IhXkJUKw9z38aKTJvaxqKulKBff-jFdkSS0cvvwHKl250
-->
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="conversation.html" class="btn btn-neutral float-right" title="2. Creating and populating conversations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019 - 2023, Wire Swiss GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>