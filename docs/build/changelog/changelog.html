<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>[2023-04-17] (Chart Release 4.35.0) &mdash; Wire 0.0.4 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/wire.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installation" href="../how-to/install/index.html" />
    <link rel="prev" title="Releases" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <a href="../index.html">
        <img src="../_static/Wire_logo.svg" class="logo" alt="Logo"/>
    </a>

    <!--
            <div class="version">
                0.0.4
            </div> -->
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../security-responses/index.html">Security responses</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Release Notes</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">[2023-04-17] (Chart Release 4.35.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#release-notes">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-changes">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bug-fixes-and-other-updates">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#internal-changes">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#federation-changes">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-34-0">[2023-03-06] (Chart Release 4.34.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-31-0">[2023-01-26] (Chart Release 4.31.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id8">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-30-0">[2023-01-12] (Chart Release 4.30.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id13">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-29-0">[2022-12-09] (Chart Release 4.29.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id20">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-26-0">[2022-11-03] (Chart Release 4.26.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id22">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id24">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id25">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id26">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id27">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-25-0">[2022-10-04] (Chart Release 4.25.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id28">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id29">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id30">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id31">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id32">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id33">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-24-0">[2022-09-27] (Chart Release 4.24.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id34">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id35">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id36">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id38">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id39">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-23-0">[2022-09-01] (Chart Release 4.23.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id40">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id41">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id42">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id43">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id44">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id45">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id46">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-22-0">[2022-08-16] (Chart Release 4.22.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id47">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id48">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id49">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id50">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id51">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-21-0">[2022-07-19] (Chart Release 4.21.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id52">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id53">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id54">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id55">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id56">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-19-0">[2022-07-12] (Chart Release 4.19.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id57">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id58">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id59">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id60">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id61">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-18-0">[2022-07-05] (Chart Release 4.18.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id62">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id63">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id64">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id65">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id66">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-14-0">[2022-06-14] (Chart Release 4.14.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id67">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id68">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id69">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-13-0">[2022-06-08] (Chart Release 4.13.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id70">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id71">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id72">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id73">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id74">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id75">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id76">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-12-0">[2022-05-18] (Chart Release 4.12.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id77">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id78">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id79">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id80">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id81">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id82">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id83">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-11-0">[2022-05-04] (Chart Release 4.11.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id84">Release notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-10-0">[2022-04-25] (Chart Release 4.10.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id85">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id86">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id87">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id88">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id89">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-9-0">[2022-04-04] (Chart Release 4.9.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id90">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id91">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id92">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id93">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id94">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-8-0">[2022-03-30] (Chart Release 4.8.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id95">Release notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-7-0">[2022-03-18] (Chart Release 4.7.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id96">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id97">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id98">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id99">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id100">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id101">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-6-0">[2022-03-09] (Chart Release 4.6.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id102">Release notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-5-0">[2022-03-07] (Chart Release 4.5.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id103">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id104">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id105">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id106">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-4-0">[2022-03-01] (Chart Release 4.4.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id107">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id108">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id109">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id110">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-2-0">[2022-02-21] (Chart Release 4.2.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id111">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id112">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id113">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id114">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id115">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id116">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-4-0-0">[2022-02-02] (Chart Release 4.0.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id117">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id118">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id119">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-125-0">[2022-01-28] (Chart Release 2.125.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id120">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id121">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-124-0">[2022-01-27] (Chart Release 2.124.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id122">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id123">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id124">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id125">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id126">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id127">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-122-0">[2022-01-18] (Chart Release 2.122.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id128">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id129">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id130">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id131">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id132">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id133">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id134">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-121-0">[2021-12-10] (Chart Release 2.121.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id135">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id136">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id137">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id138">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id139">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id140">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id141">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id142">[2021-12-02]</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id143">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id144">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id145">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id146">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id147">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id148">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-118-0">[2021-11-15] (Chart Release 2.118.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id149">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id150">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id151">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id152">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id153">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id154">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id155">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-117-0">[2021-10-29] (Chart Release 2.117.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id156">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id157">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id158">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id159">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id160">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id161">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-116-0">[2021-10-01] (Chart Release 2.116.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id162">Release notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id163">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id164">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id165">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id166">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id167">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id168">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-115-0">[2021-09-14] (Chart Release 2.115.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id169">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id170">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id171">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id172">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id173">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-114-0">[2021-09-08] (Chart Release 2.114.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id174">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id175">API Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id176">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id177">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id178">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id179">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id180">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-113-0">[2021-08-27] (Chart Release 2.113.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id181">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id182">API Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id183">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id184">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id185">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id186">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id187">Federation changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-112-0">[2021-08-16] (Chart Release 2.112.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id188">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id189">API Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id190">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id191">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#federation-changes-alpha-feature-do-not-use-yet">Federation changes (alpha feature, do not use yet)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id192">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id193">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-111-0">[2021-08-02] (Chart Release 2.111.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id194">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#release-notes-for-wire-com-cloud-operators">Release Notes for Wire.com Cloud operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id195">API Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id196">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id197">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id198">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id199">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id200">Federation changes (alpha feature, do not use yet)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-110-0">[2021-07-09] (Chart Release 2.110.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id201">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id202">API Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id203">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id204">Internal changes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#internal-federation-api-changes">Internal Federation API changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id205">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id206">Bug fixes and other updates</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-109-0">[2021-06-23] (Chart Release 2.109.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id207">API Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id208">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id209">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id210">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id211">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#more-federation-changes-inactive-code">More federation changes (inactive code)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-108-0">[2021-06-08] (Chart Release 2.108.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id212">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id213">Release Notes for Wire.com Cloud operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id214">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id215">Bug fixes and other updates</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id216">Internal changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id217">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-107-0">[2021-05-26] (Chart Release 2.107.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id218">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id219">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id220">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id221">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id222">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-105-0">[2021-05-04] (Chart Release 2.105.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id223">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id224">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id225">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-104-0">[2021-03-23] (Chart Release 2.104.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id226">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id227">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id228">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id229">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id230">[2021-03-21]</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id231">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id232">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-102-0">[2021-03-02] (Chart Release 2.102.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id233">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id234">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-101-0">[2021-02-25] (Chart Release 2.101.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id235">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id236">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-99-12">[2021-02-16] (Chart Release 2.99.12)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id237">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id238">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id239">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id240">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-3-30-6">[2021-01-15] (Chart Release 3.30.6)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id241">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id242">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id243">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id244">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-97-0">[2021-01-12] (Chart Release 2.97.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id245">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id246">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id247">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-95-18">[2021-01-06] (Chart Release 2.95.18)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id248">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id249">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id250">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id251">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chart-release-2-95-0">[2020-12-21] (Chart Release 2.95.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id252">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id253">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id254">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id255">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id256">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id257">2020-12-15</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id258">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id259">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id260">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id261">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id262">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id263">2020-11-24</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id264">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id265">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bug-fixes">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id266">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id267">2020-10-28</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id268">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id269">Bug fixes and other updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id270">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id271">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id272">2020-10-05</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id273">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security-improvements">Security improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id274">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#new-features">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id275">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id276">2020-09-04</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id277">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id278">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id279">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id280">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id281">2020-07-29</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id282">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id283">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id284">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id285">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id286">2020-07-13</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id287">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id288">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id289">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id290">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id291">2020-06-19</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id292">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id293">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id294">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id295">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id296">2020-06-10</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id297">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id298">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id299">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id300">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id301">2020-06-03</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id302">Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id303">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id304">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id305">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id306">2020-05-15</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id307">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id308">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id309">2020-05-07</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#upgrade-steps-important">Upgrade steps (IMPORTANT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id310">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id311">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id312">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id313">2020-04-21</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id314">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id315">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id316">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id317">2020-04-15</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id318">Upgrade steps (IMPORTANT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id319">New features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id320">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id321">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id322">2020-03-10</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id323">New features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id324">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#significant-internal-changes">Significant internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id325">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id326">2020-02-27</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hotfix">Hotfix</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id327">2020-02-06</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id328">New features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id329">Significant internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id330">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id331">2020-02-06</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id332">New features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#relevant-for-client-developers">Relevant for client developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security-fixes">Security fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id333">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id334">2020-01-30</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#api-changes-relevant-client-developers">API changes (relevant client developers)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id335">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id336">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id337">2020-01-08</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#relevant-for-self-hosters">Relevant for self-hosters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id338">Relevant for client developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id339">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id340">2019-12-20</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id341">Relevant for self-hosters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id342">Relevant for client developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id343">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id344">2019-11-28</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id345">Relevant for client developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id346">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id347">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id348">2019-11-06 #901</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id349">Relevant for self-hosters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id350">Relevant for client developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id351">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id352">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id353">2019-09-30 #868</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id354">Relevant for self-hosters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id355">Relevant for client developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id356">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id357">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id358">2019-09-16 #858</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id359">Relevant for self-hosters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id360">Relevant for client developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id361">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id362">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id363">2019-09-03 #843</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id364">Relevant for self-hosters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id365">Relevant for client developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id366">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id367">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id368">2019-08-08 #822</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id369">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#public-api-changes">Public API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#backend-internal-changes">Backend-internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id370">2019-07-08 #798</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id371">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id372">2019-05-13 #756</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#documentation-changes">Documentation changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id373">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id374">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id375">Internal Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changes-potentially-requiring-action-for-self-hosters">Changes (potentially) requiring action for self-hosters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id376">2019-05-02 #746</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id377">Documentation changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id378">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id379">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id380">Internal Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changes-potentially-requiring-action">Changes (potentially) requiring action</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id381">2019-04-09 #710</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id382">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id383">Documentation changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id384">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id385">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id386">Changes (potentially) requiring action for self-hosters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id387">2019-03-25 #674</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id388">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id389">Documentation changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id390">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id391">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id392">2019-02-28 #648</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id393">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id394">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id395">2019-02-18 #646</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id396">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id397">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id398">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id399">2019-02-18 #634</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id400">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id401">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id402">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id403">2019-01-27 #596</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id404">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id405">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id406">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id407">2019-01-10 #567</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id408">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id409">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id410">Internal changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#others">Others</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id411">2018-12-07 #542</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id412">API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id413">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id414">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id415">Others</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id416">2018-11-28 #527</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id417">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id418">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id419">2018-11-16 #515</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id420">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id421">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id422">2018-10-25 #500</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id423">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id424">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id425">2018-10-04 #477</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#highlights">Highlights</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-changes">Other changes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/administrate/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../understand/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developers Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Wire</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Releases</a></li>
      <li class="breadcrumb-item active">[2023-04-17] (Chart Release 4.35.0)</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/wireapp/wire-server/blob/develop/docs/src/changelog/changelog.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="chart-release-4-35-0">
<h1>[2023-04-17] (Chart Release 4.35.0)<a class="headerlink" href="#chart-release-4-35-0" title="Permalink to this heading"></a></h1>
<section id="release-notes">
<h2>Release notes<a class="headerlink" href="#release-notes" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Wire cloud operators only: Before deploying apply the changes from https://github.com/zinfra/cailleach/pull/1586 to production as well. (#3146)</p></li>
<li><p>New ‘ingress-nginx-controller’ wrapper chart compatible with kubernetes versions [1.23 - 1.26]. The old one ‘nginx-ingress-controller’ (compatible only up to k8s 1.19) is now DEPRECATED.
We advise to upgrade your version of kubernetes in use to 1.23 or higher (we tested on kubernetes version 1.26), and to make use of the new ingress controller chart. Main features:</p>
<ul class="simple">
<li><p>up-to-date nginx version (‘1.21.6’)</p></li>
<li><p>TLS 1.3 support (including allowing specifying which cipher suites to use)</p></li>
<li><p>security fixes</p></li>
<li><p>no more accidental logging of Wire access tokens under specific circumstances</p></li>
</ul>
<p>The ‘kind: Ingress’ resources installed via ‘nginx-ingress-services’ chart remain compatible with both the old and the new ingress controller, and k8s versions [1.18 - 1.26]. In case you upgrade an existing kubernetes cluster (not recommended), you may need to first uninstall the old controller before installing the new controller chart.</p>
<p>In case you have custom overrides, you need to modify the directory name and top-level configuration key:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"># If you have overrides for the controller chart (such as cipher suites), ensure to rename file and top-level key:</span>
<span class="gd">-# nginx-ingress-controller/values.yaml</span>
<span class="gi">+# ingress-nginx-controller/values.yaml</span>
<span class="gd">-nginx-ingress:</span>
<span class="gi">+ingress-nginx:</span>
<span class="w"> </span>  controller:
<span class="w"> </span>    # ...
</pre></div>
</div>
<p>and double-check if all overrides you use are indeed provided under the same name by the upstream chart. See also the default overrides in <a class="reference external" href="https://github.com/wireapp/wire-server/blob/develop/charts/ingress-nginx-controller/values.yaml">the default values.yaml</a>.</p>
<p>In case you use helmfile change your ingress controller like this:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"># helmfile.yaml</span>
<span class="w">releases:</span>
<span class="gd">-  - name: &#39;nginx-ingress-controller&#39;</span>
<span class="gi">+  - name: &#39;ingress-nginx-controller&#39;</span>
<span class="w"> </span>    namespace: &#39;wire&#39;
<span class="gd">-    chart: &#39;wire/nginx-ingress-controller&#39;</span>
<span class="gi">+    chart: &#39;wire/ingress-nginx-controller&#39;</span>
<span class="w"> </span>    version: &#39;CHANGE_ME&#39;
</pre></div>
</div>
<p>For more information read the documentation under https://docs.wire.com/how-to/install/ingress.html (or go to https://docs.wire.com and search for “ingress-nginx-controller”) (#3140)</p>
</li>
<li><p>If you are using OAuth (<code class="docutils literal notranslate"><span class="pre">optSettings.setOAuthEnabled:</span> <span class="pre">true</span></code> in brig config): before the deployment of wire-server the private and public keys for OAuth have to be provided for <code class="docutils literal notranslate"><span class="pre">brig</span></code> and <code class="docutils literal notranslate"><span class="pre">nginz</span></code> (see <code class="docutils literal notranslate"><span class="pre">docs/src/developer/reference/oauth.md</span></code> for more information) (#2989)</p></li>
<li><p>Upgrade webapp version to 2023-04-11-production.0-v0.31.13-0-bb91157 (#2302)</p></li>
</ul>
</section>
<section id="api-changes">
<h2>API changes<a class="headerlink" href="#api-changes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Adding a new version of /list-users that allows for partial success. (#3117)</p></li>
<li><p>Added a <code class="docutils literal notranslate"><span class="pre">failed_to_send</span></code> field to response when sending mls messages. (#3081)</p></li>
<li><p>List failed-to-add remote users in response to <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations</span></code> (#3150)</p></li>
<li><p>Updating the V4 version of /users/list-prekeys to return partial successes, listing users that could not be listed. (#3108)</p></li>
<li><p>Non-binding team endpoints are removed from API version V4 (#3213)</p></li>
</ul>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add TLS and basic authentication to the inbucket (fake webmailer) ingress. (#3161)</p></li>
<li><p>OAuth support for authorization of a curated list of 3rd party applications (see <a class="reference external" href="https://docs.wire.com/developer/reference/oauth.html">https://docs.wire.com/developer/reference/oauth.html</a> for details) (#2989)</p></li>
<li><p>Enforce a minimum length of 8 characters when setting a new password (#3137)</p></li>
<li><p>Optional password for guest links (#3149)</p></li>
<li><p>Authorization Code Flow with PKCE support (#3165)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">conversations/join</span></code> endpoint rate limited per IP address (#3202)</p></li>
</ul>
</section>
<section id="bug-fixes-and-other-updates">
<h2>Bug fixes and other updates<a class="headerlink" href="#bug-fixes-and-other-updates" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>coturn helm chart: use a memory-backed folder to store sqllite DB to improve performance (#3220)</p></li>
<li><p>Coturn helm chart: Increase the default timeout of liveness/readiness probe and make it configurable (#3218)</p></li>
<li><p>When using the (now deprecated) ingress controller on older versions of kubernetes, ensure query parameters are not logged in the ingress logs (#3139)</p></li>
<li><p>Fix version parsing in swagger-ui end-points (#3152)</p></li>
<li><p>Fix a rate-limit exemption whereby authenticated endpoints did not get the unlimited_requests_endpoint, if set, applied. This is a concern for the webapp and calls to /assets, which can happen in larger numbers on initial loading. A previous change in <a class="reference external" href="https://github.com/wireapp/wire-server/pull/2786">this PR</a> had no effect. This PR also increases default rate limits, to compensate for <a class="reference external" href="https://github.com/wireapp/wire-server/pull/3140">new ingress controller chart</a>’s default topologyAwareRouting. (#3138, #3201)</p></li>
</ul>
</section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add a client API version bump checklist (#3135)</p></li>
<li><p>Fix the Swagger documentation for the failed_to_send field in the response of the Proteus message sending endpoint (#3223)</p></li>
<li><p>Extend docs to support render plantuml directly, rewrote the saml flow diagram in plantuml (#3226)</p></li>
<li><p>Allow swagger on disabled versions. (#3196)</p></li>
<li><p>Documentation of setting up SSO integration with Okta was outdated with images from Okta Classic UI, the new version was updated using Oktas latest design. (#3175)</p></li>
</ul>
</section>
<section id="internal-changes">
<h2>Internal changes<a class="headerlink" href="#internal-changes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>When sending a push message, stop deleting the push token and start recreating
ARN when ARN is reported as invalid on AWS, but push token still is present in
Cassandra. This allows on-demand migrations from one AWS account used for push
notifications to another one. (#3162)</p></li>
<li><p>We don’t explicitly set with-compiler inside the cabal.project file anymore, because the version of GHC is controlled by Nix, and our nixpkgs pin. (#3209)</p></li>
<li><ul>
<li><p>integration tests on CI will use either the old or the new ingress controller; depending on which kubernetes version they run on.</p></li>
<li><p>upgrade <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> to default from the nixpkgs channel (currently <code class="docutils literal notranslate"><span class="pre">1.26</span></code>) by removing the manual version pin on 1.19</p></li>
<li><p>upgrade <code class="docutils literal notranslate"><span class="pre">helmfile</span></code> to default from the nixpkgs channel by removing the manual version pin</p></li>
<li><p>upgrade <code class="docutils literal notranslate"><span class="pre">helm</span></code> to default from the nixpkgs channel by removing the manual version pin</p></li>
<li><p>add <code class="docutils literal notranslate"><span class="pre">kubelogin-oidc</span></code> so the kubectl in this environment can also talk to kubernetes clusters using OIDC (#3140)</p></li>
</ul>
</li>
<li><p>Make new record syntax a language default (#3192)</p></li>
<li><p>nixpkgs has been bumped to a more recent checkout (8c619a1f3cedd16ea172146e30645e703d21bfc1 -&gt; 402cc3633cc60dfc50378197305c984518b30773, 2023-02-12 -&gt; 2023-03-28). (#3206)</p></li>
<li><p>Introduce VersionNumber newtype (see <code class="docutils literal notranslate"><span class="pre">/libs/wire-api/src/Wire/API/Routes/Version.hs</span></code> for explanation) (#3075)</p></li>
<li><p>Fix a memory leak in <code class="docutils literal notranslate"><span class="pre">gundeck</span></code> when Redis is offline (#3136)</p></li>
<li><p>Rust library <code class="docutils literal notranslate"><span class="pre">rusty-jwt-tools</span></code> upgraded to latest version (#3142)</p></li>
<li><p>Updated rusty-jwt-tools to version 0.3.4 (#3194)</p></li>
<li><p>Integration tests for backoffice/stern (#3216)</p></li>
<li><p>ormolu: don’t redundantly add language extensions from dead package-defaults.yaml (#3193)</p></li>
<li><p>Stop support for versions on internal APIs (#3200)</p></li>
<li><p>helm charts: bump kubectl docker images from 1.19.7 to 1.24.12 (#3221)</p></li>
<li><p>Add an option (<code class="docutils literal notranslate"><span class="pre">UPLOAD_LOGS</span></code>) to upload integration test logs to AWS S3. (#3169)</p></li>
</ul>
</section>
<section id="federation-changes">
<h2>Federation changes<a class="headerlink" href="#federation-changes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Do not cause denial of service when creating a conversation with users from an unreachable backend (#3150)</p></li>
<li><p>Report federated Proteus message sending errors to clients (#3097)</p></li>
<li><p>Fix bug with asset downloads and large federated responses (#3154)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-34-0">
<h1>[2023-03-06] (Chart Release 4.34.0)<a class="headerlink" href="#chart-release-4-34-0" title="Permalink to this heading"></a></h1>
<section id="id1">
<h2>Release notes<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>In (the unlikely) case your server config file contains <code class="docutils literal notranslate"><span class="pre">setWhitelist:</span></code>, you need to change this before the upgrade!  It used to refer to a whitelisting service, which is now replaced with a local list of allowed domains and phone numbers.  See <a class="reference external" href="https://docs.wire.com/developer/reference/user/activation.html?highlight=whitelist#phone-email-whitelist">docs</a> for details.  Migration path: add new config fields; upgrade, remove old config fields. (#3043)</p></li>
<li><p>The coturn Helm chart has been promoted to <em>beta</em> level stability. (#3078)</p></li>
</ul>
</section>
<section id="id2">
<h2>API changes<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>API v3 is now supported. The new MLS endpoints introduced in API v3 have been removed, and are now only available under v4. (#3122)</p></li>
</ul>
</section>
<section id="id3">
<h2>Features<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Add internal endpoints of <code class="docutils literal notranslate"><span class="pre">cargohold</span></code>, <code class="docutils literal notranslate"><span class="pre">galley</span></code>, <code class="docutils literal notranslate"><span class="pre">legalhold</span></code> and <code class="docutils literal notranslate"><span class="pre">spar</span></code> to the Swagger docs for internal endpoints. (#3007)</p></li>
<li><p>The coturn container image included in the coturn Helm chart was updated to
version <code class="docutils literal notranslate"><span class="pre">4.6.0-wireapp.4</span></code>.</p>
<p>With this version of coturn, the Prometheus metrics endpoint has been
updated, and the <code class="docutils literal notranslate"><span class="pre">turn_active_allocations</span></code> metric label has been <em>renamed</em> to
<code class="docutils literal notranslate"><span class="pre">turn_total_allocations</span></code>. (#3078)</p>
</li>
<li><p>Better error message for invalid ID in a credential when uploading MLS key packages (#3102)</p></li>
<li><p>Add Swagger documentation for internal endpoints. It’s reachable at the path <code class="docutils literal notranslate"><span class="pre">/v&lt;n&gt;/api-internal/swagger{-ui,.json}</span></code>. (#3003)</p></li>
<li><p>Render one Swagger page per internal endpoint. This superseeds the previous Swagger docs page for all internal endpoints. (#3094)</p></li>
<li><p>Feature flag for Outlook calendar integration (#3025)</p></li>
<li><p>Team feature setting for MLS end-to-end identity was added and server setting <code class="docutils literal notranslate"><span class="pre">setEnableMls</span></code> is exposed via new authorized endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/system/settings</span></code> (#3082)</p></li>
</ul>
</section>
<section id="id4">
<h2>Bug fixes and other updates<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The container image used for handling online TLS certificate updates in the
coturn Helm chart was updated to a version with metadata compatible with
containerd. (#3078)</p></li>
<li><p>Fix a bug in the helm chart’s nginx-ingress-services / federator Ingress resource introduced in the last release. (#3034)</p></li>
<li><p>Remove overly restricte api check (#3131)</p></li>
<li><p>Typing indicators not working accross federated backends (#3118)</p></li>
</ul>
</section>
<section id="id5">
<h2>Documentation<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Extend the docs on the federation error type (#3045)</p></li>
<li><p>Update SAML/SCIM docs (#3038)</p></li>
</ul>
</section>
<section id="id6">
<h2>Internal changes<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><ul>
<li><p>use exponential backoff for retrying requests to Amazon</p></li>
<li><p>also retry in case of server-side rate limiting by Amazon (#3121)</p></li>
</ul>
</li>
<li><p>Also run the ‘backoffice’ pod in CI (to test it can successfully start) (#3130)</p></li>
<li><p>Make brig-schema a little faster by merging the first 34 schema migrations on fresh installations. (#3099)</p></li>
<li><p>Deflake integration test: metrics (#3053)</p></li>
<li><p>Lower the log level of federator inotify (#3056)</p></li>
<li><p>use Wai’s settings for graceful shutdown (#3069)</p></li>
<li><p>CI integration setup time should be reduced: tweak the way cassandra-ephemeral is started (#3052)</p></li>
<li><p>charts: Mark all service/secret/configmap test resources to be re-created by defining them as helm hooks (#3037, #3049)</p></li>
<li><p>New integration test script with support for running end2end tests locally (#3062)</p></li>
<li><p>Bump nixpkgs to latest commit on nixpkgs-unstable branch (#3084)</p></li>
<li><p>Add config to allow to run helm tests for different services in parallel; improve integration test output logs (#3040)</p></li>
<li><p>Run brig and galley integration tests concurrently (#2825)</p></li>
<li><p>Add wrapper for bitnami/postgresql chart. (#3012)</p></li>
<li><p>Branch on performAction tags for finer-grained CallsFed constraints (#3030)</p></li>
<li><p>Fixed broken stern endpoint <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">i/user/meta-info</span></code> (#3035)</p></li>
<li><p>Make stern fail on startup if supported backend api version needs bumping (#3035)</p></li>
<li><p>Automatically track CallsFed constraints via a GHC plugin (#3083)</p></li>
<li><p>Rust library <code class="docutils literal notranslate"><span class="pre">rusty-jwt-tools</span></code> upgraded to latest version (#3112)</p></li>
<li><p>Fixed test of jwt-tools Rust FFI (#3125)</p></li>
<li><p>Enabling warnings for redundant constraints and removing the redundant
constraints. (#3009)</p></li>
<li><p>Migrate <code class="docutils literal notranslate"><span class="pre">/teams/notifications</span></code> to use the Servant library. (#3020)</p></li>
<li><p>Split polysemy <code class="docutils literal notranslate"><span class="pre">Members</span></code> constraints into multiple <code class="docutils literal notranslate"><span class="pre">Member</span></code> constraints (#3093)</p></li>
</ul>
</section>
<section id="id7">
<h2>Federation changes<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">HsOpenSSL</span></code> instead of <code class="docutils literal notranslate"><span class="pre">tls</span></code> for federation communication. (#3051)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-31-0">
<h1>[2023-01-26] (Chart Release 4.31.0)<a class="headerlink" href="#chart-release-4-31-0" title="Permalink to this heading"></a></h1>
<section id="id8">
<h2>Release notes<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h2>
<ul>
<li><p>wire-server helm charts using Ingress resources are now compatible with kubernetes versions 1.22, 1.23 and 1.24 (but remain compatible with older versions of kubernetes).</p>
<p>If you upgrade to this version of helm charts and/or you upgrade your version of kubernetes while wire-server is deployed, you may find that <code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">update</span></code> or <code class="docutils literal notranslate"><span class="pre">helmfile</span> <span class="pre">apply/sync</span></code> gives an error like this:</p>
<blockquote>
<div><p>Error: UPGRADE FAILED: current release manifest contains removed kubernetes api(s) for this kubernetes version and it is therefore unable to build the kubernetes objects for performing the diff. error from kubernetes: unable to recognize “”: no matches for kind “Ingress” in version “extensions/v1beta1”</p>
</div></blockquote>
<p>In which case you can use the <a class="reference external" href="https://github.com/helm/helm-mapkubeapis">helm mapkubeapis plugin</a> to upgrade an existing release with the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># install plugin version 0.1.0 (more recent may not work)</span>
helm<span class="w"> </span>plugin<span class="w"> </span>install<span class="w"> </span>--version<span class="w"> </span>v0.1.0<span class="w"> </span>https://github.com/helm/helm-mapkubeapis
<span class="c1"># adjust helm release name and namespace as required</span>
helm<span class="w"> </span>mapkubeapis<span class="w"> </span>--namespace<span class="w"> </span>wire<span class="w"> </span>nginx-ingress-services
</pre></div>
</div>
<p>Alternatively, if a few minutes of downtime are not a problem; you can <code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">delete</span></code> a release and re-install it again, which will work without the above plugin. (#3002)</p>
</li>
<li><p>Upgrade team-settings version to 4.14.0-v0.31.9-0-bf82b46 (#2180)</p></li>
<li><p>Upgrade webapp version to 2023-01-24-production.0-v0.31.9-0-17b742f (#2302)</p></li>
</ul>
</section>
<section id="id9">
<h2>API changes<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The unqualified <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/conversations/:id</span></code> endpoint has been removed from API v3, and is restored to the previous behaviour of returning a Conversation using the v2 schema. Similarly, its qualified counterpart <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/conversations/:domain/:id</span></code> now returns a v2 Conversation when accessed through API v2. (#2992)</p></li>
</ul>
</section>
<section id="id10">
<h2>Bug fixes and other updates<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix pagination in team user search (make search key unique) (#2968)</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">inbucket</span></code> (fake smtp server) chart dependency: The prior version relied on an image that has been removed from docker hub. Thus, our own <code class="docutils literal notranslate"><span class="pre">inbucket</span></code> chart could not be deployed anymore. (#2998)</p></li>
</ul>
</section>
<section id="id11">
<h2>Documentation<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add sphinx-copybutton plugin to make copying snippets of code from docs.wire.com easier. (#2900)</p></li>
<li><p>Hook federated API call documentation into docs.wire.com (manually). (#2988)</p></li>
<li><p>Tool for dumping fed call graphs (dot/graphviz and csv); see README for details (#2973)</p></li>
</ul>
</section>
<section id="id12">
<h2>Internal changes<a class="headerlink" href="#id12" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add Helm chart to configure clusters managed by k8ssandra-operator for test environments. (#2981)</p></li>
<li><p>Fix kind setup for running end-to-end federation tests locally. (#3008)</p></li>
<li><p>Fix Makefile target kind-restart-all. (#3015)</p></li>
<li><p>Add combinators for creating mocked federator responses in integration tests (#3014)</p></li>
<li><p>Add two integration tests arounds last prekeys (#2694)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span></code> (#2965, #2978)</p></li>
<li><p>Make ID tags more readable by expanding abbreviations to full names. (#2991)</p></li>
<li><p>Unused old swagger code removed from stern and team features (#3017)</p></li>
<li><p>Refactor Writetime from Int64 to wrapper of UTCTime (#2994)</p></li>
<li><p>Restructure docs.wire.com (#2986)</p></li>
<li><p>Fixed flaky team user search integration test (#2996)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-30-0">
<h1>[2023-01-12] (Chart Release 4.30.0)<a class="headerlink" href="#chart-release-4-30-0" title="Permalink to this heading"></a></h1>
<section id="id13">
<h2>Release notes<a class="headerlink" href="#id13" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>This realease migrates data from <code class="docutils literal notranslate"><span class="pre">galley.member_client</span></code> to <code class="docutils literal notranslate"><span class="pre">galley.mls_group_member_client</span></code>. When upgrading wire-server no manual steps are required. (#2859)</p></li>
<li><p>Upgrade webapp version to 2022-12-19-production.0-v0.31.9-0-6b2f2bf (#2302)</p></li>
</ul>
</section>
<section id="id14">
<h2>API changes<a class="headerlink" href="#id14" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><ul>
<li><p>The endpoints <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations/list</span></code> and <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/conversations</span></code> have been removed. Use <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations/list-ids</span></code> followed by <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations/list</span></code> instead.</p></li>
<li><p>The endpoint <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/conversations/:id/access</span></code> has been removed. Use its qualified counterpart instead.</p></li>
<li><p>The field <code class="docutils literal notranslate"><span class="pre">access_role_v2</span></code> in the <code class="docutils literal notranslate"><span class="pre">Conversation</span></code> type, in the request body of <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations</span></code>, and in the request body of <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/conversations/:domain/:id/access</span></code> has been removed. Its content is now contained in the <code class="docutils literal notranslate"><span class="pre">access_role</span></code> field instead. It replaces the legacy access role, previously contained in the <code class="docutils literal notranslate"><span class="pre">access_role</span></code> field.</p></li>
<li><p>Clients implementing the V3 API must be prepared to handle a change in the format of the conversation.access_update event. Namely, the field access_role_v2 has become optional. When missing, its value is to be found in the field access_role. (#2841)</p></li>
</ul>
</li>
<li><p>Added a domain parameter to the typing indicator status update API (#2892)</p></li>
<li><p>Support MLS self-conversations via a new endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/conversations/mls-self</span></code>. This removes the <code class="docutils literal notranslate"><span class="pre">PUT</span></code> counterpart introduced in #2730 (#2839)</p></li>
<li><p>List the MLS self-conversation automatically without needing to call <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/conversations/mls-self</span></code> first (#2856)</p></li>
<li><p>Fail early in galley when the MLS removal key is not configured (#2899)</p></li>
<li><p>Introduce a flag in brig to enable MLS explicitly. When this flag is set to false or absent, MLS functionality is completely disabled and all MLS endpoints fail immediately. (#2913)</p></li>
<li><p>Conversation events may have a “subconv” field for events that originate in a MLS subconversation (#2933)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/system/settings/unauthorized</span></code> returns a curated set of system settings from brig. The endpoint is reachable without authentication/authorization. It’s meant to be used by apps to adjust their behavior (e.g. to show a registration dialog if registrations are enabled on the backend.) Currently, only the <code class="docutils literal notranslate"><span class="pre">setRestrictUserCreation</span></code> flag is exported. Other options may be added in future (in consultation with the security department.) (#2903)</p></li>
</ul>
</section>
<section id="id15">
<h2>Features<a class="headerlink" href="#id15" title="Permalink to this heading"></a></h2>
<ul>
<li><p>The coturn Helm chart now has a <code class="docutils literal notranslate"><span class="pre">.tls.ciphers</span></code> option to allow setting
the cipher list for TLS connections, when TLS is enabled. By default,
this option is set to a cipher list which is compliant with <a class="reference external" href="https://www.bsi.bund.de/SharedDocs/Downloads/EN/BSI/Publications/TechGuidelines/TG02102/BSI-TR-02102-2.pdf">BSI
TR-02102-2</a>. (#2924)</p></li>
<li><p><strong>Nginz helm chart</strong>: The list of upstreams is split into <code class="docutils literal notranslate"><span class="pre">nginx_conf.upstreams</span></code> and
<code class="docutils literal notranslate"><span class="pre">nginx_conf.extra_upstreams</span></code>. Extra upstreams are disabled by default. They can
be enabled by adding their name (entry’s key) to
<code class="docutils literal notranslate"><span class="pre">nginx_conf.enabled_extra_upstreams</span></code>. <code class="docutils literal notranslate"><span class="pre">nginx_conf.ignored_upstreams</span></code> is only
applied to upstreams from <code class="docutils literal notranslate"><span class="pre">nginx_conf.upstreams</span></code>. In the default configuration
of <code class="docutils literal notranslate"><span class="pre">nginz</span></code> extra upstreams are <code class="docutils literal notranslate"><span class="pre">ibis</span></code>, <code class="docutils literal notranslate"><span class="pre">galeb</span></code>, <code class="docutils literal notranslate"><span class="pre">calling-test</span></code> and <code class="docutils literal notranslate"><span class="pre">proxy</span></code>. If one
of those is deployed, its name has be be added to
<code class="docutils literal notranslate"><span class="pre">nginx_conf.enabled_extra_upstreams</span></code> (otherwise, it won’t be reachable). Unless
<code class="docutils literal notranslate"><span class="pre">nginx_conf.upstreams</span></code> hasn’t been changed manually (overriding its default),
this should be the only needed migration step. (#2849)</p></li>
<li><p>A team member’s role can now be provisioned via SCIM (#2851, #2855)</p></li>
<li><p>Team search endpoint now supports pagination (#2898, #2895)</p></li>
<li><p>Introduce optional disabledAPIVersions configuration setting (#2951)</p></li>
<li><p>Add more logs to SMTP mail sending. Ensure that logs are written before the application fails due to SMTP misconfiguration. (#2818)</p></li>
<li><p>Added typing indicator status propagation to federated environments (#2892)</p></li>
<li><p>Allow vhost style addressing for S3 as path style is not supported for newer buckets.</p>
<p>More info: https://aws.amazon.com/blogs/aws/amazon-s3-path-deprecation-plan-the-rest-of-the-story/ (#2955)</p>
</li>
</ul>
</section>
<section id="id16">
<h2>Bug fixes and other updates<a class="headerlink" href="#id16" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix typo for Servicemonitor enable var in default values for helm charts. (#2896)</p></li>
<li><p>The parser for the AWS/SNS error message to explain that an endpoint is already in use was incorrect. This lead to an “invalid token” error when registering push tokens for multiple user accounts (user ids) instead of updating the SNS endpoint with an additional user id. (#2921)</p></li>
<li><p>Avoid client deletion edge case condition which can lead to inconsistent data between brig and galley’s clients tables. (#2830)</p></li>
<li><p>Conversations inside events are now serialised using the format of API V2 (#2971)</p></li>
<li><p>Do not throw 500 when listing conversations and MLS is not configured (#2893)</p></li>
<li><p>Do not list MLS self-conversation in client API v1 and v2 if it exists (#2872)</p></li>
<li><p>Limit 2FA code retries to 3 attempts (#2960)</p></li>
<li><p>Fix bug in MLS user removal from conversation: the list of removed clients has to be compared with those in the conversation, not the list of <em>all</em> clients of that user (#2817)</p></li>
<li><p>Due to <code class="docutils literal notranslate"><span class="pre">sftd</span></code> changing how configuration is handled for “multi-SFT” calling (starting with version 3.1.10), new options have been added to the <code class="docutils literal notranslate"><span class="pre">sftd</span></code> Helm chart for compatibility with these newer versions. (#2886)</p></li>
<li><p>For sftd/coturn/restund, fixed a bug in external ip address lookup, in case Kubernetes Node Name doesn’t equal hostname. (#2837)</p></li>
<li><p>Requesting a new token with the client_id now works correctly when the old token is part of the request (#2860)</p></li>
</ul>
</section>
<section id="id17">
<h2>Documentation<a class="headerlink" href="#id17" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add extra section to the deeplink docs to explain the socks proxy support while login. (#2885)</p></li>
<li><p>Describe the auth cookie throttling mechanism. And overhaul the description of auth cookies in general. (#2941)</p></li>
<li><p>PR guidelines docs are updated with correct helm configuration syntax (#2889)</p></li>
</ul>
</section>
<section id="id18">
<h2>Internal changes<a class="headerlink" href="#id18" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Log AWS / SNS invalid token responses. This is helpful for native push notification debugging purposes. (#2908)</p></li>
<li><p>Add tests for invitation urls in team invitation responses. These depend on the settings of galley. (#2797)</p></li>
<li><p>brig: Allow multiple threads to run simultaneously (#2972)</p></li>
<li><p>Remove support for compiling local docker images with buildah. Nix is used to build docker images these days (#2822)</p></li>
<li><p>Nix-created docker images: add some debugging tools in the containers, and add ‘make build-image-<packagename>’ for convenience (#2829)</p></li>
<li><p>Added typeclasses to track uses of federated calls across the codebase. (#2940)</p></li>
<li><p>Split galley API routes and handler definitions into several modules (#2820)</p></li>
<li><p>Default intraListing to true. This means that the list of clients, so far saved in both brig’s and galley’s databases, will still be written to both, but only read from brig’s database. This avoids cases where these two tables go out of sync. Brig becomes the source of truth for clients. In the future, if this holds, code and data for galley’s clients table can be removed. (#2847)</p></li>
<li><p>Introduce the <code class="docutils literal notranslate"><span class="pre">MakesFederatedCall</span></code> Servant combinator (#2950)</p></li>
<li><p>Bump nixpkgs to latest unstable. Stop using forked nixpkgs. (#2828)</p></li>
<li><p>Optimize memory usage while creating large conversations (#2970)</p></li>
<li><p>Reduce Polysemy-induced high memory requirements (#2947)</p></li>
<li><p>Brig calling API is now migrated to servant (#2815)</p></li>
<li><p>Fixed flaky feature TTL integration test (#2823)</p></li>
<li><p>Brig teams API is now migrated to servant (#2824)</p></li>
<li><p>Add ‘inconsistencies’ tool to check for, and repair certain kinds of data inconsistencies across different cassandra tables. (#2840)</p></li>
<li><p>Backoffice Swagger 2.x docs is exposed on <code class="docutils literal notranslate"><span class="pre">/</span></code> and the old Swagger has been removed. Backoffice helm chart only runs stern without an extra nginx. (#2846)</p></li>
<li><p>Give proxy service a servant routing table for swagger (not for replacing wai-route; see comments in source code) (#2848)</p></li>
<li><p>Stern API endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">ejpd-info</span></code> has now the correct HTTP method (#2850)</p></li>
<li><p>External commits: add additional checks (#2852)</p></li>
<li><p>Golden tests for conversation and feature config event schemas (#2861)</p></li>
<li><p>Add startup probe to brig helm chart. (#2878)</p></li>
<li><p>Track federated calls in types across the codebase. (#2940)</p></li>
<li><p>Update nix pins to point at polysemy-1.8.0.0 (#2949)</p></li>
<li><p>Add MakesFederatedCall combinators to Galley (#2957)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span></code>; allow new data constructors in <code class="docutils literal notranslate"><span class="pre">ToSchema</span> <span class="pre">Version</span></code> instance (#2965)</p></li>
<li><p>Refactor and simplify MLS message handling logic (#2844)</p></li>
<li><p>Remove cassandra queries to the user_keys_hash table, as they are never read anymore since ‘onboarding’ / auto-connect was removed in https://github.com/wireapp/wire-server/pull/1005 (#2902)</p></li>
<li><p>Replay external backend proposals after forwarding external commits.
One column added to Galley’s mls_proposal_refs. (#2842)</p></li>
<li><p>Remove an unused effect for remote conversation listing (#2954)</p></li>
<li><p>Introduce types for subconversations (#2925)</p></li>
<li><p>Use treefmt to ensure consistent formatting of .nix files, use for shellcheck too (#2831)</p></li>
</ul>
</section>
<section id="id19">
<h2>Federation changes<a class="headerlink" href="#id19" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Honour MLS flag in brig’s federation API (#2946)</p></li>
<li><p>Split the Proteus and MLS message sending requests into separate types. The MLS request now supports MLS subconversations. This is a federation API breaking change. (#2925)</p></li>
<li><p>Injects federated calls into the <code class="docutils literal notranslate"><span class="pre">x-wire-makes-federated-calls-to</span></code> extension of the swagger Operations (#2950)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-29-0">
<h1>[2022-12-09] (Chart Release 4.29.0)<a class="headerlink" href="#chart-release-4-29-0" title="Permalink to this heading"></a></h1>
<section id="id20">
<h2>Bug fixes and other updates<a class="headerlink" href="#id20" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Prevention of storing unnecessary data in the database if adding a bot to a conversation fails. (#2870)</p></li>
</ul>
</section>
<section id="id21">
<h2>Internal changes<a class="headerlink" href="#id21" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>bump nginx-module-vts from v0.1.15 to v0.2.1 (#2827)</p></li>
<li><p>Build nginz and nginz_disco docker images using nix (#2796)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-26-0">
<h1>[2022-11-03] (Chart Release 4.26.0)<a class="headerlink" href="#chart-release-4-26-0" title="Permalink to this heading"></a></h1>
<section id="id22">
<h2>Release notes<a class="headerlink" href="#id22" title="Permalink to this heading"></a></h2>
<ul>
<li><p>If you have not upgraded to <a class="reference external" href="https://github.com/wireapp/wire-server/releases/tag/v2021-03-21">release 2021-03-21 (Chart Release 2.103.0)</a> yet, please do that now!</p>
<p>NB: we only support releases 6 months back, so this should not be an issue.  But in this particular case we are positive that things will break if you don’t do an intermediate upgrade. (#2768)</p>
</li>
<li><p>Build docker images using nix derivations instead of Dockerfiles (#2331, #2771, #2772, #2775, #2776)</p></li>
<li><p>Upgrade team-settings version to 4.13.0-v0.31.5-0-4754212 (#2180)</p></li>
<li><p>Upgrade webapp version to 2022-11-02-production.0-v0.31.9-0-337e400 (#2302)</p></li>
<li><p>The experimental wire-server-metrics helm chart has been removed.</p>
<p>These were mostly a wrapper around prometheus operator. It makes more sense to
refer to the upstream docs of Prometheus Operator or Grafana Agent Operator for
installation instead. (#2740)</p>
</li>
</ul>
</section>
<section id="id23">
<h2>API changes<a class="headerlink" href="#id23" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Do not expose swagger-ui on prod systems (to minimize attack surface) (#2800)</p></li>
<li><p>Change mime type of body of /v3/mls/commit-bundles endpoint (#2773)</p></li>
<li><p>Stop rate-limiting asset-signed-url requests on /assets/.* (#2786)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">/access</span></code> endpoint now takes an optional <code class="docutils literal notranslate"><span class="pre">client_id</span></code> query parameter. The first time it is provided, a new user token will be generated containing the given client ID. Successive invocations of <code class="docutils literal notranslate"><span class="pre">/access</span></code> will ignore the <code class="docutils literal notranslate"><span class="pre">client_id</span></code> parameter. Some endpoints can now potentially require a client ID as part of the access token. When trying to invoke them with an access token that does not contain a client ID, an authentication error will occur. (#2764)</p></li>
</ul>
</section>
<section id="id24">
<h2>Features<a class="headerlink" href="#id24" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Introduce support for external commits in MLS (#2765)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/teams/{tid}/members</span></code> endpoint now supports pagination (#2802)</p></li>
</ul>
</section>
<section id="id25">
<h2>Bug fixes and other updates<a class="headerlink" href="#id25" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Clients without any prekeys are not deleted completely (#2758)</p></li>
</ul>
</section>
<section id="id26">
<h2>Documentation<a class="headerlink" href="#id26" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>tentatively allow <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/api/event-notification-schemas</span></code> for json schemas of server-initiated events (missing pieces tracked in https://wearezeta.atlassian.net/browse/FS-1008) (#2739)</p></li>
<li><p>Fix copyright date on docs.wire.com (#2792)</p></li>
<li><p>Improve and cross-link documentation on SNS / push notifications. (#2781)</p></li>
<li><p>Add extension sphinx-reredirects and configuration to generate simple JavaScript based redirects to new locations of previously inconsistently named files/URLs. (#2811)</p></li>
</ul>
</section>
<section id="id27">
<h2>Internal changes<a class="headerlink" href="#id27" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Convert brig’s auth endpoints to servant (#2750)</p></li>
<li><p>Remove deprecated table for storing scim external_ids.</p>
<p>Data has been migrated away in <a class="reference external" href="https://github.com/wireapp/wire-server/releases/tag/v2021-03-21">release 2021-03-21 (Chart Release 2.103.0)</a> (see <code class="docutils literal notranslate"><span class="pre">/services/spar/migrate-data/src/Spar/DataMigration/V1_ExternalIds.hs</span></code>); last time it has been touched in production is before upgrade to <a class="reference external" href="https://github.com/wireapp/wire-server/releases/tag/v2021-03-23">release 2021-03-23 (Chart Release 2.104.0)</a>. (#2768)</p>
</li>
<li><p>Refactor some internal Scim user tests (#2762)</p></li>
<li><p>Reduce the payload size of internal <code class="docutils literal notranslate"><span class="pre">client.delete</span></code> event (#2807, #2816)</p></li>
<li><p>Bump servant-swagger-ui package. (#2747)</p></li>
<li><p>Increase charts/galley memory limit to 500M. (#2798)</p></li>
<li><p>Add RPC, ServiceRPC and GalleyProvider effects to brig (#2653)</p></li>
<li><p>Use locally build schema binaries for db migrations and execute them right before running integration tests. (#2791)</p></li>
<li><p>Rename the make targets from <code class="docutils literal notranslate"><span class="pre">db-migrate-package</span></code> and <code class="docutils literal notranslate"><span class="pre">db-reset-package</span></code> to <code class="docutils literal notranslate"><span class="pre">db-migrate</span></code> and <code class="docutils literal notranslate"><span class="pre">db-reset</span></code> and allow migrating and resetting all keyspaces. (#2791)</p></li>
<li><p>Add a Make target for ghci (#2749)</p></li>
<li><p>Upgrade nginz/nginx to 1.22.1 (#2777)</p></li>
<li><p>The dev environment provided by nix now contains all the haskell packages
compiled by nix. This could casue linker errors while compiling haskell code in
this repo. One way to get resolve them is to delete the ‘dist-newstyle’
directory. (#2331)</p></li>
<li><p>Implemented a new intersperse combinator for Polysemy (#2767)</p></li>
<li><p>Add a Concurrency effect for Polysemy (#2748)</p></li>
<li><p>Don’t fail client deletion when mls remove key is undefined (#2738)</p></li>
<li><p>Migrate stern to swagger2-ui (remaining backwards compatible with circulating backoffice images) (see also #2742 from last release) (#2744)</p></li>
<li><p>Gundeck push token API and notification API is migrated to Servant (#2769)</p></li>
<li><p>Delete <code class="docutils literal notranslate"><span class="pre">deploy/services-demo</span></code> directory (#2789)</p></li>
<li><p>Upgrade Servant to 0.19 (#2809)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-25-0">
<h1>[2022-10-04] (Chart Release 4.25.0)<a class="headerlink" href="#chart-release-4-25-0" title="Permalink to this heading"></a></h1>
<section id="id28">
<h2>Release notes<a class="headerlink" href="#id28" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Upgrade webapp version to 2022-10-04-production.0-v0.31.2-0-a438b30 (#2302)</p></li>
</ul>
</section>
<section id="id29">
<h2>API changes<a class="headerlink" href="#id29" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove /legalhold/conversation alias from v2 (#2734)</p></li>
<li><p>Make v2 a supported version and start v3 (#2734)</p></li>
</ul>
</section>
<section id="id30">
<h2>Features<a class="headerlink" href="#id30" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Allow deletion of MLS team conversations (#2733)</p></li>
</ul>
</section>
<section id="id31">
<h2>Bug fixes and other updates<a class="headerlink" href="#id31" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Revert synchronous semantics of client deletion endpoint (#2737)</p></li>
</ul>
</section>
<section id="id32">
<h2>Documentation<a class="headerlink" href="#id32" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>JCT-146 - update outdated info
SER-211 - update new info regarding nodetool use (#2736)</p></li>
</ul>
</section>
<section id="id33">
<h2>Internal changes<a class="headerlink" href="#id33" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Skeleton implementation of new endpoint for JWT DPoP access token generation (#2652, #2686)</p></li>
<li><p>Add swagger2-ui to stern (#2742 …)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-24-0">
<h1>[2022-09-27] (Chart Release 4.24.0)<a class="headerlink" href="#chart-release-4-24-0" title="Permalink to this heading"></a></h1>
<section id="id34">
<h2>Release notes<a class="headerlink" href="#id34" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>For users of the (currently alpha) coturn Helm chart, <strong>manual action is
required</strong> when upgrading to this version. The labels applied to the Kubernetes
manifests in this chart have changed, in order to match the conventions used
in the wire-server charts. However, this may mean that upgrading with Helm can
fail, due to changes to the <code class="docutils literal notranslate"><span class="pre">StatefulSet</span></code> included in this chart – in this
case, the <code class="docutils literal notranslate"><span class="pre">StatefulSet</span></code> must be deleted before the chart is upgraded. (#2677)</p></li>
<li><p>wire-server helm charts: Adjust default CPU/Memory resources: Remove CPU limits to avoid CPU throttling; adjust request CPU and memory based on observed values. Overall this decreases the amount of CPU/memory that the wire-server chart needs to install/schedule pods. (#2675)</p></li>
<li><p>Upgrade team-settings version to 4.12.1-v0.31.5-0-0167ea4 (#2180)</p></li>
<li><p>Upgrade webapp version to 2022-09-20-production.0-v0.31.2-0-7f74074 (#2302)</p></li>
</ul>
</section>
<section id="id35">
<h2>API changes<a class="headerlink" href="#id35" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add new endpoint <code class="docutils literal notranslate"><span class="pre">/mls/commit-bundles</span></code> for submitting MLS <code class="docutils literal notranslate"><span class="pre">CommitBundle</span></code>s. A <code class="docutils literal notranslate"><span class="pre">CommitBundle</span></code> is a triple consisting of a commit message, an optional welcome message and a public group state. (#2688)</p></li>
<li><p>MLS: Store and expose group info via <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/conversations/:domain/:id/groupinfo</span></code> (#2721)</p></li>
<li><p>Add /mls/public-keys to nginz chart (#2676)</p></li>
<li><p>Users being kicked out results in member-leave events originating from the user who caused the change in the conversation (#2724)</p></li>
<li><p>Leaving an MLS conversation is now possible using the regular endpoint <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/conversations/{cnv_domain}/{cnv}/members/{usr_domain}/{usr}</span></code>. When a user leaves, the backend sends external remove proposals for all their clients in the corresponding MLS group. (#2667)</p></li>
<li><p>Validate remotely claimed key packages (#2692)</p></li>
</ul>
</section>
<section id="id36">
<h2>Features<a class="headerlink" href="#id36" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The coturn chart now has support for exposing its metric endpoint with a
ServiceMonitor, which can be ingested by third-party metrics collection tools. (#2677)</p></li>
<li><p>Deleting clients creates MLS remove proposals (#2674)</p></li>
<li><p>External remove proposals are now sent to a group when a user is deleted (#2650)</p></li>
<li><p>Allow non-admins to commit add proposals in MLS conversations (#2691)</p></li>
<li><p>Optionally add invitation urls to the body of <code class="docutils literal notranslate"><span class="pre">/teams/{tid}/invitations</span></code>. This allows further processing; e.g. to send those links with custom emails or distribute them as QR codes. See <a class="reference external" href="https://docs.wire.com/developer/reference/config-options.html#expose-invitation-urls-to-team-admin">docs</a> for details and privacy implications. (#2684)</p></li>
</ul>
</section>
<section id="id37">
<h2>Bug fixes and other updates<a class="headerlink" href="#id37" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>SCIM user deletion suffered from a couple of race conditions. The user in now first deleted in spar, because this process depends on data from brig. Then, the user is deleted in brig. If any error occurs, the SCIM deletion request can be made again. This change depends on brig being completely deployed before using the SCIM deletion endpoint in brig. In the unlikely event of using SCIM deletion during the deployment, these requests can be retried (in case of error). (#2637)</p></li>
<li><p>The 2nd factor password challenge team feature is disabled for SSO users (#2693)</p></li>
<li><p>Less surprising handling of SIGINT, SIGTERM for proxy, stern. Increase grace period for shutdown from 5s to 30s for all services.  (#2715)</p></li>
</ul>
</section>
<section id="id38">
<h2>Documentation<a class="headerlink" href="#id38" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Drop Client model (unused) from old swagger.
Add a description and example data for mls_public_keys field in new swagger. (#2657)</p></li>
<li><p>Document user deactivation (aka suspension) with SCIM. (#2720)</p></li>
<li><p>Monitoring page showed wrong wrong configuration charts. Updated prometheus-operator to kube-prometheus-stack chart in the documentation.  (#2708)</p></li>
</ul>
</section>
<section id="id39">
<h2>Internal changes<a class="headerlink" href="#id39" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Make client deletion asynchronous (#2669)</p></li>
<li><p>Allow external add proposals without previously uploading key packages. (#2661)</p></li>
<li><p>Allow legalhold tokens access to <code class="docutils literal notranslate"><span class="pre">/converations/&lt;uuid&gt;</span></code> endpoint (#2682, #2726)</p></li>
<li><p>Move Brig.Sem.* modules to Brig.Effects (consistency) (#2672)</p></li>
<li><p>The labels applied to resources in the coturn chart have been changed to
reflect the conventions in the wire-server charts. (#2677)</p></li>
<li><p>Drop the <code class="docutils literal notranslate"><span class="pre">managed</span></code> column from <code class="docutils literal notranslate"><span class="pre">team_conv</span></code> table in Galley (#2127)</p></li>
<li><p>Fix link in PR template (#2673)</p></li>
<li><p>In Gundeck’s ‘notifications’ cassandra table, switch to <a class="reference external" href="https://cassandra.apache.org/doc/latest/cassandra/operating/compaction/twcs.html">TWCS</a> compaction strategy, which should be more efficient for this workload, and possibly bring performance benefits to latencies.
It may be beneficial to run a manual compaction before rolling out this
change (but things should also work without this manual operation).
In case you have time, run the following from a cassandra machine before deploying this update: <code class="docutils literal notranslate"><span class="pre">nodetool</span> <span class="pre">compact</span> <span class="pre">gundeck</span> <span class="pre">notifications</span></code>. (#2615)</p></li>
<li><p>Add regular expression support to libzauth ACL language (#2714)</p></li>
<li><p>Make test API calls point to the most recent version by default (#2695)</p></li>
<li><p>Clients and key package refs in an MLS conversation are now stored in their own table. (#2667)</p></li>
<li><p>Refactor MLS test framework (#2678)</p></li>
<li><p>Update mls-test-cli to version 0.5 (#2685)</p></li>
<li><p>Added rusty-jwt-tools to docker images (#2686)</p></li>
<li><p>The account API is now migrated to servant. (#2699, #2700, #2701, #2702, #2703, #2704, #2705, #2707)</p></li>
<li><p>Update nginz and cannon ACLs to match api-versioned paths (#2725)</p></li>
<li><p>For wire-server cloud, on kubernetes 1.21+, favour topology-aware routing, which reduces unnecessary inter-availability-zone traffic, reducing latency and cloud provider cross-AZ traffic costs. (#2723)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-23-0">
<h1>[2022-09-01] (Chart Release 4.23.0)<a class="headerlink" href="#chart-release-4-23-0" title="Permalink to this heading"></a></h1>
<section id="id40">
<h2>Release notes<a class="headerlink" href="#id40" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The internal endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">i/mls/clients</span></code> has been changed, and it now returns a list of <code class="docutils literal notranslate"><span class="pre">ClientInfo</span></code> instead of a list of <code class="docutils literal notranslate"><span class="pre">ClientId</span></code>. (#2631)</p></li>
</ul>
</section>
<section id="id41">
<h2>API changes<a class="headerlink" href="#id41" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix key package error description (#2651)</p></li>
<li><p>Expose MLS public keys in a new endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/mls/public-keys</span></code>. (#2602)</p></li>
</ul>
</section>
<section id="id42">
<h2>Features<a class="headerlink" href="#id42" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The coturn chart now supports exposing the control port over TLS. (#2620)</p></li>
<li><p>Forward all MLS default proposal types (#2628)</p></li>
<li><p>New endpoints <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> and <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/nonce/clients</span></code> to request new nonces for client certificate requests (coming up soon). (#2641, #2655)</p></li>
</ul>
</section>
<section id="id43">
<h2>Bug fixes and other updates<a class="headerlink" href="#id43" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix cql-io bug where restarting whole cassandra cluster could cause downtime. Upstream changes in https://gitlab.com/twittner/cql-io/-/merge_requests/20 (#2640)</p></li>
<li><p>Improve client check when adding clients to MLS conversations (#2631)</p></li>
</ul>
</section>
<section id="id44">
<h2>Documentation<a class="headerlink" href="#id44" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Move developer docs onto docs.wire.com (instead of exposing them on github only) (#2622, #2649)</p></li>
<li><p>Add build instructions for developers (#2621)</p></li>
<li><p>Make target audience explicit on docs.wire.com (#2662)</p></li>
</ul>
</section>
<section id="id45">
<h2>Internal changes<a class="headerlink" href="#id45" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Support for external Add proposals (#2567)</p></li>
<li><p>Add additional checks on incoming MLS messages:</p>
<ul>
<li><p>if the sender matches the authenticated user</p></li>
<li><p>if the sender of message to a remote conversation is a member</p></li>
<li><p>if the group ID of a remote conversation matches the local mapping (#2618)</p></li>
</ul>
</li>
<li><p>Apply changes introduced by cabal-fmt. (#2624)</p></li>
<li><p>Remove some redudant constraints in brig (#2638)</p></li>
<li><p>Brig Polysemy: Port UserPendingActivationStore to polysemy (#2636)</p></li>
<li><p>Add make target <code class="docutils literal notranslate"><span class="pre">delete-cache-on-linker-errors</span></code> to delete all Haskell compilation related caches. This is useful in cases where the development environment gets into an inconsistent state. (#2623)</p></li>
<li><p>Move Paging effect from galley into polysemy-wire-zoo (#2648)</p></li>
<li><p>Fix broken hls-hlint-plugin in nix env (#2629)</p></li>
<li><p>Adjust developer PR template and document config and API procedures in-tree. (#2617)</p></li>
<li><p>Add mls-test-cli to builder image (#2626)</p></li>
<li><p>Add mls-test-cli to deps image (#2630)</p></li>
<li><p>mls-test-cli: Use Cargo.lock file when building (#2634)</p></li>
<li><p>Move common Arbitrary instances to types-common package for compilation speed (#2658)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LoginId</span></code> migrated to schema-profunctor (#2633, #2645)</p></li>
<li><p>Improve cleaning rules in Makefile. (#2639)</p></li>
<li><p>Fix typos, dangling reference in source code haddocs, etc. (#2586)</p></li>
<li><p>Update the Elastic Search version used for running integration tests to the one that is delivered by wire-server-deploy. (#2656)</p></li>
</ul>
</section>
<section id="id46">
<h2>Federation changes<a class="headerlink" href="#id46" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add mlsPrivateKeyPaths setting to galley (#2602)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-22-0">
<h1>[2022-08-16] (Chart Release 4.22.0)<a class="headerlink" href="#chart-release-4-22-0" title="Permalink to this heading"></a></h1>
<section id="id47">
<h2>API changes<a class="headerlink" href="#id47" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Drop the deprecated member removal endpoint (#2593)</p></li>
</ul>
</section>
<section id="id48">
<h2>Features<a class="headerlink" href="#id48" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>charts/cannon: Ensure HSTS headers are set for all endpoints (#2574)</p></li>
<li><p>Expired MLS key packages are deleted from the database (#2582)</p></li>
<li><p>Add support for MLS Remove proposals (#2561)</p></li>
<li><p>Human readable names for SAML IdPs (#2565)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">preferredLanguage</span></code> field from SCIM now maps to the user locale in BRIG and will be set and updated on post SCIM user and on update SCIM user using SAML. (#2605)</p></li>
<li><p>For TLS1.2, by default, remove ECDHE-ECDSA-AES128-GCM-SHA256 and ECDHE-RSA-AES128-GCM-SHA256 ciphers for ingress traffic. (#2528)</p></li>
</ul>
</section>
<section id="id49">
<h2>Bug fixes and other updates<a class="headerlink" href="#id49" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Allow deleting existing splash screens in `PUT /teams/:tid (see also PR#2474 in Release 4.18.0) (#2588)</p></li>
<li><p>Backoffice: Fix an issue where in some deployments ibis/galeb (Wire Cloud internal services) are unreachable from backoffice if deployed in a different namespace. (#2610)</p></li>
<li><p>Fix an issue for larger client requests on e.g. /list-users and /list-conversations, which were giving 413 errors for some users. Allow client requests of 256k by default (was 64k). (#2579)</p></li>
</ul>
</section>
<section id="id50">
<h2>Internal changes<a class="headerlink" href="#id50" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add shellcheck, libstdc++ to nix env; handle emacs auto-save files better (#2609)</p></li>
<li><p>Allow features to be set with HTTP method PATCH. This reflects a prior behavior
that is used by Ibis. Additionally, it’s more consistent when all setters can be
called with PUT and PATCH. As this will fix calls by Ibis, the deployment order
doesn’t matter. (#2575)</p></li>
<li><p>Brig Polysemization: introduce BlacklistStore and BlacklistPhonePrefixStore effects (#2590)</p></li>
<li><p>Add cabal-fmt development tool (#2601)</p></li>
<li><p>Reformat all cabal files with cabal-fmt (#2603)</p></li>
<li><p>Delete tools: bonanza and makedeb (#2600)</p></li>
<li><p>No more package.yaml / hpack, and stick with cabal files as the single (and only) source of truth (#2596)</p></li>
<li><p>Port Brig SearchAPI and UserRichInfo endpoints to Servant (#2580)</p></li>
<li><p>Added TTL data to stern feature flag GET endpoint. (#2564)</p></li>
<li><p>Prepare removing deprecated non-binding teams (no more used in integration tests) (#2514, #2607)</p></li>
<li><p>Add internal endpoint in Brig to update clients’ key package refs in DB upon committing.
Brig should be deployed before Galley. (#2604)</p></li>
<li><p>Improved the resilience of provisioning new users via SAML by combining two persistence calls into one, preventing a creation failure from locking a user handle with no corresponding user. (#2526)</p></li>
</ul>
</section>
<section id="id51">
<h2>Federation changes<a class="headerlink" href="#id51" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix TBS field in MLS Message type (#2599)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-21-0">
<h1>[2022-07-19] (Chart Release 4.21.0)<a class="headerlink" href="#chart-release-4-21-0" title="Permalink to this heading"></a></h1>
<section id="id52">
<h2>Release notes<a class="headerlink" href="#id52" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Users of the (currently alpha) coturn Helm chart must <strong>manually update
their configuration</strong> due to changes in how the chart handles authentication
secrets. Please see below for further details. (#2553)</p></li>
</ul>
</section>
<section id="id53">
<h2>API changes<a class="headerlink" href="#id53" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The response to POST /mls/messages adds a timestamp (#2560)</p></li>
</ul>
</section>
<section id="id54">
<h2>Features<a class="headerlink" href="#id54" title="Permalink to this heading"></a></h2>
<ul>
<li><p>charts/wire-server: default log format everywhere to StructuredJSON format (introduced in #1951 and #1959) (#2559)</p></li>
<li><p>The coturn chart now supports multiple authentication secrets, which permits
multiple backend instances to use the same TURN servers without needing to
share authentication secrets between the backend instances.</p>
<p>Correspondingly, the <code class="docutils literal notranslate"><span class="pre">.Values.secrets.zrestSecret</span></code> configuration option, which
took a single authentication secret as its argument, has been replaced with the
option <code class="docutils literal notranslate"><span class="pre">.Values.secrets.zrestSecrets</span></code> (note spelling!), which instead takes a
<em>list</em> of authentication secrets as its argument. (#2553)</p>
</li>
<li><p>Add support for bare MLS proposals (#2436)</p></li>
</ul>
</section>
<section id="id55">
<h2>Bug fixes and other updates<a class="headerlink" href="#id55" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix a bug in charts/cannon. It’s now possible to use a custom TLS certificate when enabling cannon’s nginz sidecar container. (Previously only letsencrypt certificates worked, and were tested) (#2558)</p></li>
<li><p>Minor fixes in helmcharts:</p>
<ul>
<li><p>charts/nginz: Rate limit SSO endpoints less</p></li>
<li><p>charts/nginz: Ensure rate limiting isn’t commented out</p></li>
<li><p>charts/galley: Honour .setttings.httpPoolSize</p></li>
<li><p>charts/galley: Fix typo in settings.featureFlags.validateSAMLEmails</p></li>
<li><p>charts/gundeck: Remove aws.connectionLimit</p></li>
<li><p>charts/brig: Fix default brandLabelUrl and remove brandLabel (#2563)</p></li>
</ul>
</li>
</ul>
</section>
<section id="id56">
<h2>Internal changes<a class="headerlink" href="#id56" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Port brig UserHandle API to servant (#2556)</p></li>
<li><p>Bump timeout for integration tests to 15 minutes (from 10 minutes), as 10 minutes is no longer enough. (#2570)</p></li>
<li><p>Internal endpoints to <code class="docutils literal notranslate"><span class="pre">PATCH</span></code> feature status (#2555)</p></li>
<li><p>Change the proposal hold time to 28 days (#2568)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-19-0">
<h1>[2022-07-12] (Chart Release 4.19.0)<a class="headerlink" href="#chart-release-4-19-0" title="Permalink to this heading"></a></h1>
<section id="id57">
<h2>Release notes<a class="headerlink" href="#id57" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Deploy spar before galley (#2543)</p></li>
<li><p>Upgrade team-settings version to 4.11.0-v0.31.1-0-9e64150 (#2180)</p></li>
</ul>
</section>
<section id="id58">
<h2>API changes<a class="headerlink" href="#id58" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Restore PUT /v2/connections endpoint (#2539)</p></li>
</ul>
</section>
<section id="id59">
<h2>Features<a class="headerlink" href="#id59" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>2nd factor authentication code generation is rate limited now (#2522)</p></li>
<li><p>The team member CSV export now fills <code class="docutils literal notranslate"><span class="pre">created_on</span></code> for SCIM users (#2543)</p></li>
</ul>
</section>
<section id="id60">
<h2>Internal changes<a class="headerlink" href="#id60" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add Helm chart for inbucket. Inbucket is a SMTP server that does not relay, but instead display received mail in a webapp and make them accessible via an API. (#2544)</p></li>
<li><p>Bump saml2-web-sso (#2545, #2546)</p></li>
<li><p>use checkedConnectCluster to avoid dropping requests to Redis when Gundeck reconnects to the Redis cluster (#2542)</p></li>
<li><p>Do not log polysemy errors in Galley (#2531)</p></li>
<li><p>Remove old crypto-cli tool from the ubuntu image (#2538)</p></li>
</ul>
</section>
<section id="id61">
<h2>Federation changes<a class="headerlink" href="#id61" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Added new-remote-conversation RPC, used to notify a backend of a remote conversation the first time any user from that backend is added to it. (#2378)</p></li>
<li><p>Added federation endpoint <code class="docutils literal notranslate"><span class="pre">send-mls-message</span></code> used to send messages to remote converesations (#2378)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-18-0">
<h1>[2022-07-05] (Chart Release 4.18.0)<a class="headerlink" href="#chart-release-4-18-0" title="Permalink to this heading"></a></h1>
<section id="id62">
<h2>Release notes<a class="headerlink" href="#id62" title="Permalink to this heading"></a></h2>
<ul>
<li><p>For users of the (currently alpha) coturn Helm chart:
<strong>manual intervention may be required</strong> when upgrading to
this version of the chart from a prior version, due to <a class="reference external" href="https://github.com/kubernetes/kubernetes/issues/39188">a bug in
Kubernetes</a> which
may interfere with applying changes to pod and service port configuration
correctly.</p>
<p>If, after updating this chart, the coturn pods do not have both a <code class="docutils literal notranslate"><span class="pre">coturn-udp</span></code>
port and a <code class="docutils literal notranslate"><span class="pre">coturn-tcp</span></code> port, then the coturn <code class="docutils literal notranslate"><span class="pre">StatefulSet</span></code> must be manually
deleted from the cluster, and then recreated by re-running Helm. Similarly, if
the coturn <code class="docutils literal notranslate"><span class="pre">Service</span></code> does not have both a <code class="docutils literal notranslate"><span class="pre">coturn-udp</span></code> port and a <code class="docutils literal notranslate"><span class="pre">coturn-tcp</span></code>
port, this <code class="docutils literal notranslate"><span class="pre">Service</span></code> must also be deleted and recreated. (#2500)</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">nginz{-tcp,-http}</span></code> services have been unified into a <code class="docutils literal notranslate"><span class="pre">nginz</span></code> service, and
moved into the nginz chart.</p>
<p>The nginz-ingress-services chart simply targets the <code class="docutils literal notranslate"><span class="pre">nginz</span></code> service, so there’s
no need to set matching <code class="docutils literal notranslate"><span class="pre">service.nginz.external{Http,Tcp}Port</span></code> inside the
<code class="docutils literal notranslate"><span class="pre">nginx-ingress-services</span></code> chart anymore.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">config.http.httpPort</span></code> and <code class="docutils literal notranslate"><span class="pre">config.ws.wsPort</span></code> values in the <code class="docutils literal notranslate"><span class="pre">nginz</span></code> chart
still configure the ports the <code class="docutils literal notranslate"><span class="pre">nginz</span></code> service is listening on.</p>
<p>Metrics were moved from <code class="docutils literal notranslate"><span class="pre">config.http.httpPort</span></code> to a new <code class="docutils literal notranslate"><span class="pre">http-metrics</span></code> port.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">nginz</span></code> chart also gained support for <code class="docutils literal notranslate"><span class="pre">metrics.serviceMonitor.enabled</span></code>,
creating a <code class="docutils literal notranslate"><span class="pre">ServiceMonitor</span></code> resource to scrape metrics, like for other wire
services.</p>
<p>(#2476)</p>
</li>
<li><p>Upgrade webapp version to 2022-06-30-production.0-v0.30.5-0-3e2aaf6 (#2302)</p></li>
<li><p>In the helm charts, the <code class="docutils literal notranslate"><span class="pre">wireService</span></code> label has been removed.</p>
<p>In some cases, we were already setting the <code class="docutils literal notranslate"><span class="pre">app</span></code> label too.</p>
<p>Now we consistently use the <code class="docutils literal notranslate"><span class="pre">app</span></code> label to label different wire services.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">wireService</span></code> label was also used in the <code class="docutils literal notranslate"><span class="pre">spec.selector.matchLabels</span></code> field
on existing <code class="docutils literal notranslate"><span class="pre">Deployment</span></code> / <code class="docutils literal notranslate"><span class="pre">StatefulSet</span></code> resources.
As these fields being immutable, changing them isn’t possible without recreation.</p>
<p>If you encounter an issue like</p>
<blockquote>
<div><p>field is immutable &amp;&amp; cannot patch “*” with kind *</p>
</div></blockquote>
<p>you need to manually delete these StatefulSet and Deployment resources, and apply helm again, which will recreate them.</p>
<p>This means downtime, so plan a maintenance window for it.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">wire-server-metrics</span></code> chart was previously running some custom
configuration to automatically add all payloads with a <code class="docutils literal notranslate"><span class="pre">wireService</span></code> label into
metrics scraping.</p>
<p>With the removal of the <code class="docutils literal notranslate"><span class="pre">wireService</span></code> label, this custom configuration has been
removed.</p>
<p>Instead, all services that expose metrics will now create <code class="docutils literal notranslate"><span class="pre">ServiceMonitor</span></code>
resources, if their helm chart is applied with <code class="docutils literal notranslate"><span class="pre">metrics.serviceMonitor.enabled</span></code>
set to true.</p>
<p>This prevents scraping agents from querying services that don’t expose metrics
at /i/metrics unnecessarily.</p>
<p>Additionally, makes it easier to run other metric scraping operators, like
<code class="docutils literal notranslate"><span class="pre">grafana-agent-operator</span></code>, without the need to also create some custom
<code class="docutils literal notranslate"><span class="pre">wireService</span></code> label config there.</p>
<p>Generally, if you have any monitoring solution installed in your cluster that
uses the Prometheus CRDs, set <code class="docutils literal notranslate"><span class="pre">metrics.serviceMonitor.enable</span></code> for the following charts:</p>
<ul class="simple">
<li><p>brig</p></li>
<li><p>cannon</p></li>
<li><p>cargohold</p></li>
<li><p>galley</p></li>
<li><p>gundeck</p></li>
<li><p>proxy</p></li>
<li><p>spar (#2413)</p></li>
</ul>
</li>
</ul>
</section>
<section id="id63">
<h2>API changes<a class="headerlink" href="#id63" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The request body of <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations</span></code> endpoint can now contain an optional <code class="docutils literal notranslate"><span class="pre">creator_client</span></code> field. The <code class="docutils literal notranslate"><span class="pre">creator_client</span></code> field is only relevant for MLS conversations, in which case it must be set to the ID of the client making the request. (#2486)</p></li>
<li><p>Retire deprecated feature config API endpoints for API version V2 (#2492)</p></li>
</ul>
</section>
<section id="id64">
<h2>Features<a class="headerlink" href="#id64" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Prevent race conditions in concurrent MLS commit requests. (#2525)</p></li>
<li><p>charts/wire-server: Optionally include backoffice (#2490)</p></li>
<li><p>The coturn chart has new functionality to enable graceful pod termination, by
waiting for all active allocations on a coturn instance to drain first. When
combined with a suitable external service discovery mechanism which can steer
client traffic away from terminating coturn pods, this can be used to implement
graceful rolling restarts of clusters of coturn instances. (#2456)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./deploy/services-demo/create_team_members.sh</span></code> creates users with given roles now (#2137)</p></li>
<li><p>MLS implementation progress:</p>
<ul>
<li><p>Remote users can be added to MLS conversations</p></li>
<li><p>MLS messages (both handshake and application) are now propagates to remote
conversation participants. (#2415)</p></li>
</ul>
</li>
<li><p>charts/nginz: Serve swagger-ui for viewing swagger-1.2 docs (#2466)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">teams/:tid</span></code> response now contains an optional field <code class="docutils literal notranslate"><span class="pre">splash_screen</span></code> which contains the asset key of the team’s splash screen. <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">teams/:tid</span></code> now supports updating the splash screen asset key. (#2474)</p></li>
<li><p>Missing feature config mapping added (#2494)</p></li>
<li><p>Add MLS team feature configuration (#2499)</p></li>
<li><p>Team feature API now includes endpoints to get and set the <code class="docutils literal notranslate"><span class="pre">searchVisibilityInbound</span></code> feature (#2503)</p></li>
</ul>
</section>
<section id="id65">
<h2>Bug fixes and other updates<a class="headerlink" href="#id65" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>charts/backoffice: Fix version of frontend and auto-bump version of stern on every release (#2490)</p></li>
<li><p>The service definitions in the coturn Helm chart were missing the control plane
UDP port used by coturn. (#2500)</p></li>
<li><p>In nginx-ingress-services chart, when enabling useCertManager, now correctly creates the required issuer by default. (#2532)</p></li>
<li><p>Fix handling of creator client in MLS conversations (#2486)</p></li>
<li><p>Fix all clients having the same MLS public key (#2501)</p></li>
<li><p>A user now cannot delete an identity provider that they are authenticated with any more (#2519)</p></li>
</ul>
</section>
<section id="id66">
<h2>Internal changes<a class="headerlink" href="#id66" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>brig-types: remove all re-exports (#2505)</p></li>
<li><p>Fixed flakiness of email update test, related to the test user account being suspended, causing subsequent runs of the test to fail. (#2497)</p></li>
<li><p>galley-types: remove all re-exports (#2504)</p></li>
<li><p>Enforce some IdP invariants (#2533)</p></li>
<li><p>Switch to new MLS test CLI (https://github.com/wireapp/mls-test-cli) (#2508)</p></li>
<li><p>Forward /i/users/:uid/features/:feature to brig (#2468)</p></li>
<li><p>charts/nginz: Forward <code class="docutils literal notranslate"><span class="pre">/i/legalhold/whitelisted-teams</span></code> to galley instead of brig (#2460)</p></li>
<li><p>make the ldap-scim-bridge chart deployable once per team, and improve docs. (#1843)</p></li>
<li><p>Refactored and simplified the feature config API (#2435)</p></li>
<li><p>Removed deprecated internal feature config API endpoints (#2496)</p></li>
<li><p>Deactivated gundeck’s integration tests for local steps (<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ci</span></code>). (#2510)</p></li>
<li><p>retry gundeck’s Redis connection in case of network errors such as IP changes or network outages (#2512)</p></li>
<li><p>Add AWS security token metrics to all services (#2473)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-14-0">
<h1>[2022-06-14] (Chart Release 4.14.0)<a class="headerlink" href="#chart-release-4-14-0" title="Permalink to this heading"></a></h1>
<section id="id67">
<h2>Release notes<a class="headerlink" href="#id67" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Upgrade team-settings version to 4.10.0-v0.29.7-0-3be8ca3 (#2180)</p></li>
<li><p>Upgrade webapp version to 2022-06-13-production.0-v0.29.7-0-2819b90 (#2302)</p></li>
</ul>
</section>
<section id="id68">
<h2>Documentation<a class="headerlink" href="#id68" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Docs for guest links server and team feature settings added (#2480)</p></li>
</ul>
</section>
<section id="id69">
<h2>Internal changes<a class="headerlink" href="#id69" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>All feature configs like guest links e.g. can now be overridden in the helm configuration, so that they can be disabled/enabled and configured server wide (#2479)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-13-0">
<h1>[2022-06-08] (Chart Release 4.13.0)<a class="headerlink" href="#chart-release-4-13-0" title="Permalink to this heading"></a></h1>
<section id="id70">
<h2>Release notes<a class="headerlink" href="#id70" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">.cannon.drainTimeout</span></code> setting on the wire-server helm chart has been
removed and replaced with <code class="docutils literal notranslate"><span class="pre">.cannon.config.drainOpts</span></code>. (#2416)</p></li>
<li><p>Note for wire.com operators: deploy nginz (#2439)</p></li>
</ul>
</section>
<section id="id71">
<h2>API changes<a class="headerlink" href="#id71" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The back-office (aka stern) team feature API now accenpts an optional TTL parameter (in days), so features can be activated for a limited period. (#2417)</p></li>
<li><p>Disable rate limiting for /api-version (#2439)</p></li>
</ul>
</section>
<section id="id72">
<h2>Features<a class="headerlink" href="#id72" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Drain websockets in a controlled fashion when cannon receives a SIGTERM or
SIGINT. Instead of waiting for connections to close on their own, the websockets
are now severed at a controlled pace. This allows for quicker rollouts of new
versions. (#2416)</p></li>
<li><p>Optionally allow to run cannon with its own nginz inside the same pod; and connect to a load balancer directly.
This allows the cannon-slow-drain behaviour implemented in #2416 to take effect by not having other intermediate network hops which could break websocket connections all at once.
Some (internal) context: https://wearezeta.atlassian.net/wiki/spaces/PS/pages/585564424/How+to+gracefully+drain+cannon+but+not+so+slowly
For details on how to configure this, see docs/src/how-to/install/configuration-options.rst (#2421)</p></li>
<li><p>Support running brig with GeoIP database when using helm charts (#2406)</p></li>
<li><p>charts/nginz: Add upstream configuration for galeb (#2444)</p></li>
<li><p>charts/nginz: Allow upstreams to be in other namespaces (#2444)</p></li>
<li><p>CSV export in team management now includes the number of devices per user (#2407)</p></li>
</ul>
</section>
<section id="id73">
<h2>Bug fixes and other updates<a class="headerlink" href="#id73" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>charts/nginz: Resolve collision between brig and galeb endpoints. Ensure
/self/consent and /signatures endpoints are configured in all environments (#2457)</p></li>
<li><p>When an IdP issuer (aka entity ID) is updated, the old issuer was still marked as “in use”. (#2400)</p></li>
<li><p>On actions that require re-authentication a password is not required if the user has SAML credentials (#2430, #2434, #2437)</p></li>
<li><p>Use SCIM’s preferred language as a fallback when privisioning users without a locale. (#2445)</p></li>
</ul>
</section>
<section id="id74">
<h2>Documentation<a class="headerlink" href="#id74" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Feature configs should have different swagger schema names (#2425)</p></li>
</ul>
</section>
<section id="id75">
<h2>Internal changes<a class="headerlink" href="#id75" title="Permalink to this heading"></a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">AllFeatureConfigs</span></code> is now typed (#2403)</p></li>
<li><p>Type class for default team feature status (#2404)</p></li>
<li><p>charts/{redis-ephemeral,legalhold}: Use old index for bitnami repo as the new index doesn’t have old versions of postgresql and redis helm charts (#2448)</p></li>
<li><p>Bump haskell/zlib version to 0.6.3.0 (#2431)</p></li>
<li><p>New internal brig endpoints for MLS KeyPackage -&gt; Conversation association query/update (#2375)</p></li>
<li><p>galley: refactor withSettingsOverrides (#2381)</p></li>
<li><p>charts/{nginz,cannon}: Increase map_hash_bucket_size for nginx to 128 (#2443)</p></li>
<li><p>charts/{cannon,nginz}: values listed in
<code class="docutils literal notranslate"><span class="pre">nginx_conf.randomport_allowlisted_origins</span></code> must be full hostnames. Hostnames
listed here will be allowlisted with and without TLS. (#2438)</p></li>
<li><p>Remove binding of users to saml idps using saml (this has never been picked up by clients; use scim instead) (#2441)</p></li>
<li><p>Remove golden test case generator</p>
<p>(#2442)</p>
</li>
<li><p>Convert Team CSV endpoint to Servant (#2419)</p></li>
</ul>
</section>
<section id="id76">
<h2>Federation changes<a class="headerlink" href="#id76" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Send only the raw welcome message in the Galley “mls-welcome” federation endpoint (#2412)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-12-0">
<h1>[2022-05-18] (Chart Release 4.12.0)<a class="headerlink" href="#chart-release-4-12-0" title="Permalink to this heading"></a></h1>
<section id="id77">
<h2>Release notes<a class="headerlink" href="#id77" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>If using <a class="reference external" href="https://github.com/cert-manager/cert-manager">cert-manager</a>, you need to have least version 1.0.0 (1.8.0 works at the time of writing) installed. Older cert-manager 0.15.X will no longer work. (#2401)</p></li>
<li><p>Upgrade team-settings version to 4.9.0-v0.29.7-0-142a76f (#2180)</p></li>
</ul>
</section>
<section id="id78">
<h2>API changes<a class="headerlink" href="#id78" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Start version 2 of the public API. Main changes:</p>
<ul class="simple">
<li><p>Asset endpoints have lost their <code class="docutils literal notranslate"><span class="pre">v3</span></code> and <code class="docutils literal notranslate"><span class="pre">v4</span></code> suffixes. So for example
<code class="docutils literal notranslate"><span class="pre">/assets/v3</span></code> has been replaced by <code class="docutils literal notranslate"><span class="pre">/assets</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/conversations/:conv/assets/:id</span></code> and <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/conversations/:conv/otr/assets/:id</span></code> have been removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/assets/:key/v3</span></code> has been removed. Use the qualified endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/assets/:domain/:key</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/assets/:key/v3</span></code> has been removed. Use the qualified endpoint
<code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/assets/:domain/:key</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/connections</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/list-connections</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/connections</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/connections/:domain/:user</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/connections/:domain/:user</span></code> has been removed: use <code class="docutils literal notranslate"><span class="pre">POST</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/conversations</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations/list-ids</span></code>
followed by <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations/list</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations/list/v2</span></code> has been replaced by <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations/list</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations/:domain/:conv/members/v2</span></code> has lost its <code class="docutils literal notranslate"><span class="pre">v2</span></code> suffix, so
it is now <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations/:domain/:conv/members</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/users</span></code>, <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/users/by-handle</span></code> and <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/users/handles</span></code> have been
removed. Use <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/search/contacts</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/users/:id</span></code> has been removed. Use the qualified endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/users/:domain/:id</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/users/:id/clients</span></code> has been removed. Use the qualified endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/users/:domain/:id/clients</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/users/:id/clients/:client</span></code> has been removed. Use the qualified
endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/users/:domain/:id/clients/:client</span></code> instead.</p></li>
</ul>
<p>Swagger documentation for the previous version of the API can be accessed at
<code class="docutils literal notranslate"><span class="pre">/v1/api/swagger-ui</span></code>. (#2297)</p>
</li>
<li><p>A new field <code class="docutils literal notranslate"><span class="pre">development</span></code> has been added to the object returned by <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/api-version</span></code>. Versions listed there are considered in flux, meaning that the
corresponding API contracts can change arbitrarily over time. Clients are free
to use development versions, as long as they are also listed in <code class="docutils literal notranslate"><span class="pre">supported</span></code>,
and failures due to incompatibilities are acceptable (e.g. in testing
environments). Backends are the authoritative source on whether a development
version can be used at all. If a development version should not be used, the
backend will not list it among the supported versions at all. (#2297)</p></li>
</ul>
</section>
<section id="id79">
<h2>Features<a class="headerlink" href="#id79" title="Permalink to this heading"></a></h2>
<ul>
<li><p>charts: Various new values can now be configured and some got changed</p>
<p>Allow new configurations in the brig chart:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">config.emailSMS.user.invitationUrl</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.emailSMS.team.tInvitationUrl</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.emailSMS.team.tActivationUrl</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.emailSMS.team.tCreatorWelcomeUrl</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.emailSMS.team.tMemberWelcomeUrl</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.setProviderSearchFilter</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.setWhitelist</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.setFeatureFlags</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.setCustomerExtensions</span></code></p></li>
</ul>
<p>If any values in config.emailSMS.team are specified, all must be specified.</p>
<p>Allow new configurations in the gundeck chart:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">config.perNativePushConcurrency</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.maxConcurrentNativePushes.soft</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config.maxConcurrentNativePushes.hard</span></code></p></li>
</ul>
<p>Other changes:</p>
<ul class="simple">
<li><p>Default <code class="docutils literal notranslate"><span class="pre">maxTeamSize</span></code> changed to 10000 from 500. (#2347)</p></li>
</ul>
</li>
<li><p>charts/nginx-ingress-services: Allow more fine-grained control over what services are installed. Upgrade Certificate/Issuer resources to ‘cert-manager.io/v1’ (#2401)</p></li>
<li><p>MLS implementation progress:</p>
<ul class="simple">
<li><p>remote key package claim is now supported (#2353)</p></li>
</ul>
</li>
<li><p>charts/{brig,cargohold,galley,gundeck}: Allow not configuring AWS credentials and allow using a special service account.
This way, when operating wire in AWS cloud either instance profiles or IAM role attached to a service account can be used to communicate with AWS. (#2347)</p></li>
<li><p>Implement TURN service discovery using SRV records (#2389)</p></li>
</ul>
</section>
<section id="id80">
<h2>Bug fixes and other updates<a class="headerlink" href="#id80" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">config.enablePayment</span></code> and <code class="docutils literal notranslate"><span class="pre">FEATURE_ENABLE_PAYMENT</span></code> (<code class="docutils literal notranslate"><span class="pre">envVars</span></code>) were set,
the team-settings feature flag <code class="docutils literal notranslate"><span class="pre">FEATURE_ENABLE_PAYMENT</span></code> was rendered two times.
The new behavior is to give the <code class="docutils literal notranslate"><span class="pre">envVars</span></code> entry priority. I.e. when it’s set,
it’s used instead of the <code class="docutils literal notranslate"><span class="pre">config.enablePayment</span></code> value. (#2332)</p></li>
<li><p>Modify the nginz access control configuration to prevent clients connecting
to listeners with PROXY protocol enabled (such as the websocket listener) from
accessing a private metrics endpoint. (#2307)</p></li>
<li><p>Verification email is sent when external id is updated via SCIM (#2374)</p></li>
</ul>
</section>
<section id="id81">
<h2>Documentation<a class="headerlink" href="#id81" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Move old /docs to /docs/legacy (leaving references). (#2328)</p></li>
<li><p>Fixup for #2321 (#2323)</p></li>
<li><p>Add pagination docs to <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/list-connections</span></code> (#2369)</p></li>
<li><p>Documentation for the 2nd factor password challenge feature (#2329)</p></li>
<li><p>Documentation on how to enforce desktop application only for web app (#2334)</p></li>
<li><p>Documentation on how to enforce constant bit rate for all calls (#2336)</p></li>
<li><p>Documentation on how to disable media plugins for the web app (#2337)</p></li>
<li><p>Documentation on how to extra entropy in the web app (#2338)</p></li>
<li><p>Documentation on how to set the instance connection parameters and proxy settings (#2340)</p></li>
<li><p>Merged SAML/SCIM docs with its main documentation (#2356)</p></li>
</ul>
</section>
<section id="id82">
<h2>Internal changes<a class="headerlink" href="#id82" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>View and change team feature permissions apply to all features now (#2402)</p></li>
<li><p>Add sed to direnv (#2319)</p></li>
<li><p>Add python3 to nix development environment. It’s needed by hack/bin/serve-charts.sh . (#2333)</p></li>
<li><p>Add a target to the Makefile to run ShellCheck. I.e. to run a linter on shell scripts. This will be used in the CI. For now, all scripts with linter issues are excluded from this check. (#2361)</p></li>
<li><p>Drop snappy support from bonanza (#2350)</p></li>
<li><p>Use cabal in buildah-based builds (#2341)</p></li>
<li><p>Fix flakyness of path traversal test (#2387)</p></li>
<li><p>Github Actions: disable mac builds (#2355)</p></li>
<li><p>Apply <code class="docutils literal notranslate"><span class="pre">versionMiddleware</span></code> last. This makes sure that every other middleware sees
the rewritten (unversioned) path. In particular, the prometheus middleware will
now only see paths it knows about, which prevents it from reporting “N/A” as the
path. (#2316)</p></li>
<li><p>Upgrade version of libzauth dependencies, notably sodiumoxide bindings to libsodium, and fix resulting errors and warnings. (#2327)</p></li>
<li><p>libzauth: Update sha256 for source in nix expression (#2354)</p></li>
<li><p>Log IO exceptions in Galley and Brig (#2385)</p></li>
<li><p>Generalise and move the Logger effect (#2306)</p></li>
<li><p>Fix a comment in a Makefile target (#2330)</p></li>
<li><p>Fix flaky MLS conversation creation test (#2386)</p></li>
<li><p>Fix flaky key package test (#2384)</p></li>
<li><p>Fix locale variables in Nix and .envrc (#2393)</p></li>
<li><p>Team Member API has been migrated to Servant (#2309)</p></li>
<li><p>Integration test for edge case: change external id before account registration (#2396)</p></li>
<li><p>Allow specifying ‘redisAdditionalWrite’ for a secondary redis to which gundeck will write in the context of a redis migration without downtime. (#2304)</p></li>
<li><p>Start TURN discovery only when the app starts and not when the Env is created (#2376)</p></li>
<li><p>Avoid using IN queries for fetching multiple conversations (#2397)</p></li>
<li><p>Remove oromolu GH action (has been moved to concourse https://github.com/zinfra/cailleach/pull/1033) (#2320)</p></li>
<li><p>Remove unused data type AllowedUserSearch (#2373)</p></li>
<li><p>docs: add latex to docs and publish pdf if exists (#2321)</p></li>
</ul>
</section>
<section id="id83">
<h2>Federation changes<a class="headerlink" href="#id83" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>We now fetch version information from other backends and negotiate a version to use. (#2297)</p></li>
<li><p>Fix assertion in testWelcomeNoKey (#2372)</p></li>
<li><p>Support remote welcome messages (#2368)</p></li>
<li><p>Implement remote admin action: Update receipt mode (#2141)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-11-0">
<h1>[2022-05-04] (Chart Release 4.11.0)<a class="headerlink" href="#chart-release-4-11-0" title="Permalink to this heading"></a></h1>
<section id="id84">
<h2>Release notes<a class="headerlink" href="#id84" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Upgrade webapp version to 2022-05-04-production.0-v0.29.7-0-a6f2ded (#2302)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-10-0">
<h1>[2022-04-25] (Chart Release 4.10.0)<a class="headerlink" href="#chart-release-4-10-0" title="Permalink to this heading"></a></h1>
<section id="id85">
<h2>Release notes<a class="headerlink" href="#id85" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Note for wire.com operators: deploy nginz (#2270)</p></li>
<li><p>Wire cloud operators: <a class="reference external" href="https://github.com/wireapp/wire-server/blob/master/docs/reference/elastic-search.md">Update brig’s ES index mapping before deploying. After deploying, run a re-index</a> (#2213, #2220)</p></li>
<li><p>Upgrade webapp version to <a class="reference external" href="https://github.com/wireapp/wire-webapp/releases/tag/2022-04-21-production.0">2022-04-21-production.0</a> (#2302)</p></li>
<li><p>Upgrade team-settings version to <a class="reference external" href="https://github.com/wireapp/wire-team-settings/releases/tag/v4.7.0">4.7.0-v0.29.7-0-74b81b8</a> (#2180)</p></li>
</ul>
</section>
<section id="id86">
<h2>Features<a class="headerlink" href="#id86" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[helm-charts] Allow filtering cassandra nodes by datacenter (#2273)</p></li>
<li><p>MLS implementation progress:</p>
<ul>
<li><p>commit messages containing add proposals are now processed (#2247)</p></li>
<li><p>do initial validation and forwarding of all types of messages via POST /mls/messages (#2253)</p></li>
<li><p>fixed bug where users could not be added to MLS conversations if they had non-MLS clients (#2290)</p></li>
<li><p>MLS/Proteus mismatches (e.g. sending a proteus message to an MLS conversation) are now handled (#2278)</p></li>
<li><p>the <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/mls/key-packages/claim</span></code> endpoint gained a <code class="docutils literal notranslate"><span class="pre">skip_own</span></code> query parameter, which can be used to avoid claiming a key package for the requesting client itself (#2287)</p></li>
</ul>
</li>
<li><p>The user profiles that are returned by a team admin search now contain the additional fields SAML NameID, IdP Issuer, and SCIM externalId (#2213), and  unvalidated email address (#2220)</p></li>
<li><ul>
<li><p>Avoid dropping messages when redis is down. (#2295)</p></li>
</ul>
</li>
</ul>
</section>
<section id="id87">
<h2>Bug fixes and other updates<a class="headerlink" href="#id87" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add missing helm chart mapping for inbound search visibility (#2265)</p></li>
<li><p>Fix bug: User search endpoint hides exact handle results in SearchVisibilityNoNameOutsideTeam setting (#2280)</p></li>
<li><p>backoffice app (aka stern):</p>
<ul>
<li><p>Suspending a non-existing user now returns 404 and does not create an empty entry in the DB (#2267)</p></li>
<li><p>Support for deleting teams with more than one member (#2275)</p></li>
<li><p>Fix update of user email (#2281)</p></li>
</ul>
</li>
</ul>
</section>
<section id="id88">
<h2>Documentation<a class="headerlink" href="#id88" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Import wire-docs to docs/ (see also #2258)</p></li>
</ul>
</section>
<section id="id89">
<h2>Internal changes<a class="headerlink" href="#id89" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Migrate API routes from wai-route to servant for better Swagger (#2284, #2277, #2266, #2286, #2294, #2244</p></li>
<li><p>Update nginx to latest stable: v1.20.2 (#2289)</p></li>
<li><p>Allow additional origins at random ports in nginz Helm chart. This is useful for
testing with an HTTP proxy. It should not be used in production. (#2283)</p></li>
<li><p>makdeb and bonanza: remove stack-based Makefiles (#2311)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">skip_reauth</span></code> param to internal API for creating clients. This is intended to be used in test. (#2260)</p></li>
<li><p>Removes an unused function in Brig and relocates another one (#2305)</p></li>
<li><p>Print more logs while migrating data in Elasticsearch (#2279)</p></li>
<li><p>Replace the base monad in Brig with the Polysemy Sem monad (#2264, #2288)</p></li>
<li><p>Move the Random effect from Spar to the polysemy-wire-zoo library (#2303)</p></li>
<li><p>Move the Now effect from Spar to a library (#2292)</p></li>
<li><p>Improve readability of user search test cases (#2276)</p></li>
<li><p>Chart/gundeck’s ‘bulkpush’ optimization is now activated by default (after using it in production for some time) (#2293)</p></li>
<li><p>Add an alpha version of a Helm chart for coturn. (#2209)</p></li>
<li><p>Document error handling and simplify error logging (#2274)</p></li>
<li><p>Improve speed of reindexing by increasing the batch size of processing users. (#2200)</p></li>
<li><p>Fix federator integration tests (#2298)</p></li>
<li><p>Switch the Haskell driver used in Gundeck to connect to Redis from ‘redis-io’ to ‘<a class="reference external" href="https://hackage.haskell.org/package/hedis">hedis</a>’, which now supports cluster mode. (#2151)</p></li>
<li><p>Various Galley MLS test improvements and cleanups (#2278)</p></li>
<li><p>Flag for sending a validation email when updating a user’s email address via backoffice/stern (#2301)</p></li>
<li><p>Remove stack from all builder docker images (#2312)</p></li>
<li><p>Make internal search-visibility endpoint available to staging environments (#2282)</p></li>
<li><p>Remove TemplateHaskell as a global default extension (#2291)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-9-0">
<h1>[2022-04-04] (Chart Release 4.9.0)<a class="headerlink" href="#chart-release-4-9-0" title="Permalink to this heading"></a></h1>
<section id="id90">
<h2>Release notes<a class="headerlink" href="#id90" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Note for wire.com operators: deploy nginz (#2175)</p></li>
<li><p>Deploy galley before brig (#2248)</p></li>
<li><p>Wire cloud operators: <a class="reference external" href="https://github.com/wireapp/wire-server/blob/master/docs/reference/elastic-search.md">Update brig’s ES index mapping before deploying. After deploying run a reindex</a>. (#2241)</p></li>
<li><p>Upgrade webapp version to 2022-03-30-production.0-v0.29.2-0-d144552 (#2246)</p></li>
</ul>
</section>
<section id="id91">
<h2>API changes<a class="headerlink" href="#id91" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>New endpoint to get the status of the guest links feature for a conversation that potentially has been created by someone from another team. (#2231)</p></li>
</ul>
</section>
<section id="id92">
<h2>Features<a class="headerlink" href="#id92" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Cross-team user search (#2208)</p></li>
<li><p>restund chart: add dtls support (#2227)</p></li>
<li><p>MLS implementation progress:</p>
<ul>
<li><p>welcome messages are now being propagated (#2175)</p></li>
</ul>
</li>
<li><p>The bot API will be blocked if the 2nd factor authentication team feature is enabled. Please refer to <a class="reference external" href="https://github.com/wireapp/wire-server/blob/develop/docs/reference/config-options.md#2nd-factor-password-challenge">/docs/reference/config-options.md#2nd-factor-password-challenge</a>. (#2207)</p></li>
<li><p>Translations for 2nd factor authentication email templates (#2235)</p></li>
<li><p>Script for creating a team with owner via the public API (#2218)</p></li>
</ul>
</section>
<section id="id93">
<h2>Bug fixes and other updates<a class="headerlink" href="#id93" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Conversation rename endpoints now return 204 instead of 404 when the conversation name is unchanged (#2239)</p></li>
<li><p>Revert temporary sftd bump (#2230)</p></li>
</ul>
</section>
<section id="id94">
<h2>Internal changes<a class="headerlink" href="#id94" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove the MonadMask instance for AppT in Brig (#2259)</p></li>
<li><p>Remove the MonadUnliftIO instance for the app monad in Brig (#2233)</p></li>
<li><p>Bump hsaml2 version (#2221)</p></li>
<li><p>Fix: cabal-install-artefacts.sh fails if not run from root of wire-server (#2236)</p></li>
<li><p>Fix: pushing to cachix not working (#2257)</p></li>
<li><p>Cannon has been fully migrated to Servant (#2243)</p></li>
<li><p>Refactor conversation record and conversation creation functions. This removes a lot of duplication and makes the types of protocol-specific data in a conversation tighter. (#2234)</p>
<ul>
<li><p>Move conversation name size check to <code class="docutils literal notranslate"><span class="pre">NewConv</span></code></p></li>
<li><p>Make the <code class="docutils literal notranslate"><span class="pre">NewConversation</span></code> record (used as input to the data
function creating a conversation) contain a <code class="docutils literal notranslate"><span class="pre">ConversationMetadata</span></code>.</p></li>
<li><p>Implement all “special” conversation creation in terms of a general <code class="docutils literal notranslate"><span class="pre">createConversation</span></code></p></li>
<li><p>Move protocol field from metadata to Conversation</p></li>
<li><p>Restructure MLS fields in Conversation record</p></li>
<li><p>Factor out metadata fields from Data.Conversation</p></li>
</ul>
</li>
<li><p>Fix Docs: real-world domain used in examples (#2238)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">CanThrow</span></code> combinator can now be used to set the corresponding error effects in polysemy handlers. (#2239)</p></li>
<li><p>Most error effects in Galley are now defined at the granularity of single error values. For example, a handler throwing <code class="docutils literal notranslate"><span class="pre">ConvNotFound</span></code> will now directly declare <code class="docutils literal notranslate"><span class="pre">ConvNotFound</span></code> (as a promoted constructor) among its error effects, instead of the generic <code class="docutils literal notranslate"><span class="pre">ConversationError</span></code> that was used before. Correspondingly, all such fine-grained Galley errors have been moved to wire-api as constructors of a single enumerated type <code class="docutils literal notranslate"><span class="pre">GalleyError</span></code>, and similarly for Brig, Cannon and Cargohold. (#2239)</p></li>
<li><p>Add a column for MLS clients to the Galley member table (#2245)</p></li>
<li><p>Pin direnv version in nix-hls.sh script (#2232)</p></li>
<li><p>nginx-ingress-services chart: allow for custom challenge solvers (#2222, #2229)</p></li>
<li><p>Remove unused debian Makefile targets (#2237)</p></li>
<li><p>Use local serial consistency for Cassandra lightweight transactions (#2251)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-8-0">
<h1>[2022-03-30] (Chart Release 4.8.0)<a class="headerlink" href="#chart-release-4-8-0" title="Permalink to this heading"></a></h1>
<section id="id95">
<h2>Release notes<a class="headerlink" href="#id95" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Upgrade webapp version to 2022-03-30-production.0-v0.29.2-0-d144552 (#2246)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-7-0">
<h1>[2022-03-18] (Chart Release 4.7.0)<a class="headerlink" href="#chart-release-4-7-0" title="Permalink to this heading"></a></h1>
<section id="id96">
<h2>Release notes<a class="headerlink" href="#id96" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Deploy Brig before Spar. (#2149)</p></li>
<li><p>If you are in a federated network of backends (currently beta), you need to update all participating instances at the same time. (#2173)</p></li>
</ul>
</section>
<section id="id97">
<h2>API changes<a class="headerlink" href="#id97" title="Permalink to this heading"></a></h2>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">client</span></code> JSON object now has an additional field <code class="docutils literal notranslate"><span class="pre">mls_public_keys</span></code>, containing an object mapping signature schemes to public keys, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="o">...</span>
  <span class="s2">&quot;mls_public_keys&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;ed25519&quot;</span><span class="p">:</span> <span class="s2">&quot;GY+t1EQu0Zsm0r/zrm6zz9UpjPcAPyT5i8L1iaY3ypM=&quot;</span> <span class="p">}</span>
  <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>At the moment, <code class="docutils literal notranslate"><span class="pre">ed25519</span></code> is the only supported signature scheme, corresponding to MLS ciphersuite 1.</p>
<p>When creating a new client with <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/clients</span></code>, the field <code class="docutils literal notranslate"><span class="pre">mls_public_keys</span></code> can be set, and the corresponding public keys are bound to the device identity on the backend, and will be used to verify uploaded key packages with a matching signature scheme.</p>
<p>When updating a client with <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/clients/:client</span></code>, the field <code class="docutils literal notranslate"><span class="pre">mls_public_keys</span></code> can also be set, with a similar effect. If a given signature scheme already has a public key set for that device, the request will fail. (#2147)</p>
</li>
<li><p>Introduce an endpoint for creating an MLS conversation (#2150)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">/billing</span></code> and <code class="docutils literal notranslate"><span class="pre">/teams/.*/billing</span></code> endpoints are now available on a versioned path (e.g. <code class="docutils literal notranslate"><span class="pre">/v1/billing</span></code>) (#2167)</p></li>
</ul>
</section>
<section id="id98">
<h2>Features<a class="headerlink" href="#id98" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>MLS implementation progress:</p>
<ul>
<li><p>key package refs are now mapped after being claimed (#2192)</p></li>
</ul>
</li>
<li><p>2nd factor authentication via 6 digit code, sent by email:</p>
<ul>
<li><p>for login, sent by email. The feature is disabled per default and can be enabled server or team wide. (#2142)</p></li>
<li><p>for “create SCIM token”. The feature is disabled per default and can be enabled server or team wide. (#2149)</p></li>
<li><p>for “add new client” via 6 digit code, sent by email. This only happens inside the login flow (in particular, when logging in from a new device).  The code obtained for logging in is used a second time for adding the device. (#2186)</p></li>
<li><p>2nd factor authentication for “delete team” via 6 digit code, sent by email. (#2193)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">SndFactorPasswordChallenge</span></code> team feature is locked by default. (#2205)</p></li>
<li><p>Details: <a class="reference external" href="https://github.com/wireapp/wire-server/blob/develop/docs/reference/config-options.md#2nd-factor-password-challenge">/docs/reference/config-options.md#2nd-factor-password-challenge</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="id99">
<h2>Bug fixes and other updates<a class="headerlink" href="#id99" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix data consistency issue in import of users from TM invitation to SCIM-managed (#2201)</p></li>
<li><p>Use the same context string as openmls for key package ref calculation (#2216)</p></li>
<li><p>Ensure that only conversation admins can create invite links.  (Until now we have relied on clients to enforce this.) (#2211)</p></li>
</ul>
</section>
<section id="id100">
<h2>Internal changes<a class="headerlink" href="#id100" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>account-pages Helm chart: Add a “digest” image option (#2194)</p></li>
<li><p>Add more test mappings (#2185)</p></li>
<li><p>Internal endpoint for re-authentication (<code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">&quot;/i/users/:uid/reauthenticate&quot;</span></code>) in brig has changed in a backwards compatible way. Spar depends on this change for creating a SCIM token with 2nd password challenge. (#2149)</p></li>
<li><p>Asset keys are now internally validated. (#2162)</p></li>
<li><p>Spar debugging; better internal combinators (#2214)</p></li>
<li><p>Remove the MonadClient instance of the Brig monad</p>
<ul>
<li><p>Lots of functions were generalized to run in a monad constrained by
MonadClient instead of running directly in Brig’s <code class="docutils literal notranslate"><span class="pre">AppIO</span> <span class="pre">r</span></code> monad. (#2187)</p></li>
</ul>
</li>
</ul>
</section>
<section id="id101">
<h2>Federation changes<a class="headerlink" href="#id101" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Refactor conversation actions to an existential type consisting of a singleton tag (identifying the action) and a dedicated type for the action itself. Previously, actions were represented by a big sum type. The new approach enables us to describe the needed effects of an action much more precisely. The existential type is initialized by the Servant endpoints in a way to mimic the previous behavior. However, the messages between services changed. Thus, all federated backends need to run the same (new) version. The deployment order itself does not matter. (#2173)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-6-0">
<h1>[2022-03-09] (Chart Release 4.6.0)<a class="headerlink" href="#chart-release-4-6-0" title="Permalink to this heading"></a></h1>
<section id="id102">
<h2>Release notes<a class="headerlink" href="#id102" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Upgrade team-settings version to 4.6.2-v0.29.7-0-4f43ee4 (#2180)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-5-0">
<h1>[2022-03-07] (Chart Release 4.5.0)<a class="headerlink" href="#chart-release-4-5-0" title="Permalink to this heading"></a></h1>
<section id="id103">
<h2>Release notes<a class="headerlink" href="#id103" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>For wire.com operators: make sure that nginz is deployed (#2166)</p></li>
</ul>
</section>
<section id="id104">
<h2>API changes<a class="headerlink" href="#id104" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add qualified broadcast endpoint (#2166)</p></li>
</ul>
</section>
<section id="id105">
<h2>Bug fixes and other updates<a class="headerlink" href="#id105" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Always create spar credentials during SCIM provisioning when applicable (#2174)</p></li>
</ul>
</section>
<section id="id106">
<h2>Internal changes<a class="headerlink" href="#id106" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add tests for additional information returned by <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/api-version</span></code> (#2159)</p></li>
<li><p>Clean up <code class="docutils literal notranslate"><span class="pre">Base64ByteString</span></code> implementation (#2170)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Event</span></code> record type does not contain a <code class="docutils literal notranslate"><span class="pre">type</span></code> field anymore (#2160)</p></li>
<li><p>Add MLS message types and corresponding deserialisers (#2145)</p></li>
<li><p>Servantify <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/register</span></code> and <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/i/users</span></code> endpoints (#2121)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-4-0">
<h1>[2022-03-01] (Chart Release 4.4.0)<a class="headerlink" href="#chart-release-4-4-0" title="Permalink to this heading"></a></h1>
<section id="id107">
<h2>Release notes<a class="headerlink" href="#id107" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Upgrade webapp version to 2022-02-22-production.0-v0.29.2-0-abb34f5 (#2148)</p></li>
</ul>
</section>
<section id="id108">
<h2>API changes<a class="headerlink" href="#id108" title="Permalink to this heading"></a></h2>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">api-version</span></code> endpoint now returns additional information about the backend:</p>
<ul class="simple">
<li><p>whether federation is supported (field <code class="docutils literal notranslate"><span class="pre">federation</span></code>);</p></li>
<li><p>the federation domain (field <code class="docutils literal notranslate"><span class="pre">domain</span></code>).</p></li>
</ul>
<p>Note that the federation domain is always set, even if federation is disabled. (#2146)</p>
</li>
<li><p>Add MLS key package API (#2102)</p></li>
</ul>
</section>
<section id="id109">
<h2>Internal changes<a class="headerlink" href="#id109" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Bump aeson to v2.0.3.0 and update amazonka fork from upstream repository.  (#2153, #2157, #2163)</p></li>
<li><p>Add schema-profunctor instances for <code class="docutils literal notranslate"><span class="pre">QueuedNotification</span></code> and <code class="docutils literal notranslate"><span class="pre">QueuedNotificationList</span></code> (#2161)</p></li>
<li><p>Dockerfile.builder: Add cabal update (#2168)</p></li>
</ul>
</section>
<section id="id110">
<h2>Federation changes<a class="headerlink" href="#id110" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Make restrictions on federated user search configurable by domain: <code class="docutils literal notranslate"><span class="pre">NoSearch</span></code>, <code class="docutils literal notranslate"><span class="pre">ExactHandleSearch</span></code> and <code class="docutils literal notranslate"><span class="pre">FullSearch</span></code>.
Details about the configuration are described in <a class="reference internal" href="#docs/reference/config-options.md"><span class="xref myst">config-options.md</span></a>.
There are sane defaults (<em>deny to find any users as long as there is no other configuration for the domain</em>), so no measures have to be taken by on-premise customers (unless the default is not the desired behavior). (#2087)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-2-0">
<h1>[2022-02-21] (Chart Release 4.2.0)<a class="headerlink" href="#chart-release-4-2-0" title="Permalink to this heading"></a></h1>
<section id="id111">
<h2>Release notes<a class="headerlink" href="#id111" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Upgrade team-settings version to 4.6.1-v0.29.3-0-28cbbd7 (#2106)</p></li>
<li><p>Upgrade webapp version to 2022-02-08-production.0-v0.29.2-0-4d437bb (#2107)</p></li>
<li><p>Change the default set of TLS ciphers (both for the client and the federation APIs) to be compliant to the recommendations of <a class="reference external" href="https://www.bsi.bund.de/SharedDocs/Downloads/EN/BSI/Publications/TechGuidelines/TG02102/BSI-TR-02102-2.html">TR-02102-2</a>. (#2112)</p></li>
<li><p>For wire.com operators: make sure that nginz is deployed. (#2116, #2124)</p></li>
<li><p>Optional team feature config <code class="docutils literal notranslate"><span class="pre">validateSAMLEmails</span></code> added to galley.yaml.
The feature was disabled by default before this release and is now enabled by default. The server wide default can be changed in galley.yaml. Please refer to <a class="reference external" href="https://github.com/wireapp/wire-server/blob/develop/docs/reference/config-options.md#validate-saml-emails">/docs/reference/config-options.md#validate-saml-emails</a> (#2117)</p></li>
</ul>
</section>
<section id="id112">
<h2>API changes<a class="headerlink" href="#id112" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Added minimal API version support: a list of supported API versions can be found at the endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/api-version</span></code>. Versions can be selected by adding a prefix of the form <code class="docutils literal notranslate"><span class="pre">/vN</span></code> to every route, where <code class="docutils literal notranslate"><span class="pre">N</span></code> is the desired version number (so for example <code class="docutils literal notranslate"><span class="pre">/v1/conversations</span></code> to access version 1 of the <code class="docutils literal notranslate"><span class="pre">/conversations</span></code> endpoint). (#2116)</p></li>
<li><p>Delete <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/self/name</span></code> endpoint (#2101)</p></li>
<li><p>New endpoint (<code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/verification-code/send</span></code>) for generating and sending a verification code for 2nd factor authentication actions. (#2124)</p></li>
</ul>
</section>
<section id="id113">
<h2>Features<a class="headerlink" href="#id113" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add freetext search results to “search-users” federation endpoint (#2085)</p></li>
</ul>
</section>
<section id="id114">
<h2>Bug fixes and other updates<a class="headerlink" href="#id114" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Ensure empty responses show up without a schema in swagger. They were shown as empty arrays before. (#2104)</p></li>
<li><p>Require the guest links feature is enabled when someone joins by code. (#2084)</p></li>
<li><p>Escape disallowed characters at the beginning of CSV cells to prevent CSV injection vulnerability. (#2096)</p></li>
<li><p>The field <code class="docutils literal notranslate"><span class="pre">icon</span></code> in the body of the <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/team/:tid</span></code> endpoint is now typed to prevent potential injection attacks. (#2103)</p></li>
</ul>
</section>
<section id="id115">
<h2>Internal changes<a class="headerlink" href="#id115" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Enforce conversation access roles more tightly on the backend (was previously only enforce on client): if a guests or non-team-members are not allowed, block guest link creation (new behavior) as well as ephemeral users joining (old behavior). (#2076)</p></li>
<li><p>Remove uses of servant-generics from brig (#2100, #2086)</p></li>
<li><p>Migrate more API end-points to servant. (#2016, #2081, #2091)</p></li>
<li><p>Introduce the row type variable in Brig monads (#2140)</p></li>
<li><p>Build ubuntu20 docker images with cabal instead of stack (#2119, #2060)</p></li>
<li><p>Drop managed conversations (#2125)</p></li>
<li><p>To investigate issues related to push notifications, adjust Gundeck <code class="docutils literal notranslate"><span class="pre">Debug</span></code> leveled logs to not print the message itself. So, that it can safely be turned on in production environments. Add a log entry when a bulk notification is pushed to Cannon. (#2053)</p></li>
<li><p>Add integration tests for scim/saml user creation (#2123)</p></li>
<li><p>Wrap stack with NIX_BUILD_SHELL set to LD_LIBRARY_PATH compatible shell (#2105)</p></li>
<li><p>Removed redundant <code class="docutils literal notranslate"><span class="pre">setDefaultTemplateLocale</span></code> config from the brig helm template. (#2099)</p></li>
<li><p>[not done yet, please do not enable] Optional team feature config <code class="docutils literal notranslate"><span class="pre">sndFactorPasswordChallenge</span></code> added to galley.yaml.
The feature is disabled by default. The server wide default can be changed in galley.yaml. Please refer to <a class="reference external" href="https://github.com/wireapp/wire-server/blob/develop/docs/reference/config-options.md#2nd-factor-password-challenge">/docs/reference/config-options.md#2nd-factor-password-challenge</a> (#2138)</p></li>
<li><p>Prometheus: Ignore RawResponses (e.g. cannon’s await responses) from metrics (#2108)</p></li>
<li><p>Refactor internal handlers for Proteus conversation creation (#2125)</p></li>
<li><p>Specify (in a test) how a message to a deleted legalhold device is refused to be sent. (#2131)</p></li>
</ul>
</section>
<section id="id116">
<h2>Federation changes<a class="headerlink" href="#id116" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">setSftListAllServers</span></code> config flag to brig (#2139)</p></li>
<li><p>Revert restund to 0.4.17. (#2114)</p></li>
</ul>
</section>
</section>
<section id="chart-release-4-0-0">
<h1>[2022-02-02] (Chart Release 4.0.0)<a class="headerlink" href="#chart-release-4-0-0" title="Permalink to this heading"></a></h1>
<section id="id117">
<h2>Release notes<a class="headerlink" href="#id117" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Upgrade webapp version to 2022-01-27-production.0-v0.28.29-0-42c9a1e (#2078)</p></li>
</ul>
</section>
<section id="id118">
<h2>Features<a class="headerlink" href="#id118" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Allow brig’s additionalWriteIndex to be on a different ElasticSearch cluster.
This allows migrating to a new ElasticSearch cluster. (#2063)</p></li>
<li><p>The file sharing team feature now has a server wide configurable lock status. For more information please refer to <a class="reference external" href="https://github.com/wireapp/wire-server/blob/develop/docs/reference/config-options.md#file-sharing">/docs/reference/config-options.md#file-sharing</a>. (#2059)</p></li>
</ul>
</section>
<section id="id119">
<h2>Internal changes<a class="headerlink" href="#id119" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove non-existing functions from module export lists (#2095)</p></li>
<li><p>Rename Spar.Sem.IdP to Spar.Sem.IdPConfigStore (#2067)</p></li>
<li><p>Endpoints based on <code class="docutils literal notranslate"><span class="pre">MultiVerb</span></code> can now be made to return content types not listed in the <code class="docutils literal notranslate"><span class="pre">Accept</span></code> header (#2074)</p></li>
<li><p>The lock status of the file sharing team feature can be updated via the internal API (<code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/i/teams/:tid/features/fileSharing/(un)?locked</span></code>). (#2059)</p></li>
<li><p>Servantify Galley Teams API (<code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/teams/:tid</span></code> and <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/teams/:tid</span></code>). (#2092)</p></li>
<li><p>Add explicit export lists to all Spar.Sem modules (#2070)</p></li>
<li><p>Separate some Spar.Sem utility functions into their own module (#2069)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-125-0">
<h1>[2022-01-28] (Chart Release 2.125.0)<a class="headerlink" href="#chart-release-2-125-0" title="Permalink to this heading"></a></h1>
<section id="id120">
<h2>Release notes<a class="headerlink" href="#id120" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Bump the webapp version. (#2082)</p></li>
</ul>
</section>
<section id="id121">
<h2>Internal changes<a class="headerlink" href="#id121" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Additional integration testing for conversation access control. (#2057)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-124-0">
<h1>[2022-01-27] (Chart Release 2.124.0)<a class="headerlink" href="#chart-release-2-124-0" title="Permalink to this heading"></a></h1>
<section id="id122">
<h2>Release notes<a class="headerlink" href="#id122" title="Permalink to this heading"></a></h2>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">nginz</span></code> chart now configures nginx to only allow cross-origin requests from an explicit allow list of subdomains. By default these are:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">nginz</span><span class="p">:</span>
<span class="w">  </span><span class="nt">nginx_conf</span><span class="p">:</span>
<span class="w">    </span><span class="nt">allowlisted_origins</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webapp</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">teams</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">account</span>
</pre></div>
</div>
<p>If you changed the names of these services, you must adjust those names in the nginz config as well. (#1630, #2073, 116988c62732)</p>
</li>
<li><p>Backend now separates conversation access control for guests and services. The old access roles are still supported but it is encouraged to upgrade clients since mapping between the old access roles and the new access roles is not isomorphic. For more details refer to the API changes below or the Swagger docs.
Old clients are fully supported; if new clients and old clients are mixed, to old clients, either guests of services may appear to be enable if they are not, which may lead to error messages (confusing but harmless). (#2035)</p></li>
</ul>
</section>
<section id="id123">
<h2>API changes<a class="headerlink" href="#id123" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Endpoints that recently have accepted <code class="docutils literal notranslate"><span class="pre">access_role</span></code> in their payload will now accept <code class="docutils literal notranslate"><span class="pre">access_role_v2</span></code> as well which will take precedence over <code class="docutils literal notranslate"><span class="pre">access_role</span></code>. See Swagger docs for how values are mapped. Endpoints that recently have returned <code class="docutils literal notranslate"><span class="pre">access_role</span></code> in their payload will now additionally return the <code class="docutils literal notranslate"><span class="pre">access_role_v2</span></code> field. (#2035)</p></li>
</ul>
</section>
<section id="id124">
<h2>Features<a class="headerlink" href="#id124" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Conversation access roles now distinguish between guests and services. (#2035)</p></li>
</ul>
</section>
<section id="id125">
<h2>Bug fixes and other updates<a class="headerlink" href="#id125" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>There is now an explicit CORS allow list for <em>all</em> endpoints. In previous releases, all subdomains were accepted, however they must now be listed explicitly. This is a <strong>breaking change</strong>, as now only known Javascript applications may access the backend. (#1630, #2073, 116988c62732)</p></li>
<li><p>Prevent 500s when SFTs are not reachable from Backend (#2077)</p></li>
</ul>
</section>
<section id="id126">
<h2>Internal changes<a class="headerlink" href="#id126" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Bump hsaml2 package version (#2075)</p></li>
<li><p>Separate Spar.Data module into smaller Cassandra interpreters (#2064)</p></li>
<li><p>Fix some HLint issues in libs/wire-api. (#2065)</p></li>
<li><p>Fix broken build process of package “old-time” for some environments (#2056)</p></li>
<li><p>Refresh license headers (#2062)</p></li>
<li><p>Rename Spar.Sem.ScimTokenStore.GetByTeam to LookupByTeam (#2068)</p></li>
</ul>
</section>
<section id="id127">
<h2>Federation changes<a class="headerlink" href="#id127" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Tag several federation tests cases for the M2 release (#2045)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-122-0">
<h1>[2022-01-18] (Chart Release 2.122.0)<a class="headerlink" href="#chart-release-2-122-0" title="Permalink to this heading"></a></h1>
<section id="id128">
<h2>Release notes<a class="headerlink" href="#id128" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>This release introduces a mandatory <code class="docutils literal notranslate"><span class="pre">federationDomain</span></code> configuration setting to cargohold. Please update your <code class="docutils literal notranslate"><span class="pre">values/wire-server/values.yaml</span></code> to set <code class="docutils literal notranslate"><span class="pre">cargohold.settings.federationDomain</span></code> to the same value as the corresponding option in galley (and brig). (#1990)</p></li>
<li><p>The brig server config option <code class="docutils literal notranslate"><span class="pre">setDefaultLocale</span></code> has been replaced by <code class="docutils literal notranslate"><span class="pre">setDefaultUserLocale</span></code> and <code class="docutils literal notranslate"><span class="pre">setDefaultTemplateLocale</span></code> (see docs/reference/config-options.md for details) (#2028)</p></li>
<li><p>From this release onwards, the images for haskell components (brig, galley,
cargohold, etc.) will be using Ubuntu 20.04 as the base. The images are about
30-35 MB larger than the previous alpine based images. (#1852)</p></li>
<li><p>Wire cloud operators: Make sure <a class="reference external" href="https://github.com/wireapp/ansible-sft/pull/35">#35</a> is applied to all SFT servers before deploying. (#2030)</p></li>
</ul>
</section>
<section id="id129">
<h2>API changes<a class="headerlink" href="#id129" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The deprecated endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/teams</span></code> now ignores query parameters <code class="docutils literal notranslate"><span class="pre">ids</span></code>, <code class="docutils literal notranslate"><span class="pre">start</span></code> (#2027)</p></li>
<li><p>Add qualified v4 endpoints for downloading and deleting assets. The upload API is still on the same path, but the asset object it returns now contains a <code class="docutils literal notranslate"><span class="pre">domain</span></code> field. (#2002)</p></li>
<li><p>Remove resumable upload API (#1998)</p></li>
</ul>
</section>
<section id="id130">
<h2>Features<a class="headerlink" href="#id130" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Allow configuring setDefaultLocale in brig using helm chart (#2025)</p></li>
<li><p>If the guest links team feature is disabled guest links will be revoked. (#1976)</p></li>
<li><p>Revoke guest links if feature is disabled. If the guest links team feature is disabled <code class="docutils literal notranslate"><span class="pre">get</span> <span class="pre">/conversations/join</span></code>, <code class="docutils literal notranslate"><span class="pre">post</span> <span class="pre">/conversations/:cnv/code</span></code>, and <code class="docutils literal notranslate"><span class="pre">get</span> <span class="pre">/conversations/:cnv/code</span></code> will return an error. (#1980)</p></li>
<li><p>Specialize <code class="docutils literal notranslate"><span class="pre">setDefaultLocale</span></code> to distinguish between default user locale and default template locale if the user’s locale is n/a. (#2028)</p></li>
</ul>
</section>
<section id="id131">
<h2>Bug fixes and other updates<a class="headerlink" href="#id131" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix an issue with remote asset streaming (#2037, #2038)</p></li>
</ul>
</section>
<section id="id132">
<h2>Documentation<a class="headerlink" href="#id132" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Annotate a first batch of integration and unit tests to map them to externally-facing documentation (#1869)</p></li>
<li><p>Add the description to several test cases (#1991)</p></li>
<li><p>Improve documentation for stern tool and helm chart (#2032)</p></li>
</ul>
</section>
<section id="id133">
<h2>Internal changes<a class="headerlink" href="#id133" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Replace servant-generic in Galley with a custom <code class="docutils literal notranslate"><span class="pre">Named</span></code> combinator (#2022)</p></li>
<li><p>The Swagger documentation module is not regenerated anymore if its content is unchanged (#2018)</p></li>
<li><p>cabal-run-integration.sh - remove Makefile indirection (#2044)</p></li>
<li><p>Fix test runner for global cabal make target (#1987)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">cabal-install-artefacts.sh</span></code> script now creates the <code class="docutils literal notranslate"><span class="pre">dist</span></code> directory if it does not exist (#2007)</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">purge:</span> <span class="pre">false</span></code> in fake-s3 chart (#1981)</p></li>
<li><p>Add missing backendTwo.carghold in integration.yaml (#2039)</p></li>
<li><p>Use GHC 8.10.7 and stack 2.7.3 for builds (#1852)</p></li>
<li><p>Fix non-controversial HLint issues in federator to improve code quality (#2011)</p></li>
<li><p>Added laws for DefaultSsoCode, Now, IdP and ScimExternalIdStore (#1940)</p></li>
<li><p>Moved specifications for Spar effects out of the test suite and into the library (#2005)</p></li>
<li><p>Tag integration tests for security audit. (#2000)</p></li>
<li><p>Upgrade nixpkgs pin used to provision developement dependencies (#1852)</p></li>
<li><p>Servantify Galley Teams API. (#2008, #2010, #2027)</p></li>
<li><p>When sending an activation code, the blocked domains are checked before the whitelist. This only affects the wire SaaS staging environment (there is no whitelist configuration in prod, and blocked domains are not applicable to on-prem installations). (#2023)</p></li>
<li><p>Add a helm chart that deploys <a class="reference external" href="https://docs.wire.com/understand/restund.html">restund</a> (#2003)</p></li>
<li><p>Publish restund helm chart (#2036)</p></li>
<li><p>Improve optional field API in schema-profunctor (#1988)</p></li>
<li><p>Migrate the public API of Cannon to Servant. (There is an internal API that is not yet migrated.) (#2024)</p></li>
<li><p>sftd chart: Add multiSFT option, remove additionalArgs option (#1992)</p></li>
<li><p>sftd chart: Fix quoted args for multiSFT option (#1999)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rangedSchema</span></code> does not need to be passed singletons explicitly anymore (#2017)</p></li>
<li><p>Split cannon benchmarks and tests (#1986)</p></li>
<li><p>Tag integration tests for certification. (#1985)</p></li>
<li><p>Tag integration tests for certification. (#2001)</p></li>
<li><p>New internal endpoint to configure the guest links team feature. (#1993)</p></li>
</ul>
</section>
<section id="id134">
<h2>Federation changes<a class="headerlink" href="#id134" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Make federator capable of streaming responses (#1966)</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">Named</span></code> routes for the federation API (#2033)</p></li>
<li><p>Fix Brig’s configmap for SFT lookups (#2015)</p></li>
<li><p>SFTD chart: provide a /sft_servers_all.json url that can be used by brig to populate /calls/config/v2 (#2019)</p></li>
<li><p>Allow making HTTP-only requests to SFTs via an IPv4 address (#2026)</p></li>
<li><p>Replace IPv4-HTTP-only Approach to SFT Server Lookup with /sft_servers_all.json (#2030)</p></li>
<li><p>Extend GET /calls/config/v2 to include all SFT servers in federation (#2012)</p></li>
<li><p>Improve Brig’s configuration for SFTs and fix a call to SFT servers (#2014)</p></li>
<li><p>Enable downloading assets from a remote (federated) cargohold instance via the v4 API. The content of remote assets is returned as stream with content type <code class="docutils literal notranslate"><span class="pre">application/octet-stream</span></code>. Please refer to the Swagger API documentation for more details. (#2004)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-121-0">
<h1>[2021-12-10] (Chart Release 2.121.0)<a class="headerlink" href="#chart-release-2-121-0" title="Permalink to this heading"></a></h1>
<section id="id135">
<h2>Release notes<a class="headerlink" href="#id135" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>If you have <code class="docutils literal notranslate"><span class="pre">selfDeletingMessages</span></code> configured in <code class="docutils literal notranslate"><span class="pre">galley.yaml</span></code>, add <code class="docutils literal notranslate"><span class="pre">lockStatus:</span> <span class="pre">unlocked</span></code>. (#1963)</p></li>
<li><p>Upgrade SFTD to 2.1.19. (#1983)</p></li>
</ul>
</section>
<section id="id136">
<h2>API changes<a class="headerlink" href="#id136" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>A new endpoint is added to Brig (<code class="docutils literal notranslate"><span class="pre">put</span> <span class="pre">/users/:uid/email</span></code>) that allows a team owner to initiate changing/setting a user email by (re-)sending an activation email. (#1948)</p></li>
<li><p>get team feature config for self deleting messages response includes lock status (#1963)</p></li>
<li><p>A new public Galley endpoint was added to dis-/enable the conversation guest link feature. The feature can only be configured through the public API if the lock status is unlocked in the server config. (#1964)</p></li>
<li><p>new internal endpoints for setting the lock status of self deleting messages (#1963)</p></li>
</ul>
</section>
<section id="id137">
<h2>Features<a class="headerlink" href="#id137" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Team and server wide config for conversation guest link feature to configure feature status and lock status (#1964). If the feature is not configured on the server, the defaults will be:</p>
<div class="highlight-txt notranslate"><div class="highlight"><pre><span></span>  featureFlags:
    ...
    conversationGuestLinks:
      defaults:
        status: enabled
        lockStatus: unlocked
</pre></div>
</div>
</li>
<li><p>Lock status for the self deleting messages feature can be set internally by ibis and customer support (#1963)</p></li>
</ul>
</section>
<section id="id138">
<h2>Bug fixes and other updates<a class="headerlink" href="#id138" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Correctly detect log level when rendering logs as structured JSON (#1959)</p></li>
</ul>
</section>
<section id="id139">
<h2>Documentation<a class="headerlink" href="#id139" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix typo in swagger. (#1982)</p></li>
<li><p>Proposal for API versioning system. (#1958)</p></li>
<li><p>Update federation error documentation after changes to the federation API (#1956, #1975, #1978)</p></li>
</ul>
</section>
<section id="id140">
<h2>Internal changes<a class="headerlink" href="#id140" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Suspend/unsuspend teams in backoffice/stern. (#1977)</p></li>
<li><p>Set request ID correctly in galley logs (#1967)</p></li>
<li><p>Improve cabal make targets: faster installation and better support for building and testing all packages (#1979)</p></li>
<li><p>sftd chart: add config key <code class="docutils literal notranslate"><span class="pre">additionalArgs</span></code> (#1972)</p></li>
</ul>
</section>
<section id="id141">
<h2>Federation changes<a class="headerlink" href="#id141" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add cargohold as a new federated component (#1973)</p></li>
</ul>
</section>
</section>
<section id="id142">
<h1>[2021-12-02]<a class="headerlink" href="#id142" title="Permalink to this heading"></a></h1>
<section id="id143">
<h2>Release notes<a class="headerlink" href="#id143" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Breaking change to the <code class="docutils literal notranslate"><span class="pre">fake-aws-s3</span></code> (part of <code class="docutils literal notranslate"><span class="pre">fake-aws</span></code>) helm chart. We now use minio helm chart from https://charts.min.io. The options are documented <a class="reference external" href="https://github.com/minio/minio/tree/master/helm/minio">here</a> (#1944)</p>
<p>Before running the upgrade, the operators must use <code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">edit</span> <span class="pre">deployment</span> <span class="pre">fake-aws-s3</span></code> and explicitly set <code class="docutils literal notranslate"><span class="pre">spec.template.spec.containers[0].serviceAccount</span></code> and <code class="docutils literal notranslate"><span class="pre">spec.template.spec.containers[0].serviceAccountName</span></code> to null. (#1944)</p>
</li>
<li><p>Upgrade team-settings version to 4.3.0-v0.28.28-a2f11cf (#1856)</p></li>
<li><p>Upgrade webapp version to 2021-12-02-production.0-v0.28.29-0-ec2fa00 (#1954)</p></li>
</ul>
</section>
<section id="id144">
<h2>Features<a class="headerlink" href="#id144" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>By default install elasticsearch version 6.8.18 when using the elasticsearch-ephemeral chart (#1952)</p></li>
<li><p>Use fluent-bit chart from fluent.github.io instead of deprecated charts.helm.sh. Previous fluent-bit values are not compatible with the new chart, the documentation for the new chart can be found <a class="reference external" href="https://github.com/fluent/helm-charts/tree/main/charts/fluent-bit">here</a> (#1952)</p></li>
<li><p>Use kibana chart from helm.elastic.co instead of deprecated charts.helm.sh. Previous kibana values are not compatible with the new chart, the documentation for the new chart can be found <a class="reference external" href="https://github.com/elastic/helm-charts/tree/main/kibana">here</a>. This also upgrades kibana to version 6.8.18. (#1952)</p></li>
<li><p>Use kube-prometheus-stack instead of prometheus-operator and update grafana dashboards for compatibility and add federation endpoints to relevant queries. (#1915)</p></li>
<li><p>Add log format called ‘StructuredJSON’ for easier log aggregation (#1951)</p></li>
</ul>
</section>
<section id="id145">
<h2>Bug fixes and other updates<a class="headerlink" href="#id145" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>elasticsearch-ephemeral: Disable automatic creation of indices (#1949)</p></li>
</ul>
</section>
<section id="id146">
<h2>Documentation<a class="headerlink" href="#id146" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Document the wire-server PR process better. (#1934)</p></li>
<li><p>Remove documentation of unsupported scim end-point use case. (#1941)</p></li>
<li><p>Document servant setup and combinators (#1933)</p></li>
</ul>
</section>
<section id="id147">
<h2>Internal changes<a class="headerlink" href="#id147" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add in-memory interpreters for most Spar effects (#1920)</p></li>
<li><p>Use minio helm chart in fake-aws-s3 from charts.min.io instead of helm.min.io, the latter seems to be down (#1944)</p></li>
<li><p>Upgrade to polysemy-1.7.0.0
(#1932)</p></li>
<li><p>Replace Galley monad with polysemy’s Sem throughout Galley (#1917)</p></li>
<li><p>Separate VerdictFormatStore effect from AReqIdStore effect (#1925)</p></li>
</ul>
</section>
<section id="id148">
<h2>Federation changes<a class="headerlink" href="#id148" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The server-to-server API now uses HTTP2 directly instead of gRPC (#1930)</p></li>
<li><p>Errors when leaving a conversation are now correctly handled instead of resulting in a generic federation error. (#1928)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-118-0">
<h1>[2021-11-15] (Chart Release 2.118.0)<a class="headerlink" href="#chart-release-2-118-0" title="Permalink to this heading"></a></h1>
<section id="id149">
<h2>Release notes<a class="headerlink" href="#id149" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>In case you use a multi-datacentre cassandra setup (most likely you do not), be aware that now <a class="reference external" href="https://docs.datastax.com/en/cassandra-oss/3.0/cassandra/dml/dmlConfigConsistency.html">LOCAL_QUORUM</a> is in use as a default. (#1884)</p></li>
<li><p>Deploy galley before brig. (#1857)</p></li>
<li><p>Upgrade webapp version to 2021-11-01-production.0-v0.28.29-0-d919633 (#1856)</p></li>
</ul>
</section>
<section id="id150">
<h2>API changes<a class="headerlink" href="#id150" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove locale from publicly facing user profiles (but not from the self profile) (#1888)</p></li>
</ul>
</section>
<section id="id151">
<h2>Features<a class="headerlink" href="#id151" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>End-points for configuring self-deleting messages. (#1857)</p></li>
</ul>
</section>
<section id="id152">
<h2>Bug fixes and other updates<a class="headerlink" href="#id152" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Ensure that all endpoints have a correct handler in prometheus metrics (#1919)</p></li>
<li><p>Push events when AppLock or SelfDeletingMessages config change. (#1901)</p></li>
</ul>
</section>
<section id="id153">
<h2>Documentation<a class="headerlink" href="#id153" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Federation: Document how to deploy local builds (#1880)</p></li>
</ul>
</section>
<section id="id154">
<h2>Internal changes<a class="headerlink" href="#id154" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add a ‘filterNodesByDatacentre’ config option useful during cassandra DC migration (#1886)</p></li>
<li><p>Add ormolu to the direnv, add a GH Action to ensure formatting (#1908)</p></li>
<li><p>Turn placeholder access effects into actual Polysemy effects. (#1904)</p></li>
<li><p>Fix a bug in the IdP.Mem interpreter, and added law tests for IdP (#1863)</p></li>
<li><p>Introduce fine-grained error types and polysemy error effects in Galley. (#1907)</p></li>
<li><p>Add polysemy store effects and split off Cassandra specific functionality from the Galley.Data module hierarchy (#1890, #1906)</p></li>
<li><p>Make golden-tests in wire-api package a separate test suite (for faster feedback loop during development). (#1926)</p></li>
<li><p>Separate IdPRawMetadataStore effect from IdP effect (#1924)</p></li>
<li><p>Test sending message to multiple remote domains (#1899)</p></li>
<li><p>Use cabal to build wire-server (opt-in) (#1853)</p></li>
</ul>
</section>
<section id="id155">
<h2>Federation changes<a class="headerlink" href="#id155" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Close GRPC client after making a request to a federator. (#1865)</p></li>
<li><p>Do not fail user deletion when a remote notification fails (#1912)</p></li>
<li><p>Add a one-to-one conversation test in getting conversations in the federation API (#1899)</p></li>
<li><p>Notify remote participants when a user leaves a conversation because they were deleted (#1891)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-117-0">
<h1>[2021-10-29] (Chart Release 2.117.0)<a class="headerlink" href="#chart-release-2-117-0" title="Permalink to this heading"></a></h1>
<section id="id156">
<h2>Release notes<a class="headerlink" href="#id156" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Upgrade SFT to 2.1.15 (#1849)</p></li>
<li><p>Upgrade team settings to Release: <a class="reference external" href="https://github.com/wireapp/wire-team-settings/releases/tag/v4.3.0">v4.3.0</a> and image tag: 4.3.0-v0.28.28-a2f11cf (#1950)</p></li>
<li><p>Upgrade Webapp to image tag: 20021-10-28-federation-m1 (#1856)</p></li>
</ul>
</section>
<section id="id157">
<h2>API changes<a class="headerlink" href="#id157" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/list-conversations</span></code> endpoint. (#1840)</p></li>
<li><p>The member.self ID in conversation endpoints is qualified and available as
“qualified_id”. The old unqualified “id” is still available. (#1866)</p></li>
</ul>
</section>
<section id="id158">
<h2>Features<a class="headerlink" href="#id158" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Allow configuring nginz so it serve the deeplink for apps to discover the backend (#1889)</p></li>
<li><p>SFT: allow using TURN discovery using ‘turnDiscoveryEnabled’ (#1519)</p></li>
</ul>
</section>
<section id="id159">
<h2>Bug fixes and other updates<a class="headerlink" href="#id159" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix an issue related to installing the SFT helm chart as a sub chart to the wire-server chart. (#1677)</p></li>
<li><p>SAML columns (Issuer, NameID) in CSV files with team members. (#1828)</p></li>
</ul>
</section>
<section id="id160">
<h2>Internal changes<a class="headerlink" href="#id160" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add a ‘make flake-PATTERN’ target to run a subset of tests multiple times to trigger a failure case in flaky tests (#1875)</p></li>
<li><p>Avoid a flaky test to fail related to phone updates and improve failure output. (#1874)</p></li>
<li><p>Brig: Delete deprecated <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/i/users/connections-status</span></code> endpoint. (#1842)</p></li>
<li><p>Replace shell.nix with direnv + nixpkgs.buildEnv based setup (#1876)</p></li>
<li><p>Make connection DB functions work with Qualified IDs (#1819)</p></li>
<li><p>Fix more Swagger validation errors. (#1841)</p></li>
<li><p>Turn <code class="docutils literal notranslate"><span class="pre">Galley</span></code> into a polysemy monad stack. (#1881)</p></li>
<li><p>Internal CI tooling improvement: decrease integration setup time by using helmfile. (#1805)</p></li>
<li><p>Depend on hs-certificate master instead of our fork (#1822)</p></li>
<li><p>Add internal endpoint to insert or update a 1-1 conversation. This is to be used by brig when updating the status of a connection. (#1825)</p></li>
<li><p>Update helm to 3.6.3 in developer tooling (nix-shell) (#1862)</p></li>
<li><p>Improve the <code class="docutils literal notranslate"><span class="pre">Qualified</span></code> abstraction and make local/remote tagging safer (#1839)</p></li>
<li><p>Add some new Spar effects, completely isolating us from saml2-web-sso interface (#1827)</p></li>
<li><p>Convert legacy POST conversations/:cnv/members endpoint to Servant (#1838)</p></li>
<li><p>Simplify mock federator interface by removing unnecessary arguments. (#1870)</p></li>
<li><p>Replace the <code class="docutils literal notranslate"><span class="pre">Spar</span></code> newtype, instead using <code class="docutils literal notranslate"><span class="pre">Sem</span></code> directly. (#1833)</p></li>
</ul>
</section>
<section id="id161">
<h2>Federation changes<a class="headerlink" href="#id161" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove remote guests as well as local ones when “Guests and services” is disabled in a group conversation, and propagate removal to remote members. (#1854)</p></li>
<li><p>Check connections when adding remote users to a local conversation and local users to remote conversations. (#1842)</p></li>
<li><p>Check connections when creating group and team conversations with remote members. (#1870)</p></li>
<li><p>Server certificates without the “serverAuth” extended usage flag are now rejected when connecting to a remote federator. (#1855)</p></li>
<li><p>Close GRPC client after making a request to a remote federator. (#1865)</p></li>
<li><p>Support deleting conversations with federated users (#1861)</p></li>
<li><p>Ensure that the conversation creator is included only once in notifications sent to remote users (#1879)</p></li>
<li><p>Allow connecting to remote users. One to one conversations are not created yet. (#1824)</p></li>
<li><p>Make federator’s default log level Info (#1882)</p></li>
<li><p>The creator of a conversation now appears as a member when the conversation is fetched from a remote backend (#1842)</p></li>
<li><p>Include remote connections in the response to <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/list-connections</span></code> (#1826)</p></li>
<li><p>When a user gets deleted, notify remotes about conversations and connections in chunks of 1000 (#1872, #1883)</p></li>
<li><p>Make federated requests to multiple backends in parallel. (#1860)</p></li>
<li><p>Make conversation ID of <code class="docutils literal notranslate"><span class="pre">RemoteConversation</span></code> unqualified and move it out of the metadata record. (#1839)</p></li>
<li><p>Make the conversation creator field in the <code class="docutils literal notranslate"><span class="pre">on-conversation-created</span></code> RPC unqualified. (#1858)</p></li>
<li><p>Update One2One conversation when connection status changes (#1850)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-116-0">
<h1>[2021-10-01] (Chart Release 2.116.0)<a class="headerlink" href="#chart-release-2-116-0" title="Permalink to this heading"></a></h1>
<section id="id162">
<h2>Release notes<a class="headerlink" href="#id162" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Deploy brig before galley (#1811, #1818)</p></li>
<li><p>The conference call initiation feature can now be configured for personal accounts in <code class="docutils literal notranslate"><span class="pre">brig.yaml</span></code>.  <code class="docutils literal notranslate"><span class="pre">enabled</span></code> is the default and the previous behavior.  If you want to change that, read <a class="reference external" href="https://github.com/wireapp/wire-server/blob/develop/docs/reference/config-options.md#conference-calling-1">/docs/reference/config-options.md#conference-calling-1</a> (#1811, #1818)</p></li>
<li><p>Only if you are an early adopter of multi-team IdP issuers on release <a class="reference external" href="https://github.com/wireapp/wire-server/releases/tag/v2021-09-14">2021-09-14</a>: note that the <a class="reference external" href="https://github.com/wireapp/wire-server/pull/1763/files#diff-bd66bf2f3a2445e08650535a431fc33cc1f6a9e0763c7afd9c9d3f2d67fac196">query parameter for IdP creation has changed</a>.  This only affects future calls to this one end-point. (#1763)</p></li>
<li><p>For wire.com cloud operators: reminder to also deploy nginz. (No special action needed for on-premise operators) (#1773)</p></li>
</ul>
</section>
<section id="id163">
<h2>API changes<a class="headerlink" href="#id163" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add endpoint <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/connections/:domain/:userId</span></code> to create a connection (#1773)</p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/conversations/:cnv/access</span></code> endpoint (#1807)</p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/conversations/:cnv/message-timer</span></code> endpoint (#1780)</p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/conversations/:cnv/members/:usr</span></code> endpoint (#1784)</p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/conversations/:cnv/receipt-mode</span></code> endpoint (#1797)</p></li>
<li><p>Add endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/connections/:domain/:userId</span></code> to get a single connection (#1773)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/list-connections</span></code> endpoint to get connections (#1773)</p></li>
<li><p>Add qualified endpoint for updating conversation access (#1807)</p></li>
<li><p>Add qualified endpoint for updating message timer (#1780)</p></li>
<li><p>Add qualified endpoint for updating conversation members (#1784)</p></li>
<li><p>Add qualified endpoint for updating receipt mode (#1797)</p></li>
<li><p>Add endpoint <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/connections/:domain/:userId</span></code> to update a connection (#1773)</p></li>
</ul>
</section>
<section id="id164">
<h2>Features<a class="headerlink" href="#id164" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Helm charts to deploy <a class="reference external" href="https://github.com/wireapp/ldap-scim-bridge">ldap-scim-bridge</a> (#1709)</p></li>
<li><p>Per-account configuration of conference call initiation (details: /docs/reference/config-options.md#conference-calling-1) (#1811, #1818)</p></li>
</ul>
</section>
<section id="id165">
<h2>Bug fixes and other updates<a class="headerlink" href="#id165" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>An attempt to create a 3rd IdP with the same issuer was triggering an exception. (#1763)</p></li>
<li><p>When a user was auto-provisioned into two teams under the same pair of <code class="docutils literal notranslate"><span class="pre">Issuer</span></code> and <code class="docutils literal notranslate"><span class="pre">NameID</span></code>, they where directed into the wrong team, and not rejected. (#1763)</p></li>
</ul>
</section>
<section id="id166">
<h2>Documentation<a class="headerlink" href="#id166" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Expand documentation of <code class="docutils literal notranslate"><span class="pre">conversations/list-ids</span></code> endpoint (#1779)</p></li>
<li><p>Add documentation of the multi-table paging abstraction (#1803)</p></li>
<li><p>Document how to use IdP issuers for multiple teams (#1763)</p></li>
<li><p>All named Swagger schemas are now displayed in the Swagger UI (#1802)</p></li>
</ul>
</section>
<section id="id167">
<h2>Internal changes<a class="headerlink" href="#id167" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Abstract out multi-table-pagination used in list conversation-ids endpoint (#1788)</p></li>
<li><p>Testing: rewrite monadic to applicative style generators (#1782)</p></li>
<li><p>Add a test checking that creating conversations of exactly the size limit is allowed (#1820)</p></li>
<li><p>Rewrite the DELETE /self endpoint to Servant (#1771)</p></li>
<li><p>Fix conversation generator in mapping test (#1778)</p></li>
<li><p>Polysemize spar (#1806, #1787, #1793, #1814, #1792, #1781, #1786, #1810, #1816, #1815)</p></li>
<li><p>Refactored a few functions dealing with conversation updates, in an attempt to
make the conversation update code paths more uniform, and also reduce special
cases for local and remote objects. (#1801)</p></li>
<li><p>Merged http2-client fixes as mentioned in the comments of #1703 (#1809)</p></li>
<li><p>Some executables now have a runtime dependency on ncurses (#1791)</p></li>
<li><p>Minor changes around SAML and multi-team Issuers.</p>
<ul>
<li><p>Change query param to not contain <code class="docutils literal notranslate"><span class="pre">-</span></code>, but <code class="docutils literal notranslate"><span class="pre">_</span></code>.  (This is considered an internal change because the feature has been release in the last release, but only been documented in this one.)</p></li>
<li><p>Haddocks.</p></li>
<li><p>Simplify code.</p></li>
<li><p>Remove unnecessary calls to cassandra. (#1763)</p></li>
</ul>
</li>
<li><p>Clean up JSON Golden Tests (Part 6) (#1769)</p></li>
<li><p>Remove explicit instantiations of ErrorDescription (#1794)</p></li>
<li><p>Remove one flaky integration test about ordering of search results (#1798)</p></li>
<li><p>Report all failures in JSON golden tests in a group at once (#1746)</p></li>
<li><p>Convert the <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/conversations/:cnv/access</span></code> endpoint to Servant (#1807)</p></li>
<li><p>Move /connections/* endpoints to Servant (#1770)</p></li>
<li><p>Servantify Galley’s DELETE /i/user endpoint (#1772)</p></li>
<li><p>Convert the <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/conversations/:cnv/message-timer</span></code> endpoint to Servant (#1780)</p></li>
<li><p>Convert the <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/conversations/:cnv/members/:usr</span></code> endpoint to Servant (#1796)</p></li>
<li><p>Convert the <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/conversations/:cnv/receipt-mode</span></code> endpoint to Servant (#1797)</p></li>
<li><p>Expose wire.com internal EJDP process to backoffice/stern. (#1831)</p></li>
<li><p>Update configurable boolean team feature list in backoffice/stern. (#1829)</p></li>
<li><p>Handle upper/lower case more consistently in scim and rich-info data. (#1754)</p></li>
</ul>
</section>
<section id="id168">
<h2>Federation changes<a class="headerlink" href="#id168" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add value for verification depth of client certificates in federator ingress (#1812)</p></li>
<li><p>Document federation API conventions and align already existing APIs (#1765)</p></li>
<li><p>Notify remote users when a conversation access settings are updated (#1808)</p></li>
<li><p>Notify remote users when a conversation member role is updated (#1785)</p></li>
<li><p>Notify remote users when a conversation message timer is updated (#1783)</p></li>
<li><p>Notify remote users when a conversation is renamed (#1767)</p></li>
<li><p>Make sure that only users that are actually part of a conversation get notified about updates in the conversation metadata (#1767)</p></li>
<li><p>Notify remote users when a conversation receipt mode is updated (#1801)</p></li>
<li><p>Implement updates to remote members (#1785)</p></li>
<li><p>Make conversation ID of the on-conversation-created RPC unqualified (#1766)</p></li>
<li><p>4 endpoints for create/update/get/list connections designed for remote users in mind. So far, the implementation only works for local users (actual implementation will come as a follow-up) (#1773)</p></li>
<li><p>The returned <code class="docutils literal notranslate"><span class="pre">connection</span></code> object now has a <code class="docutils literal notranslate"><span class="pre">qualified_to</span></code> field with the domain of the (potentially remote) user. (#1773)</p></li>
<li><p>Add migration for remote connection table (#1789)</p></li>
<li><p>Remove a user from remote conversations upon deleting their account (#1790)</p></li>
<li><p>Remove elasticsearch specific details from the search endpoint (#1768)</p></li>
<li><p>Added support for updating self member status of remote conversations (#1753)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-115-0">
<h1>[2021-09-14] (Chart Release 2.115.0)<a class="headerlink" href="#chart-release-2-115-0" title="Permalink to this heading"></a></h1>
<section id="id169">
<h2>API changes<a class="headerlink" href="#id169" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove the long-deprecated <code class="docutils literal notranslate"><span class="pre">message</span></code> field in <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/connections</span></code> (#1726)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/conversations/:domain/:cnv/name</span></code> (#1737)</p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/conversations/:cnv/name</span></code> (#1737)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">&amp;</span> <span class="pre">PUT</span> <span class="pre">/conversations/:domain/:cnv/self</span></code> (#1740)</p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">&amp;</span> <span class="pre">PUT</span> <span class="pre">/conversations/:cnv/self</span></code> (#1740)</p></li>
<li><p>Remove endpoint <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/conversations/:domain/:cnv/self</span></code> (#1752)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">otr_muted</span></code> field in <code class="docutils literal notranslate"><span class="pre">Member</span></code> and <code class="docutils literal notranslate"><span class="pre">MemberUpdate</span></code> has been removed. (#1751)</p></li>
<li><p>Removed the ability to update one’s own role (#1752)</p></li>
</ul>
</section>
<section id="id170">
<h2>Features<a class="headerlink" href="#id170" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Disallow changing phone number to a black listed phone number (#1758)</p></li>
<li><p>Support using a single IDP with a single EntityID (aka issuer ID) to set up two teams. Sets up a migration, and makes teamID + EntityID unique, rather than relying on EntityID to be unique. Required to support multiple teams in environments where the IDP software cannot present anything but one EntityID (E.G.: DualShield). (#1755)</p></li>
</ul>
</section>
<section id="id171">
<h2>Documentation<a class="headerlink" href="#id171" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Added documentation of federation errors (#1674)</p></li>
<li><p>Better swagger schema for the Range type (#1748)</p></li>
<li><p>Add better example for Domain in swagger (#1748)</p></li>
</ul>
</section>
<section id="id172">
<h2>Internal changes<a class="headerlink" href="#id172" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Introduce new process for writing changelogs (#1749)</p></li>
<li><p>Clean up JSON golden tests (Part 4, Part 5) (#1756, #1762)</p></li>
<li><p>Increased timeout on certificate update tests to 10s (#1750)</p></li>
<li><p>Fix for flaky test in spar (#1760)</p></li>
<li><p>Rewrite the <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/connections</span></code> endpoint to Servant (#1726)</p></li>
<li><p>Various improvements and fixes around SAML/SCIM (#1735)</p></li>
</ul>
</section>
<section id="id173">
<h2>Federation changes<a class="headerlink" href="#id173" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Avoid remote calls to get conversation when it is not found locally (#1749)</p></li>
<li><p>Federator CA store and client credentials are now automatically reloaded (#1730)</p></li>
<li><p>Ensure clients only receive messages meant for them in remote convs (#1739)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-114-0">
<h1>[2021-09-08] (Chart Release 2.114.0)<a class="headerlink" href="#chart-release-2-114-0" title="Permalink to this heading"></a></h1>
<section id="id174">
<h2>Release Notes<a class="headerlink" href="#id174" title="Permalink to this heading"></a></h2>
</section>
<section id="id175">
<h2>API Changes<a class="headerlink" href="#id175" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations/list/v2</span></code> (#1703)</p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/list-conversations</span></code> (#1703)</p></li>
</ul>
</section>
<section id="id176">
<h2>Features<a class="headerlink" href="#id176" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Bump SFTD to 2.0.127 (#1745)</p></li>
</ul>
</section>
<section id="id177">
<h2>Bug fixes and other updates<a class="headerlink" href="#id177" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove support for managed conversations in member removal (#1718)</p></li>
<li><p>Update the webapp to correct labeling on CBR calling (#1743)</p></li>
</ul>
</section>
<section id="id178">
<h2>Documentation<a class="headerlink" href="#id178" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Document backend internals for user connections (#1717)</p></li>
<li><p>Open Update spar braindump and explain idp deletion (#1728)</p></li>
</ul>
</section>
<section id="id179">
<h2>Internal changes<a class="headerlink" href="#id179" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Integration test script now displays output interactively (#1700)</p></li>
<li><p>Fixed a few issues with error response documentation in Swagger (#1707)</p></li>
<li><p>Make mapping between (team) permissions and roles more lenient (#1711)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/conversations/:cnv/members/:usr</span></code> endpoint rewritten to Servant (#1697)</p></li>
<li><p>Remove leftover auto-connect internal endpoint and code (#1716)</p></li>
<li><p>Clean up JSON golden tests (#1729, #1732, #1733)</p></li>
<li><p>Make regenerated golden tests’ JSON output deterministic (#1734)</p></li>
<li><p>Import fix for snappy linker issue (#1736)</p></li>
</ul>
</section>
<section id="id180">
<h2>Federation changes<a class="headerlink" href="#id180" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Added client certificate support for server to server authentication (#1682)</p></li>
<li><p>Implemented full server-to-server authentication (#1687)</p></li>
<li><p>Add an endpoint for removing a qualified user from a local conversation (#1697)</p></li>
<li><p>Refactored remote error handling in federator (#1681)</p></li>
<li><p>The update conversation membership federation endpoint takes OriginDomainHeader (#1719)</p></li>
<li><p>Added new endpoint to allow fetching conversation metadata by qualified ids (#1703)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-113-0">
<h1>[2021-08-27] (Chart Release 2.113.0)<a class="headerlink" href="#chart-release-2-113-0" title="Permalink to this heading"></a></h1>
<section id="id181">
<h2>Release Notes<a class="headerlink" href="#id181" title="Permalink to this heading"></a></h2>
</section>
<section id="id182">
<h2>API Changes<a class="headerlink" href="#id182" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/conversations/:cnv/members/:usr</span></code> (#1697)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/conversations/:cnv/members/:domain/:usr</span></code> (#1697)</p></li>
</ul>
</section>
<section id="id183">
<h2>Features<a class="headerlink" href="#id183" title="Permalink to this heading"></a></h2>
</section>
<section id="id184">
<h2>Bug fixes and other updates<a class="headerlink" href="#id184" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix case sensitivity in schema parser in hscim library (#1714)</p></li>
<li><p>[helm charts] resolve a rate-limiting issue when using certificate-manager alongside wire-server and nginx-ingress-services helm charts (#1715)</p></li>
</ul>
</section>
<section id="id185">
<h2>Documentation<a class="headerlink" href="#id185" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Improve Swagger for <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/conversations/:cnv/members/:usr</span></code> (#1697)</p></li>
</ul>
</section>
<section id="id186">
<h2>Internal changes<a class="headerlink" href="#id186" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Integration test script now displays output interactively (#1700)</p></li>
<li><p>Fixed a few issues with error response documentation in Swagger (#1707)</p></li>
<li><p>Make mapping between (team) permissions and roles more lenient (#1711)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/conversations/:cnv/members/:usr</span></code> endpoint rewritten to Servant (#1697)</p></li>
<li><p>Remove leftover auto-connect internal endpoint and code (#1716)</p></li>
<li><p>Bump wire-webapp (#1720)</p></li>
<li><p>Bump team-settings (#1721)</p></li>
<li><p>Bump account-pages (#1666)</p></li>
</ul>
</section>
<section id="id187">
<h2>Federation changes<a class="headerlink" href="#id187" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Added client certificate support for server to server authentication (#1682)</p></li>
<li><p>Implemented full server-to-server authentication (#1687)</p></li>
<li><p>Add an endpoint for removing a qualified user from a local conversation (#1697)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-112-0">
<h1>[2021-08-16] (Chart Release 2.112.0)<a class="headerlink" href="#chart-release-2-112-0" title="Permalink to this heading"></a></h1>
<section id="id188">
<h2>Release Notes<a class="headerlink" href="#id188" title="Permalink to this heading"></a></h2>
<p>This is a routine release requiring only the routine upgrade steps.</p>
</section>
<section id="id189">
<h2>API Changes<a class="headerlink" href="#id189" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations/list-ids</span></code> (#1686)</p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/converstations/ids</span></code> (#1686)</p></li>
</ul>
</section>
<section id="id190">
<h2>Features<a class="headerlink" href="#id190" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Client functions for the hscim library (#1694, #1699, #1702, https://hackage.haskell.org/package/hscim)</p></li>
</ul>
</section>
<section id="id191">
<h2>Bug fixes and other updates<a class="headerlink" href="#id191" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Change http response code for <code class="docutils literal notranslate"><span class="pre">missing-legalhold-consent</span></code>. (#1688)</p></li>
<li><p>Remove old end-point for changing email</p></li>
</ul>
</section>
<section id="federation-changes-alpha-feature-do-not-use-yet">
<h2>Federation changes (alpha feature, do not use yet)<a class="headerlink" href="#federation-changes-alpha-feature-do-not-use-yet" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add new API to list paginated qualified conversation ids (#1686)</p></li>
</ul>
</section>
<section id="id192">
<h2>Documentation<a class="headerlink" href="#id192" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix swagger: mark name in UserUpdate as optional (#1691, #1692)</p></li>
</ul>
</section>
<section id="id193">
<h2>Internal changes<a class="headerlink" href="#id193" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Replaced uses of <code class="docutils literal notranslate"><span class="pre">UVerb</span></code> and <code class="docutils literal notranslate"><span class="pre">EmptyResult</span></code> with <code class="docutils literal notranslate"><span class="pre">MultiVerb</span></code> (#1693)</p></li>
<li><p>Added a mechanism to derive <code class="docutils literal notranslate"><span class="pre">AsUnion</span></code> instances automatically (#1693)</p></li>
<li><p>Integration test coverage (#1696, #1704)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-111-0">
<h1>[2021-08-02] (Chart Release 2.111.0)<a class="headerlink" href="#chart-release-2-111-0" title="Permalink to this heading"></a></h1>
<section id="id194">
<h2>Release Notes<a class="headerlink" href="#id194" title="Permalink to this heading"></a></h2>
<p>If you want to set the default for file sharing in all teams to <code class="docutils literal notranslate"><span class="pre">disabled</span></code>, search for “File Sharing” in https://github.com/wireapp/wire-server/tree/develop/docs/reference/config-options.md.</p>
</section>
<section id="release-notes-for-wire-com-cloud-operators">
<h2>Release Notes for Wire.com Cloud operators<a class="headerlink" href="#release-notes-for-wire-com-cloud-operators" title="Permalink to this heading"></a></h2>
<p>Upgrade nginz (#1658)</p>
</section>
<section id="id195">
<h2>API Changes<a class="headerlink" href="#id195" title="Permalink to this heading"></a></h2>
</section>
<section id="id196">
<h2>Features<a class="headerlink" href="#id196" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>A new team feature for classified domains is available (#1626):</p>
<ul>
<li><p>a public endpoint is at <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/teams/:tid/features/classifiedDomains</span></code></p></li>
<li><p>an internal endpoint is at <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/i/teams/:tid/features/classifiedDomains</span></code></p></li>
</ul>
</li>
<li><p>Extend feature config API (#1658)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fileSharing</span></code> feature config (#1652, #1654, #1655)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">conferenceCalling</span></code> feature flag (#1683)</p></li>
<li><p>Add user_id to csv export (#1663)</p></li>
</ul>
</section>
<section id="id197">
<h2>Bug fixes and other updates<a class="headerlink" href="#id197" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>New, hardened end-point for changing email (68b4db08)</p></li>
<li><p>Fix: CSV export is missing SCIM external id when SAML is also used (#1608)</p></li>
<li><p>Fix: sso_id field in user record (brig) was not always filled correctly in cassandra (#1334)</p></li>
<li><p>Change http response code for <code class="docutils literal notranslate"><span class="pre">missing-legalhold-consent</span></code> from 412 to 403 (#1688)</p></li>
</ul>
</section>
<section id="id198">
<h2>Documentation<a class="headerlink" href="#id198" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Improved Swagger documentation for endpoints with multiple responses (#1649, #1645)</p></li>
</ul>
</section>
<section id="id199">
<h2>Internal changes<a class="headerlink" href="#id199" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Improvements to local integration test setup when using buildah and kind (#1667)</p></li>
<li><p>The servant-swagger dependency now points to the current upstream master (#1656)</p></li>
<li><p>Improved error handling middleware (#1671)</p></li>
<li><p>Refactor function createUser for readability (#1670)</p></li>
<li><p>Removed explicit implementation for user HEAD endpoints (#1679)</p></li>
<li><p>Improved test coverage for error responses (#1680)</p></li>
<li><p>Introduced <code class="docutils literal notranslate"><span class="pre">MultiVerb</span></code> endpoints in Servant API (#1649).</p></li>
</ul>
</section>
<section id="id200">
<h2>Federation changes (alpha feature, do not use yet)<a class="headerlink" href="#id200" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Validate server TLS certificate between federators (#1662)</p></li>
<li><p>A clarification is added about listing your own domain as a classified domain (#1678)</p></li>
<li><p>Added a <code class="docutils literal notranslate"><span class="pre">QualifiedCapture</span></code> type to Servant for qualified paths (#1669)</p></li>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">DomainHeader</span></code> type to <code class="docutils literal notranslate"><span class="pre">OriginDomainHeader</span></code> (#1689)</p></li>
<li><p>Added golden tests for protobuf serialisation / deserialisation (#1644).</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-110-0">
<h1>[2021-07-09] (Chart Release 2.110.0)<a class="headerlink" href="#chart-release-2-110-0" title="Permalink to this heading"></a></h1>
<section id="id201">
<h2>Release Notes<a class="headerlink" href="#id201" title="Permalink to this heading"></a></h2>
<p>This release requires a manual change in your galley configuration: <code class="docutils literal notranslate"><span class="pre">settings.conversationCodeURI</span></code> in <code class="docutils literal notranslate"><span class="pre">galley.yaml</span></code> was had to be set to <code class="docutils literal notranslate"><span class="pre">${WEBAPP}/join</span></code> before this release, and must be set to <code class="docutils literal notranslate"><span class="pre">${ACCOUNTS}/conversation-join</span></code> from now on, where <code class="docutils literal notranslate"><span class="pre">${WEBAPP}</span></code> is the url to the webapp and <code class="docutils literal notranslate"><span class="pre">${ACCOUNTS}</span></code> is the url to the account pages.</p>
</section>
<section id="id202">
<h2>API Changes<a class="headerlink" href="#id202" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Several public team feature endpoints are removed (their internal and
Stern-based counterparts remain available):</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/teams/:tid/features/sso</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/teams/:tid/features/validateSAMLemails</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/teams/:tid/features/digitalSignatures</span></code></p></li>
</ul>
</li>
<li><p>All endpoints that fetch conversation details now also include a new key
<code class="docutils literal notranslate"><span class="pre">qualified_id</span></code> for a qualified conversation ID (#1640)</p></li>
<li><p>New endpoint <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/list-conversations</span></code> similar to <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/conversations</span></code>, but which will also return your own remote conversations (if federation is enabled). (#1591)</p></li>
</ul>
</section>
<section id="id203">
<h2>Features<a class="headerlink" href="#id203" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Change <code class="docutils literal notranslate"><span class="pre">settings.conversationCodeURI</span></code> in galley.yaml (#1643).</p></li>
<li><p>[Federation] RPC to propagate messages to other backends (#1596).</p></li>
<li><p>[Federation] Fetch remote user’s clients when sending messages (#1635).</p></li>
<li><p>[Federation] Actually propagate messages to other backends (#1638).</p></li>
<li><p>[Federation] Support sending messages to remote conversations (#1609).</p></li>
<li><p>[Federation] Guard against path traversal attacks (#1646).</p></li>
</ul>
</section>
<section id="id204">
<h2>Internal changes<a class="headerlink" href="#id204" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Feature endpoints are rewritten in Servant (#1642).</p></li>
<li><p>Internal federation endpoints using the publicly-facing conversation data type
now also include a qualified conversation ID under the <code class="docutils literal notranslate"><span class="pre">qualified_id</span></code> key
(#1640)</p></li>
<li><p>schema-profunctor: add <code class="docutils literal notranslate"><span class="pre">optField</span></code> combinator and corresponding documentation (#1621, #1624).</p></li>
<li><p>[Federation] Let a receiving backend decide conversation attribute specifics of its users
added to a new conversation via <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/federation/register-conversation</span></code> (#1622).</p></li>
<li><p>[Federation] Adjust scripts under ./hack/federation to work with recent changes to the federation API (#1632).</p></li>
<li><p>Refactored Proteus endpoint to work with qualified users (#1634).</p></li>
<li><p>Refactored Federator InternalServer (#1637)</p></li>
</ul>
<section id="internal-federation-api-changes">
<h3>Internal Federation API changes<a class="headerlink" href="#internal-federation-api-changes" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Breaking change on InwardResponse and OutwardResponse in router.proto for improved error handling (#1637)</p>
<ul>
<li><p>Note: federation should not be in use anywhere yet, so this should not have any impact</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="id205">
<h2>Documentation<a class="headerlink" href="#id205" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix validation errors in Swagger documentation (#1625).</p></li>
</ul>
</section>
<section id="id206">
<h2>Bug fixes and other updates<a class="headerlink" href="#id206" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Restore old behaviour for parse errors in request bodies (#1628, #1629).</p></li>
<li><p>Allow to change IdP Issuer name to previous name (#1615).</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-109-0">
<h1>[2021-06-23] (Chart Release 2.109.0)<a class="headerlink" href="#chart-release-2-109-0" title="Permalink to this heading"></a></h1>
<section id="id207">
<h2>API Changes<a class="headerlink" href="#id207" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[Federation] Add qualified endpoint for sending messages at <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/conversations/:domain/:cnv/proteus/messages</span></code> (#1593, #1614, #1616, #1620).</p></li>
<li><p>Replace ‘otr’ with ‘proteus’ in new message sending API (#1616)</p></li>
</ul>
</section>
<section id="id208">
<h2>Features<a class="headerlink" href="#id208" title="Permalink to this heading"></a></h2>
</section>
<section id="id209">
<h2>Bug fixes and other updates<a class="headerlink" href="#id209" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[helm] Allow sending messages upto 40 MB by default (#1614)</p></li>
<li><p>Fix for https://github.com/wireapp/wire-webapp/security/advisories/GHSA-382j-mmc8-m5rw  (#1613)</p></li>
<li><p>Update wire-webapp version (#1613)</p></li>
<li><p>Update team-settings version (#1598)</p></li>
<li><p>Allow optional password field in RmClient (#1604, #1607)</p></li>
<li><p>Add endpoint: Get name, id with for CodeAccess conversations (#1592)</p></li>
<li><p>demote logging failed invitations to a warning, rather than an error. Server operators can’t act on these errors in any way (#1586)</p></li>
</ul>
</section>
<section id="id210">
<h2>Documentation<a class="headerlink" href="#id210" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add descriptive comments to <code class="docutils literal notranslate"><span class="pre">ConversationMemberUpdate</span></code> (#1578)</p></li>
<li><p>initial few anti-patterns and links about cassandra (#1599)</p></li>
</ul>
</section>
<section id="id211">
<h2>Internal changes<a class="headerlink" href="#id211" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Rename a local members field in the Conversation data type (#1580)</p></li>
<li><p>Servantify Protobuf endpoint to send messages (#1583)</p></li>
<li><p>Servantify own client API (#1584, #1603)</p></li>
<li><p>Remove resource requests (#1581)</p></li>
<li><p>Import http2 fix (#1582)</p></li>
<li><p>Remove stale FUTUREWORK comment (#1587)</p></li>
<li><p>Reorganise helper functions for conversation notifications (#1588)</p></li>
<li><p>Extract origin domain header name for use in API (#1597)</p></li>
<li><p>Merge Empty200, Empty404 and EmptyResult (#1589)</p></li>
<li><p>Set content-type header for JSON errors in Servant (#1600)</p></li>
<li><p>Add golden tests for ClientCapability(List) (#1590)</p></li>
<li><p>Add checklist for PRs (#1601, #1610)</p></li>
<li><p>Remove outdated TODO (#1606)</p></li>
<li><p>submodules (#1612)</p></li>
</ul>
</section>
<section id="more-federation-changes-inactive-code">
<h2>More federation changes (inactive code)<a class="headerlink" href="#more-federation-changes-inactive-code" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add getUserClients RPC (and thereby allow remote clients lookup) (#1500)</p></li>
<li><p>minor refactor: runFederated (#1575)</p></li>
<li><p>Notify remote backends when users join (#1556)</p></li>
<li><p>end2end test getting remote conversation and complete its implementation (#1585)</p></li>
<li><p>Federation: Notify Remote Users of Being Added to a New Conversation (#1594)</p></li>
<li><p>Add qualified endpoint for sending messages (#1593, #1614)</p></li>
<li><p>Galley/int: Expect remote call when creating conv with remotes (#1611)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-108-0">
<h1>[2021-06-08] (Chart Release 2.108.0)<a class="headerlink" href="#chart-release-2-108-0" title="Permalink to this heading"></a></h1>
<section id="id212">
<h2>Release Notes<a class="headerlink" href="#id212" title="Permalink to this heading"></a></h2>
<p>This release doesn’t require any extra considerations to deploy.</p>
</section>
<section id="id213">
<h2>Release Notes for Wire.com Cloud operators<a class="headerlink" href="#id213" title="Permalink to this heading"></a></h2>
<p>Deploy brig before galley (#1526, #1549)</p>
</section>
<section id="id214">
<h2>Features<a class="headerlink" href="#id214" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Update versions of webapp, team-settings, account-pages (#1559)</p></li>
<li><p>Add missing /list-users route (#1572)</p></li>
<li><p>[Legalhold] Block device handshake in case of LH policy conflict (#1526)</p></li>
<li><p>[Legalhold] Fix: Connection type when unblocking after LH (#1549)</p></li>
<li><p>[Legalhold] Allow Legalhold for large teams (&gt;2000) if enabled via whitelist (#1546)</p></li>
<li><p>[Legalhold] Add ClientCapabilities to NewClient. (#1552)</p></li>
<li><p>[Legalhold] Dynamic whitelisted teams &amp; whitelist-teams-and-implicit-consent feature in tests (#1557, #1574)</p></li>
<li><p>[Federation] Add remote members to conversations (#1529)</p></li>
<li><p>[Federation] Federation: new endpoint: GET /conversations/{domain}/{cnv} (#1566)</p></li>
<li><p>[Federation] Parametric mock federator (#1558)</p></li>
<li><p>[Federation] Add more information to federation errors (#1560)</p></li>
<li><p>[Federation] Add remote users when creating a conversation (#1569)</p></li>
<li><p>[Federation] Update conversation membership in a remote backend (#1540)</p></li>
<li><p>[Federation] expose /conversations/{cnv}/members/v2 for federation backends (#1543)</p></li>
</ul>
</section>
<section id="id215">
<h2>Bug fixes and other updates<a class="headerlink" href="#id215" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix MIME-type of asset artifacts</p></li>
<li><p>Add some missing charts (#1533)</p></li>
</ul>
</section>
</section>
<section id="id216">
<h1>Internal changes<a class="headerlink" href="#id216" title="Permalink to this heading"></a></h1>
<ul class="simple">
<li><p>Qualify users and conversations in Event (#1547)</p></li>
<li><p>Make botsAndUsers pure (#1562)</p></li>
<li><p>Set swagger type of text schema (#1561)</p></li>
<li><p>More examples in schema-profunctor documentation (#1539)</p></li>
<li><p>Refactoring-friendly FutureWork data type (#1550)</p></li>
<li><p>nginz/Dockerfile: Run ‘apk add’ verbosely for debugging (#1565)</p></li>
<li><p>Introduce a generalized version of wai-extra Session type constructor (#1563)</p></li>
<li><p>Avoid wrapping error in rethrow middleware (#1567)</p></li>
<li><p>wire-api: Introduce ErrorDescription (#1573)</p></li>
<li><p>[Federation] Use Servant.respond instead of explicit SOP (#1535)</p></li>
<li><p>[Federation] Add end2end test for adding remote users to a conversation (#1538)</p></li>
<li><p>[Federation] Add required fields to Swagger for SchemaP (#1536)</p></li>
<li><p>[Federation] Add Galley component to federator API (#1555)</p></li>
<li><p>[Federation] Generalises the mock federator to work with any MonadIO m monad (#1564)</p></li>
<li><p>[Federation] Introduces the HasGalley class (#1568)</p></li>
<li><p>[Federation] Servantify JSON endpoint to send messages (#1532)</p></li>
<li><p>[Federation] federator: rename Brig -&gt; Service and add galley (#1570)</p></li>
</ul>
<section id="id217">
<h2>Documentation<a class="headerlink" href="#id217" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Update Rich Info docs (#1544)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-107-0">
<h1>[2021-05-26] (Chart Release 2.107.0)<a class="headerlink" href="#chart-release-2-107-0" title="Permalink to this heading"></a></h1>
<section id="id218">
<h2>Release Notes<a class="headerlink" href="#id218" title="Permalink to this heading"></a></h2>
<p><strong>Legalhold:</strong> This release introduces a notion of “consent” to
legalhold (LH).  If you are using LH on your site, follow the
instructions in
https://github.com/wireapp/wire-server/blob/814f3ebc251965ab4492f5df4d9195f3b2e0256f/docs/reference/team/legalhold.md#whitelisting-and-implicit-consent
after the upgrade.  <strong>Legalhold will not work as expected until you
change <code class="docutils literal notranslate"><span class="pre">galley.conf</span></code> as described!</strong></p>
<p><strong>SAML/SCIM:</strong> This release introduces changes to the way <code class="docutils literal notranslate"><span class="pre">NameID</span></code> is
processed: all identifiers are stored in lower-case and qualifiers are
ignored.  No manual upgrade steps are necessary, but consult
https://docs.wire.com/how-to/single-sign-on/trouble-shooting.html#theoretical-name-clashes-in-saml-nameids
on whether you need to re-calibrate your SAML IdP / SCIM setup.
(Reason / technical details: this change is motivated by two facts:
(1) email casing is complicated, and industry best practice appears to
be to ignore case information even though that is in conflict with the
official standard documents; and (2) SCIM user provisioning does not
allow to provide SAML NameID qualifiers, and guessing them has proven
to be infeasible.  See
https://github.com/wireapp/wire-server/pull/1495 for the code
changes.)</p>
</section>
<section id="id219">
<h2>Features<a class="headerlink" href="#id219" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[SAML/SCIM] More lenient matching of user ids (#1495)</p></li>
<li><p>[Legalhold] Block and kick users in case of LH no_consent conflict (1:1 convs). (#1507, #1530)</p></li>
<li><p>[Legalhold] Add legalhold status to user profile (#1522)</p></li>
<li><p>[Legalhold] Client-supported capabilities end-point (#1503)</p></li>
<li><p>[Legalhold] Whitelisting Teams for LH with implicit consent (#1502)</p></li>
<li><p>[Federation] Remove OptionallyQualified data type from types-common (#1517)</p></li>
<li><p>[Federation] Add RPC getConversations (#1493)</p></li>
<li><p>[Federation] Prepare remote conversations: Remove Opaque/Mapped Ids, delete remote identifiers from member/user tables. (#1478)</p></li>
<li><p>[Federation] Add schema migration for new tables (#1485)</p></li>
<li><p>[SAML/SCIM] Normalize SAML identifiers and fix issues with duplicate account creation (#1495)</p></li>
<li><p>Internal end-point for ejpd request processing. (#1484)</p></li>
</ul>
</section>
<section id="id220">
<h2>Bug fixes and other updates<a class="headerlink" href="#id220" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix: NewTeamMember vs. UserLegalHoldStatus (increase robustness against rogue clients) (#1496)</p></li>
</ul>
</section>
<section id="id221">
<h2>Documentation<a class="headerlink" href="#id221" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fixes a typo in the wire-api documentation (#1513)</p></li>
<li><p>Unify Swagger 2.0 docs for brig, galley and spar (#1508)</p></li>
</ul>
</section>
<section id="id222">
<h2>Internal changes<a class="headerlink" href="#id222" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Cleanup (no change in behavior) (#1494, #1501)</p></li>
<li><p>wire-api: Add golden test for FromJSON instance of NewOtrMessage (#1531)</p></li>
<li><p>Swagger/JSON cleanup (#1521, #1525)</p></li>
<li><p>Work around a locale issue in Ormolu (#1520)</p></li>
<li><p>Expose mock federator in wire-api-federation (#1524)</p></li>
<li><p>Prettier looking golden tests (#1527)</p></li>
<li><p>Refactorings, bug fixes (in tests only) (#1523)</p></li>
<li><p>Use sed instead of yq to read yaml files (#1518)</p></li>
<li><p>Remove zauth dependency from wire-api (#1516)</p></li>
<li><p>Improve naming conventions federation RPC calls (#1511)</p></li>
<li><p>Event refactoring and schema instances (#1506)</p></li>
<li><p>Fix: regenerate cabal files. (#1510)</p></li>
<li><p>Make DerivingVia a package default. (#1505)</p></li>
<li><p>Port instances to schemas library (#1482)</p></li>
<li><p>wire-api-federator: Make client tests more reliable (#1491)</p></li>
<li><p>Remove duplicated roundtrip test (#1498)</p></li>
<li><p>schema-profunctor: Add combinator for nonEmptyArray (#1497)</p></li>
<li><p>Golden tests for JSON instances (#1486)</p></li>
<li><p>galley: Convert conversation endpoints to servant (#1444, #1499)</p></li>
<li><p>Fix Arbitrary instances and enable corresponding roundtrip tests (#1492)</p></li>
<li><p>wire-api-fed: Mark flaky tests as pending</p></li>
<li><p>RFC: Schemas for documented bidirectional JSON encoding (#1474)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-105-0">
<h1>[2021-05-04] (Chart Release 2.105.0)<a class="headerlink" href="#chart-release-2-105-0" title="Permalink to this heading"></a></h1>
<section id="id223">
<h2>Features<a class="headerlink" href="#id223" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[brig] New option to use a random prekey selection strategy to remove DynamoDB dependency (#1416, #1476)</p></li>
<li><p>[brig] Ensure servant APIs are recorded by the metrics middleware (#1441)</p></li>
<li><p>[brig] Add exact handle matches from all teams in /search/contacts (#1431, #1455)</p></li>
<li><p>[brig] CSV endpoint: Add columns to output (#1452)</p></li>
<li><p>[galley] Make pagination more idiomatic (#1460)</p></li>
<li><p>[federation] Testing improvements (#1411, #1429)</p></li>
<li><p>[federation] error reporting, DNS error logging (#1433, #1463)</p></li>
<li><p>[federation] endpoint refactoring, new brig endpoints, servant client for federated calls, originDomain metadata (#1389, #1446, #1445, #1468, #1447)</p></li>
<li><p>[federation] Add federator to galley (#1465)</p></li>
<li><p>[move-team] Update move-team with upstream schema changes #1423</p></li>
</ul>
</section>
<section id="id224">
<h2>Bug fixes and other updates<a class="headerlink" href="#id224" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[security] Update webapp container image tag to address CVE-2021-21400 (#1473)</p></li>
<li><p>[brig] Return correct status phrase and body on error (#1414) …</p></li>
<li><p>[brig] Fix FromJSON instance of ListUsersQuery (#1456)</p></li>
<li><p>[galley] Lower the limit for URL lengths for galley -&gt; brig RPC calls (#1469)</p></li>
<li><p>[chores] Remove unused dependencies (#1424) …</p></li>
<li><p>[compilation] Stop re-compiling nginz when running integration test for unrelated changes</p></li>
<li><p>[tooling] Use jq magic instead of bash (#1432), Add wget (#1443)</p></li>
<li><p>[chores] Refactor Dockerfile apk installation tasks (#1448)</p></li>
<li><p>[tooling] Script to generate token for SCIM endpoints (#1457)</p></li>
<li><p>[tooling] Ormolu script improvements (#1458)</p></li>
<li><p>[tooling] Add script to colourise test failure output (#1459)</p></li>
<li><p>[tooling] Setup for running tests in kind (#1451, #1462)</p></li>
<li><p>[tooling] HLS workaround for optimisation flags (#1449)</p></li>
</ul>
</section>
<section id="id225">
<h2>Documentation<a class="headerlink" href="#id225" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[docs] Document how to run multi-backend tests for federation (#1436)</p></li>
<li><p>[docs] Fix CHANGELOG: incorrect release dates (#1435)</p></li>
<li><p>[docs] Update release notes with data migration for SCIM (#1442)</p></li>
<li><p>[docs] Fixes a k8s typo in the README (#1475)</p></li>
<li><p>[docs] Document testing strategy and patterns (#1472)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-104-0">
<h1>[2021-03-23] (Chart Release 2.104.0)<a class="headerlink" href="#chart-release-2-104-0" title="Permalink to this heading"></a></h1>
<section id="id226">
<h2>Features<a class="headerlink" href="#id226" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[federation] Handle errors which could happen while talking to remote federator (#1408)</p></li>
<li><p>[federation] Forward grpc traffic to federator via ingress (or nginz for local integration tests) (#1386)</p></li>
<li><p>[federation] Return UserProfile when getting user by qualified handle (#1397)</p></li>
</ul>
</section>
<section id="id227">
<h2>Bug fixes and other updates<a class="headerlink" href="#id227" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[SCIM] Fix: Invalid requests raise 5xxs (#1392)</p></li>
<li><p>[SAML] Fix: permissions for IdP CRUD operations. (#1405)</p></li>
</ul>
</section>
<section id="id228">
<h2>Documentation<a class="headerlink" href="#id228" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Tweak docs about team search visibility configuration. (#1407)</p></li>
<li><p>Move docs around. (#1399)</p></li>
<li><p>Describe how to look at swagger locally (#1388)</p></li>
</ul>
</section>
<section id="id229">
<h2>Internal changes<a class="headerlink" href="#id229" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Optimize /users/list-clients to only fetch required things from DB (#1398)</p></li>
<li><p>[SCIM] Remove usage of spar.scim_external_ids table (#1418)</p></li>
<li><p>Add-license. (#1394)</p></li>
<li><p>Bump nixpkgs for hls-1.0 (#1412)</p></li>
<li><p>stack-deps.nix: Use nixpkgs from niv (#1406)</p></li>
</ul>
</section>
</section>
<section id="id230">
<h1>[2021-03-21]<a class="headerlink" href="#id230" title="Permalink to this heading"></a></h1>
<section id="id231">
<h2>Release Notes<a class="headerlink" href="#id231" title="Permalink to this heading"></a></h2>
<p>If you are using Wire’s SCIM functionality you shouldn’t skip this release. If you skip it then there’s a chance of requests from SCIM clients being missed during the time window of Wire being upgraded.
This might cause sync issues between your SCIM peer and Wire’s user DB.
This is due to an internal data migration job (<code class="docutils literal notranslate"><span class="pre">spar-migrate-data</span></code>) that needs to run once. If it hasn’t run yet then any upgrade to this and any later release will automatically run it. After it has completed once it is safe again to upgrade Wire while receiving requests from SCIM clients.</p>
</section>
<section id="id232">
<h2>Internal changes<a class="headerlink" href="#id232" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Migrate spar external id table (#1400, #1413, #1415, #1417)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-102-0">
<h1>[2021-03-02] (Chart Release 2.102.0)<a class="headerlink" href="#chart-release-2-102-0" title="Permalink to this heading"></a></h1>
<section id="id233">
<h2>Bug fixes and other updates<a class="headerlink" href="#id233" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Return PubClient instead of Client from /users/list-clients (#1391)</p></li>
</ul>
</section>
<section id="id234">
<h2>Internal changes<a class="headerlink" href="#id234" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Federation: Add qualified endpoints for prekey management (#1372)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-101-0">
<h1>[2021-02-25] (Chart Release 2.101.0)<a class="headerlink" href="#chart-release-2-101-0" title="Permalink to this heading"></a></h1>
<section id="id235">
<h2>Bug fixes and other updates<a class="headerlink" href="#id235" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Pin kubectl image in sftd chart (#1383)</p></li>
<li><p>Remove imagePullPolicy: Always for reaper chart (#1387)</p></li>
</ul>
</section>
<section id="id236">
<h2>Internal changes<a class="headerlink" href="#id236" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Use mu-haskell to implement one initial federation request across backends (#1319)</p></li>
<li><p>Add migrate-external-ids tool (#1384)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-99-12">
<h1>[2021-02-16] (Chart Release 2.99.12)<a class="headerlink" href="#chart-release-2-99-12" title="Permalink to this heading"></a></h1>
<section id="id237">
<h2>Release Notes<a class="headerlink" href="#id237" title="Permalink to this heading"></a></h2>
<p>This release might require manual migration steps, see <a class="reference external" href="https://github.com/wireapp/wire-server/blob/c81a189d0dc8916b72ef20d9607888618cb22598/docs/reference/elasticsearch-migration-2021-02-16.md">ElasticSearch migration instructions for release 2021-02-16 </a>.</p>
</section>
<section id="id238">
<h2>Features<a class="headerlink" href="#id238" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Team search: Add search by email (#1344) (#1286)</p></li>
<li><p>Add endpoint to get client metadata for many users (#1345)</p></li>
<li><p>Public end-point for getting the team size. (#1295)</p></li>
<li><p>sftd: add support for multiple SFT servers (#1325) (#1377)</p></li>
<li><p>SAML allow enveloped signatures (#1375)</p></li>
</ul>
</section>
<section id="id239">
<h2>Bug fixes and other updates<a class="headerlink" href="#id239" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Wire.API.UserMap &amp; Brig.API.Public: Fix Swagger docs (#1350)</p></li>
<li><p>Fix nix build on OSX (#1340)</p></li>
</ul>
</section>
<section id="id240">
<h2>Internal changes<a class="headerlink" href="#id240" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[federation] Federation end2end test scripts and Makefile targets (#1341)</p></li>
<li><p>[federation] Brig integration tests (#1342)</p></li>
<li><p>Add stack 2.3.1 to shell.nix (#1347)</p></li>
<li><p>buildah: Use correct dist directory while building docker-images (#1352)</p></li>
<li><p>Add spar.scim_external table and follow changes (#1359)</p></li>
<li><p>buildah: Allow building only a given exec and fix brig templates (#1353)</p></li>
<li><p>Galley: Add /teams/:tid/members csv download (#1351) (#1351)</p></li>
<li><p>Faster local docker image building using buildah (#1349)</p></li>
<li><p>Replace federation guard with env var (#1346)</p></li>
<li><p>Update cassandra schema after latest changes (#1337)</p></li>
<li><p>Add fast-intermediate Dockerfile for faster PR CI (#1328)</p></li>
<li><p>dns-util: Allow running lookup with a given resolver (#1338)</p></li>
<li><p>Add missing internal qa routes (#1336)</p></li>
<li><p>Extract and rename PolyLog to a library for reusability (#1329)</p></li>
<li><p>Fix: Spar integration tests misconfigured on CI (#1343)</p></li>
<li><p>Bump ormolu version (#1366, #1368)</p></li>
<li><p>Update ES upgrade path (#1339) (#1376)</p></li>
<li><p>Bump saml2-web-sso version to latest upstream (#1369)</p></li>
<li><p>Add docs for deriving-swagger2 (#1373)</p></li>
</ul>
</section>
</section>
<section id="chart-release-3-30-6">
<h1>[2021-01-15] (Chart Release 3.30.6)<a class="headerlink" href="#chart-release-3-30-6" title="Permalink to this heading"></a></h1>
<section id="id241">
<h2>Release Notes<a class="headerlink" href="#id241" title="Permalink to this heading"></a></h2>
<p>This release contains bugfixes and internal changes.</p>
</section>
<section id="id242">
<h2>Features<a class="headerlink" href="#id242" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[federation] Add helm chart for the federator (#1317)</p></li>
</ul>
</section>
<section id="id243">
<h2>Bug fixes and other updates<a class="headerlink" href="#id243" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[SCIM] Accept any query string for externalId (#1330)</p></li>
<li><p>[SCIM] Allow at most one identity provider (#1332)</p></li>
</ul>
</section>
<section id="id244">
<h2>Internal changes<a class="headerlink" href="#id244" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[SCIM] Change log level to Warning &amp; format filter logs (#1331)</p></li>
<li><p>Improve flaky integration tests (#1333)</p></li>
<li><p>Upgrade nixpkgs and niv (#1326)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-97-0">
<h1>[2021-01-12] (Chart Release 2.97.0)<a class="headerlink" href="#chart-release-2-97-0" title="Permalink to this heading"></a></h1>
<section id="id245">
<h2>Release Notes<a class="headerlink" href="#id245" title="Permalink to this heading"></a></h2>
<p>This release contains bugfixes and internal changes.</p>
</section>
<section id="id246">
<h2>Bug fixes and other updates<a class="headerlink" href="#id246" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[SCIM] Fix bug: Deleting a user retains their externalId (#1323)</p></li>
<li><p>[SCIM] Fix bug: Provisioned users can update update to email, handle, name (#1320)</p></li>
</ul>
</section>
<section id="id247">
<h2>Internal changes<a class="headerlink" href="#id247" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[SCIM] Add logging to SCIM ops, invitation ops, createUser (#1322) (#1318)</p></li>
<li><p>Upgrade nixpkgs and add HLS to shell.nix (#1314)</p></li>
<li><p>create_test_team_scim.sh script: fix arg parsing and invite (#1321)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-95-18">
<h1>[2021-01-06] (Chart Release 2.95.18)<a class="headerlink" href="#chart-release-2-95-18" title="Permalink to this heading"></a></h1>
<section id="id248">
<h2>Release Notes<a class="headerlink" href="#id248" title="Permalink to this heading"></a></h2>
<p>This release contains bugfixes and internal changes.</p>
</section>
<section id="id249">
<h2>Bug fixes and other updates<a class="headerlink" href="#id249" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[SCIM] Bug fix: handle is lost after registration (#1303)</p></li>
<li><p>[SCIM] Better error message (#1306)</p></li>
</ul>
</section>
<section id="id250">
<h2>Documentation<a class="headerlink" href="#id250" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[SCIM] Document <code class="docutils literal notranslate"><span class="pre">validateSAMLemails</span></code> feature in docs/reference/spar-braindump.md (#1299)</p></li>
</ul>
</section>
<section id="id251">
<h2>Internal changes<a class="headerlink" href="#id251" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[federation] Servantify get users by unqualified ids or handles (#1291)</p></li>
<li><p>[federation] Add endpoint to get users by qualified ids or handles (#1291)</p></li>
<li><p>Allow overriding NAMESPACE for kube-integration target (#1305)</p></li>
<li><p>Add script create_test_team_scim.sh for development (#1302)</p></li>
<li><p>Update brig helm chart: Add <code class="docutils literal notranslate"><span class="pre">setExpiredUserCleanupTimeout</span></code> (#1304)</p></li>
<li><p>Nit-picks (#1300)</p></li>
<li><p>nginz_disco: docker building consistency (#1311)</p></li>
<li><p>Add tools/db/repair-handles (#1310)</p></li>
<li><p>small speedup for ‘make upload-charts’ by inlining loop (#1308)</p></li>
<li><p>Cleanup stack.yaml. (#1312) (#1316)</p></li>
</ul>
</section>
</section>
<section id="chart-release-2-95-0">
<h1>[2020-12-21] (Chart Release 2.95.0)<a class="headerlink" href="#chart-release-2-95-0" title="Permalink to this heading"></a></h1>
<section id="id252">
<h2>Release Notes<a class="headerlink" href="#id252" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>upgrade spar before brig</p></li>
<li><p>upgrade nginz</p></li>
</ul>
</section>
<section id="id253">
<h2>Features<a class="headerlink" href="#id253" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Increase the max allowed search results from 100 to 500. (#1282)</p></li>
</ul>
</section>
<section id="id254">
<h2>Bug fixes and other updates<a class="headerlink" href="#id254" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>SCIM: Allow strings for boolean values (#1296)</p></li>
<li><p>Extend SAML IdP/SCIM permissions to admins (not just owners) (#1274, #1280)</p></li>
<li><p>Clean up SCIM-invited users with expired invitation (#1264)</p></li>
<li><p>move-team: CLI to export/import team data (proof of concept, needs testing) (#1288)</p></li>
<li><p>Change some error labels for status 403 responses under <code class="docutils literal notranslate"><span class="pre">/identity-providers</span></code> (used by team-settings only) (#1274)</p></li>
<li><p>[federation] Data.Qualified: Better field names (#1290)</p></li>
<li><p>[federation] Add endpoint to get User Id by qualified handle (#1281, #1297)</p></li>
<li><p>[federation] Remove DB tables for ID mapping (#1287)</p></li>
<li><p>[federation] servantify /self endpoint, add <code class="docutils literal notranslate"><span class="pre">qualified_id</span></code> field (#1283)</p></li>
</ul>
</section>
<section id="id255">
<h2>Documentation<a class="headerlink" href="#id255" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Integrate servant-swagger-ui to brig (#1270)</p></li>
</ul>
</section>
<section id="id256">
<h2>Internal changes<a class="headerlink" href="#id256" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>import all charts from wire-server-deploy/develop as of 2012-12-17 (#1293)</p></li>
<li><p>Migrate code for easier CI (#1294)</p></li>
<li><p>unit test and fix for null values in rendered JSON in UserProfile (#1292)</p></li>
<li><p>hscim: Bump upper bound for servant packages (#1285)</p></li>
<li><p>drive-by fix: allow federator to locally start up by specifying config (#1283)</p></li>
</ul>
</section>
</section>
<section id="id257">
<h1>2020-12-15<a class="headerlink" href="#id257" title="Permalink to this heading"></a></h1>
<section id="id258">
<h2>Release Notes<a class="headerlink" href="#id258" title="Permalink to this heading"></a></h2>
<p>As a preparation for federation, this release introduces a mandatory ‘federationDomain’ configuration setting for brig and galley (#1261)</p>
</section>
<section id="id259">
<h2>Features<a class="headerlink" href="#id259" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>brig: Allow setting a static SFT Server (#1277)</p></li>
</ul>
</section>
<section id="id260">
<h2>Bug fixes and other updates<a class="headerlink" href="#id260" title="Permalink to this heading"></a></h2>
</section>
<section id="id261">
<h2>Documentation<a class="headerlink" href="#id261" title="Permalink to this heading"></a></h2>
</section>
<section id="id262">
<h2>Internal changes<a class="headerlink" href="#id262" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add federation aware endpoint for getting user (#1254)</p></li>
<li><p>refactor brig Servant API for consistency (#1276)</p></li>
<li><p>Feature flags cleanup (#1256)</p></li>
</ul>
</section>
</section>
<section id="id263">
<h1>2020-11-24<a class="headerlink" href="#id263" title="Permalink to this heading"></a></h1>
<section id="id264">
<h2>Release Notes<a class="headerlink" href="#id264" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Allow an empty SAML contact list, which is configured at <code class="docutils literal notranslate"><span class="pre">saml.contacts</span></code> in spar’s config.
The contact list is exposed at the <code class="docutils literal notranslate"><span class="pre">/sso/metadata</span></code> endpoint.</p></li>
</ul>
</section>
<section id="id265">
<h2>Features<a class="headerlink" href="#id265" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Make Content-MD5 header optional for asset upload (#1252)</p></li>
<li><p>Add applock team feature (#1242, #1253)</p></li>
<li><p>/teams/[tid]/features endpoint</p></li>
</ul>
</section>
<section id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix content-type headers in saml responses (#1241)</p></li>
</ul>
</section>
<section id="id266">
<h2>Internal changes<a class="headerlink" href="#id266" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>parse exposed ‘tracestate’ header in nginz logs if present (#1244)</p></li>
<li><p>Store SCIM tokens in hashed form (#1240)</p></li>
<li><p>better error handling (#1251)</p></li>
</ul>
</section>
</section>
<section id="id267">
<h1>2020-10-28<a class="headerlink" href="#id267" title="Permalink to this heading"></a></h1>
<section id="id268">
<h2>Features<a class="headerlink" href="#id268" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Onboard password-auth’ed users via SCIM, via existing invitation flow (#1213)</p></li>
</ul>
</section>
<section id="id269">
<h2>Bug fixes and other updates<a class="headerlink" href="#id269" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>cargohold: add compatibility mode for Scality RING S3 implementation (#1217, reverted in 4ce798e8d9db, then #1234)</p></li>
<li><p>update email translations to latest (#1231)</p></li>
</ul>
</section>
<section id="id270">
<h2>Documentation<a class="headerlink" href="#id270" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[brig:docs] Add a note on feature flag: setEmailVisibility (#1235)</p></li>
</ul>
</section>
<section id="id271">
<h2>Internal changes<a class="headerlink" href="#id271" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Upgrade bonanza to geoip2 (#1236)</p></li>
<li><p>Migrate rex to this repository (#1218)</p></li>
<li><p>Fix stack warning about bloodhound. (#1237)</p></li>
<li><p>Distinguish different places that throw the same error. (#1229)</p></li>
<li><p>make fetch.py compatible with python 3 (#1230)</p></li>
<li><p>add missing license headers (#1221)</p></li>
<li><p>More debug logging for native push notifications. (#1220, #1226)</p></li>
<li><p>add libtinfo/ncurses to docs and nix deps (#1215)</p></li>
<li><p>Double memory available to cassandra in demo mode (#1216)</p></li>
</ul>
</section>
</section>
<section id="id272">
<h1>2020-10-05<a class="headerlink" href="#id272" title="Permalink to this heading"></a></h1>
<section id="id273">
<h2>Release Notes<a class="headerlink" href="#id273" title="Permalink to this heading"></a></h2>
<p>With this release, the <code class="docutils literal notranslate"><span class="pre">setCookieDomain</span></code> configuration (under <code class="docutils literal notranslate"><span class="pre">brig</span></code>/<code class="docutils literal notranslate"><span class="pre">config</span></code>.<code class="docutils literal notranslate"><span class="pre">optSettings</span></code>) no longer has any effect, and can be removed.</p>
</section>
<section id="security-improvements">
<h2>Security improvements<a class="headerlink" href="#security-improvements" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Authentication cookies are set to the specific DNS name of the backend server (like nginz-https.example.com), instead of a wildcard domain (like *.example.com). This is achieved by leaving the domain empty in the Set-Cookie header, but changing the code to allow clients with old cookies to continue using them until they get renewed. (#1102)</p></li>
</ul>
</section>
<section id="id274">
<h2>Bug Fixes<a class="headerlink" href="#id274" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Match users on email in SCIM search: Manage invited user by SCIM when SSO is enabled (#1207)</p></li>
</ul>
</section>
<section id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Amount of SFT servers returned on /calls/config/v2 can be limited (default 5, configurable) (#1206)</p></li>
<li><p>Allow SCIM without SAML (#1200)</p></li>
</ul>
</section>
<section id="id275">
<h2>Internal changes<a class="headerlink" href="#id275" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Cargohold: Log more about AWS errors, ease compatibility testing (#1205, #1210)</p></li>
<li><p>GHC upgrade to 8.8.4 (#1204)</p></li>
<li><p>Preparation for APNS notification on iOS 13 devices: Use mutable content for non-voip notifications and update limits (#1212)</p></li>
<li><p>Cleanup: remove unused scim_user table (#1211)</p></li>
</ul>
</section>
</section>
<section id="id276">
<h1>2020-09-04<a class="headerlink" href="#id276" title="Permalink to this heading"></a></h1>
<section id="id277">
<h2>Release Notes<a class="headerlink" href="#id277" title="Permalink to this heading"></a></h2>
</section>
<section id="id278">
<h2>Bug Fixes<a class="headerlink" href="#id278" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fixed logic related to ephemeral users (#1197)</p></li>
</ul>
</section>
<section id="id279">
<h2>New Features<a class="headerlink" href="#id279" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>SFT servers now exposed over /calls/config/v2 (#1177)</p></li>
<li><p>First federation endpoint (#1188)</p></li>
</ul>
</section>
<section id="id280">
<h2>Internal changes<a class="headerlink" href="#id280" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>ormolu upgrade to 0.1.2.0 and formatting (#1145, #1185, #1186)</p></li>
<li><p>handy cqlsh make target to manually poke at the database (#1170)</p></li>
<li><p>spar cleanup</p></li>
<li><p>brig user name during scim user parsing (#1195)</p></li>
<li><p>invitation refactor (#1196)</p></li>
<li><p>SCIM users are never ephemeral (#1198)</p></li>
</ul>
</section>
</section>
<section id="id281">
<h1>2020-07-29<a class="headerlink" href="#id281" title="Permalink to this heading"></a></h1>
<section id="id282">
<h2>Release Notes<a class="headerlink" href="#id282" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>This release makes a couple of changes to the elasticsearch mapping and requires a data migration. The correct order of upgrade is:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#./docs/reference/elastic-search.md#update-mapping"><span class="xref myst">Update mapping</span></a></p></li>
<li><p>Upgrade brig as usual</p></li>
<li><p><a class="reference internal" href="#./docs/reference/elastic-search.md#migrate-data"><span class="xref myst">Run data migration</span></a>
Search should continue to work normally during this upgrade.</p></li>
</ol>
</li>
<li><p>Now with cargohold using V4 signatures, the region is part of the Authorization header, so please make sure it is configured correctly. This can be provided the same way as the AWS credentials, e.g. using the AWS_REGION environment variable.</p></li>
</ul>
</section>
<section id="id283">
<h2>Bug Fixes<a class="headerlink" href="#id283" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix member count of suspended teams in journal events (#1171)</p></li>
<li><p>Disallow team creation when setRestrictUserCreation is true (#1174)</p></li>
</ul>
</section>
<section id="id284">
<h2>New Features<a class="headerlink" href="#id284" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Pending invitations by email lookup (#1168)</p></li>
<li><p>Support s3 v4 signatures (and use package amazonka instead of aws in cargohold) (#1157)</p></li>
<li><p>Federation: Implement ID mapping (brig) (#1162)</p></li>
</ul>
</section>
<section id="id285">
<h2>Internal changes<a class="headerlink" href="#id285" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>SCIM cleanup; drop table <code class="docutils literal notranslate"><span class="pre">spar.scim_user</span></code> (#1169, #1172)</p></li>
<li><p>ormolu script: use ++FAILURES as it will not evaluate to 0 (#1178)</p></li>
<li><p>Refactor: Simplify SRV lookup logic in federation-util (#1175)</p></li>
<li><p>handy cqlsh make target to manually poke at the database (#1170)</p></li>
<li><p>hscim: add license headers (#1165)</p></li>
<li><p>Upgrade stack to 2.3.1 (#1166)</p></li>
<li><p>gundeck: drop deprecated tables (#1163)</p></li>
</ul>
</section>
</section>
<section id="id286">
<h1>2020-07-13<a class="headerlink" href="#id286" title="Permalink to this heading"></a></h1>
<section id="id287">
<h2>Release Notes<a class="headerlink" href="#id287" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>If you are self-hosting wire on the public internet, consider <a class="reference external" href="https://github.com/wireapp/wire-server/blob/49f414add470f4c5e969814a37bc851e26f6d9a7/docs/reference/user/registration.md#blocking-creation-of-personal-users-new-teams-refrestrictregistration">changing your brig server config</a>.</p></li>
<li><p>Deploy all services except nginz.</p></li>
<li><p>No migrations, no restrictions on deployment order.</p></li>
</ul>
</section>
<section id="id288">
<h2>New Features<a class="headerlink" href="#id288" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Restrict user creation in on-prem installations (#1161)</p></li>
<li><p>Implement active flag in SCIM for user suspension (#1158)</p></li>
</ul>
</section>
<section id="id289">
<h2>Bug Fixes<a class="headerlink" href="#id289" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix setting team feature status in Stern/backoffice (#1146)</p></li>
<li><p>Add missing Swagger models (#1153)</p></li>
<li><p>docs/reference/elastic-search.md: fix typos (#1154)</p></li>
</ul>
</section>
<section id="id290">
<h2>Internal changes<a class="headerlink" href="#id290" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Federation: Implement ID mapping (galley) (#1134)</p></li>
<li><p>Tweak cassandra container settings to get it to work on nixos. (#1155)</p></li>
<li><p>Merge wireapp/subtree-hscim repository under <code class="docutils literal notranslate"><span class="pre">/libs</span></code>, preserving history (#1152)</p></li>
<li><p>Add link to twilio message ID format (#1150)</p></li>
<li><p>Run backoffice locally (#1148)</p></li>
<li><p>Fix services-demo (#1149, #1156)</p></li>
<li><p>Add missing license headers (#1143)</p></li>
<li><p>Test sign up with invalid email (#1141)</p></li>
<li><p>Fix ormolu script (source code pretty-printing) (#1142)</p></li>
</ul>
</section>
</section>
<section id="id291">
<h1>2020-06-19<a class="headerlink" href="#id291" title="Permalink to this heading"></a></h1>
<section id="id292">
<h2>Release Notes<a class="headerlink" href="#id292" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>run galley schema migrations</p></li>
<li><p>no need to upgrade nginz</p></li>
</ul>
</section>
<section id="id293">
<h2>New Features<a class="headerlink" href="#id293" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add team level flag for digital signtaures (#1132)</p></li>
</ul>
</section>
<section id="id294">
<h2>Bug fixes<a class="headerlink" href="#id294" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Bump http-client (#1138)</p></li>
</ul>
</section>
<section id="id295">
<h2>Internal changes<a class="headerlink" href="#id295" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Script for finding undead users in elasticsearch (#1137)</p></li>
<li><p>DB changes for federation (#1070)</p></li>
<li><p>Refactor team feature tests (#1136)</p></li>
</ul>
</section>
</section>
<section id="id296">
<h1>2020-06-10<a class="headerlink" href="#id296" title="Permalink to this heading"></a></h1>
<section id="id297">
<h2>Release Notes<a class="headerlink" href="#id297" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>schema migration for cassandra_galley</p></li>
<li><p>promote stern <em>after</em> galley</p></li>
<li><p>promote spar <em>after</em> brig</p></li>
<li><p>no need to upgrade nginz</p></li>
</ul>
</section>
<section id="id298">
<h2>New Features<a class="headerlink" href="#id298" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Validate saml emails (#1113, #1122, #1129)</p></li>
</ul>
</section>
<section id="id299">
<h2>Documentation<a class="headerlink" href="#id299" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add a note about unused registration flow in docs (#1119)</p></li>
<li><p>Update cassandra-schema.cql (#1127)</p></li>
</ul>
</section>
<section id="id300">
<h2>Internal changes<a class="headerlink" href="#id300" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix incomplete pattern in code checking email domain (custom extensions) (#1130)</p></li>
<li><p>Enable additional GHC warnings (#1131)</p></li>
<li><p>Cleanup export list; swagger names. (#1126)</p></li>
</ul>
</section>
</section>
<section id="id301">
<h1>2020-06-03<a class="headerlink" href="#id301" title="Permalink to this heading"></a></h1>
<section id="id302">
<h2>Release Notes<a class="headerlink" href="#id302" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>This release fixes a bug with searching. To get this fix, a new elasticsearch index must be used.
The steps for doing this migration can be found in <a class="reference internal" href="#./docs/reference/elastic-search.md#migrate-to-a-new-index"><span class="xref myst">./docs/reference/elastic-search.md</span></a>
Alternatively the same index can be recreated instead, this will cause downtime.
The steps for the recreation can be found in <a class="reference internal" href="#./docs/reference/elastic-search.md#recreate-an-index-requires-downtime"><span class="xref myst">./docs/reference/elastic-search.md</span></a></p></li>
</ul>
</section>
<section id="id303">
<h2>New Features<a class="headerlink" href="#id303" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Customer Extensions (not documented, disabled by default, use at your own risk, <a class="reference external" href="https://github.com/wireapp/wire-server/blob/3a21a82a1781f0d128f503df6a705b0b5f733d7b/services/brig/src/Brig/Options.hs#L465-L504">details</a>) (#1108)</p></li>
<li><p>Upgrade emails to the latest version: small change in the footer (#1106)</p></li>
<li><p>Add new “team event queue” and send MemberJoin events on it (#1097, #1115)</p></li>
<li><p>Change maxTeamSize to Word32 to allow for larger teams (#1105)</p></li>
</ul>
</section>
<section id="id304">
<h2>Bug fixes<a class="headerlink" href="#id304" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Implement better prefix search for name/handle (#1052, #1124)</p></li>
<li><p>Base64 encode error details in HTML presented by Spar. (#1120)</p></li>
<li><p>Bump schemaVersion for Brig and Galley (#1118)</p></li>
</ul>
</section>
<section id="id305">
<h2>Internal Changes<a class="headerlink" href="#id305" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Copy swagger-ui bundle to nginz conf for integration tests (#1121)</p></li>
<li><p>Use wire-api types in public endpoints (galley, brig, gundeck, cargohold) (#1114, #1116, #1117)</p></li>
<li><p>wire-api: extend generic Arbitrary instances with implementation for ‘shrink’ (#1111)</p></li>
<li><p>api-client: depend on wire-api only (#1110)</p></li>
<li><p>Move and add wire-api JSON roundtrip tests (#1098)</p></li>
<li><p>Spar tests cleanup (#1100)</p></li>
</ul>
</section>
</section>
<section id="id306">
<h1>2020-05-15<a class="headerlink" href="#id306" title="Permalink to this heading"></a></h1>
<section id="id307">
<h2>New Features<a class="headerlink" href="#id307" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add tool to migrate data for galley (#1096)
This can be used in a more automated way than the backfill-billing-team-member.
It should be done as a step after deployment.</p></li>
</ul>
</section>
<section id="id308">
<h2>Internal Changes<a class="headerlink" href="#id308" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>More tests for OTR messages using protobuf (#1095)</p></li>
<li><p>Set brig’s logLevel to Warn while running integration-tests (#1099)</p></li>
<li><p>Refactor: Create wire-api package for types used in the public API (#1090)</p></li>
</ul>
</section>
</section>
<section id="id309">
<h1>2020-05-07<a class="headerlink" href="#id309" title="Permalink to this heading"></a></h1>
<section id="upgrade-steps-important">
<h2>Upgrade steps (IMPORTANT)<a class="headerlink" href="#upgrade-steps-important" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Deploy new version of all services as usual, make sure <code class="docutils literal notranslate"><span class="pre">enableIndexedBillingTeamMember</span></code> setting in galley is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p>Run backfill using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">CASSANDRA_HOST_GALLEY</span><span class="o">=</span>&lt;IP<span class="w"> </span>Address<span class="w"> </span>of<span class="w"> </span>one<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>galley<span class="w"> </span>cassandra<span class="w"> </span>instaces&gt;
<span class="nv">CASSANDRA_PORT_GALLEY</span><span class="o">=</span>&lt;port&gt;
<span class="nv">CASSANDRA_KEYSPACE_GALLEY</span><span class="o">=</span>&lt;GALLEY_KEYSPACE&gt;
docker<span class="w"> </span>run<span class="w"> </span>quay.io/wire/backfill-billing-team-members:2.81.18<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--cassandra-host-galley<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CASSANDRA_HOST_GALLEY</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--cassandra-port-galley<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CASSANDRA_PORT_GALLEY</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--cassandra-keyspace-galley<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CASSANDRA_KEYSPACE_GALLEY</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>You can also run the above using <a class="reference external" href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#run"><code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">run</span></code></a>.</p>
</li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">enableIndexedBillingTeamMember</span></code> setting in galley to <code class="docutils literal notranslate"><span class="pre">true</span></code> and re-deploy the same version.</p></li>
</ul>
</section>
<section id="id310">
<h2>New Features<a class="headerlink" href="#id310" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Custom search visibility - limit name search (#1086)</p></li>
<li><p>Add tool to backfill billing_team_member (#1089)</p></li>
<li><p>Index billing team members (#1081, #1091)</p></li>
<li><p>Allow team deletion on stern (#1080)</p></li>
<li><p>Do not fanout very large teams (#1060, #1075)</p></li>
</ul>
</section>
<section id="id311">
<h2>Bug fixes<a class="headerlink" href="#id311" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix licenses of db tools (#1088)</p></li>
</ul>
</section>
<section id="id312">
<h2>Internal Changes<a class="headerlink" href="#id312" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add docs for updating ID Provider (#1074)</p></li>
<li><p>Add comments/docs about hie.yaml (#1037)</p></li>
<li><p>Don’t poll from SQS as often (#1082)</p></li>
<li><p>Refactor: Split API modules into public/internal (#1083)</p></li>
<li><p>Manage license headers with headroom instead of licensure (#1084)</p></li>
<li><p>Monitor access to DynamoDB (#1077)</p></li>
<li><p>Make make docker-intermediate command work again (#1079)</p></li>
<li><p>Upgrade Ormolu to 0.0.5.0 (#1078)</p></li>
<li><p>Add (very few) unit tests to galley (#1071)</p></li>
<li><p>Pull brig-index before running the docker ephemeral setup (#1066)</p></li>
</ul>
</section>
</section>
<section id="id313">
<h1>2020-04-21<a class="headerlink" href="#id313" title="Permalink to this heading"></a></h1>
<section id="id314">
<h2>New Features<a class="headerlink" href="#id314" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Allow for <code class="docutils literal notranslate"><span class="pre">report_missing</span></code> in <code class="docutils literal notranslate"><span class="pre">NewOtrMessage</span></code>. (#1056, #1062)</p></li>
<li><p>List team members by UserId (#1048)</p></li>
<li><p>Support idp update.  (#1065 for issuer, #1026 for everything else)</p></li>
<li><p>Support synchronous purge-deletion of idps (via query param).  (#1068)</p></li>
</ul>
</section>
<section id="id315">
<h2>Bug fixes<a class="headerlink" href="#id315" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Test that custom backend domains are case-insensitive (#1051)</p></li>
<li><p>Swagger improvements. (#1059, #1054)</p></li>
</ul>
</section>
<section id="id316">
<h2>Internal Changes<a class="headerlink" href="#id316" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Count team members using es (#1046)</p></li>
<li><p>Make delete or downgrade team owners scale (#1029)</p></li>
<li><p>services-demo/demo.sh: mkdir zauth (if not exists) (#1055)</p></li>
<li><p>Use fork of bloodhound to support ES 5.2 (#1050)</p></li>
</ul>
</section>
</section>
<section id="id317">
<h1>2020-04-15<a class="headerlink" href="#id317" title="Permalink to this heading"></a></h1>
<section id="id318">
<h2>Upgrade steps (IMPORTANT)<a class="headerlink" href="#id318" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Update mapping in ElasticSearch (see <a class="reference internal" href="#./docs/reference/elastic-search.md"><span class="xref myst">./docs/reference/elastic-search.md</span></a>)</p></li>
<li><p>Upgrade brig and the other services as usual</p></li>
<li><p>Migrate data in ElasticSearch (see <a class="reference internal" href="#./docs/reference/elastic-search.md"><span class="xref myst">./docs/reference/elastic-search.md</span></a>)</p></li>
</ol>
</section>
<section id="id319">
<h2>New features<a class="headerlink" href="#id319" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Allow <code class="docutils literal notranslate"><span class="pre">brig-index</span> <span class="pre">create</span></code> to set ES index settings (#1023)</p></li>
<li><p>Extended team invitations to have name and phone number (#1032)</p></li>
<li><p>Allow team members to be searched by teammates. (#964)</p></li>
<li><p>Better defaults for maxKeyLen and maxValueLen (#1034)</p></li>
</ul>
</section>
<section id="id320">
<h2>Bug Fixes<a class="headerlink" href="#id320" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix swagger (#1012, #1031)</p></li>
<li><p>Custom backend lookup by domain is now case-insensitive (#1013)</p></li>
</ul>
</section>
<section id="id321">
<h2>Internal Changes<a class="headerlink" href="#id321" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Federation: resolve opaque IDs at the edges of galley (#1008)</p></li>
<li><p>Qualify all API imports in Galley (#1006)</p></li>
<li><p>types-common: write unit tests for Data.Qualified (#1011)</p></li>
<li><p>Remove subv4 (#1003)</p></li>
<li><p>Add federation feature flag to brig and galley (#1014)</p></li>
<li><p>Add hie.yaml (#1024)</p></li>
<li><p>Improve reproducibility of builds (#1027)</p></li>
<li><p>Update types of some brig endpoints to be federation-aware (#1013)</p></li>
<li><p>Bump to lts-14.27 (#1030)</p></li>
<li><p>Add comments about which endpoints send which events to clients (#1025)</p></li>
<li><p>Minimize dependencies of all brig binaries (#1035)</p></li>
<li><p>Federation: Use status 403 for ‘not implemented’ (#1036)</p></li>
<li><p>Add endpoint to count team members using ES (#1022)</p></li>
<li><p>Rename brig’s userName to userDisplayName to avoid confusion (#1039)</p></li>
<li><p>Upgrade to restund 0.4.14 (#1043)</p></li>
<li><p>Add license headers to all files (#980, #1045)</p></li>
<li><p>Federation: Link related issue IDs (#1041)</p></li>
</ul>
</section>
</section>
<section id="id322">
<h1>2020-03-10<a class="headerlink" href="#id322" title="Permalink to this heading"></a></h1>
<section id="id323">
<h2>New features<a class="headerlink" href="#id323" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove autoconnect functionality; deprecate end-point. (#1005)</p></li>
<li><p>Email visible to all users in same team (#999)</p></li>
</ul>
</section>
<section id="id324">
<h2>Bug fixes<a class="headerlink" href="#id324" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>fix nginx permissions in docker image (#985)</p></li>
</ul>
</section>
<section id="significant-internal-changes">
<h2>Significant internal changes<a class="headerlink" href="#significant-internal-changes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Update nginx to latest stable (#725)</p></li>
</ul>
</section>
<section id="id325">
<h2>Internal Changes<a class="headerlink" href="#id325" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>ormolu.sh: make queries for options more robust (#1009)</p></li>
<li><p>Run hscim azure tests (#941)</p></li>
<li><p>move FUTUREWORK(federation) comment to right place</p></li>
<li><p>stack snapshot 3.0. (#1004, works around 8697b57609b523905641f943d68bbbe18de110e8)</p></li>
<li><p>Fix .gitignore shenanigans in Nix (#1002)</p></li>
<li><p>Update types of some galley endpoints to be federation-aware (#1001)</p></li>
<li><p>Cleanup (#1000)</p></li>
<li><p>Compile nginx with libzauth using nix (#988)</p></li>
<li><p>Move and create federation-related types (#997)</p></li>
<li><p>Tweak ormolu script. (#998)</p></li>
<li><p>Give handlers in gundeck, cannon stronger types (#990)</p></li>
<li><p>Rename cassandra-schema.txt to cassandra-schema.cql (#992)</p></li>
<li><p>Ignore dist-newstyle (#991)</p></li>
<li><p>Refactor: separate HTTP handlers from app logic (galley) (#989)</p></li>
<li><p>Mock federator (#986)</p></li>
<li><p>Eliminate more CPP (#987)</p></li>
<li><p>Cleanup compiler warnings (#984)</p></li>
<li><p>Make ormolu available in builder (#983)</p></li>
</ul>
</section>
</section>
<section id="id326">
<h1>2020-02-27<a class="headerlink" href="#id326" title="Permalink to this heading"></a></h1>
<section id="hotfix">
<h2>Hotfix<a class="headerlink" href="#hotfix" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix encoding bug in SAML SSO (#995)</p></li>
</ul>
</section>
</section>
<section id="id327">
<h1>2020-02-06<a class="headerlink" href="#id327" title="Permalink to this heading"></a></h1>
<section id="id328">
<h2>New features<a class="headerlink" href="#id328" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Configure max nr of devices (#969)</p></li>
<li><p>libs/federation-util: SRV resolution (#962)</p></li>
</ul>
</section>
<section id="id329">
<h2>Significant internal changes<a class="headerlink" href="#id329" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Better docs on brig integration yaml (#973)</p></li>
</ul>
</section>
<section id="id330">
<h2>Internal changes<a class="headerlink" href="#id330" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove unnecessary LANGUAGE CPP pragmas (#978)</p></li>
<li><p>Introduce code formatting with ormolu (#974, #979)</p></li>
<li><p>Soften a rarely occurring timing issue by slowing things down. (#975)</p></li>
<li><p>debug spar prod (#977)</p></li>
<li><p>Upgrade amazonka (abandon fork) (#976)</p></li>
<li><p>remove unused imports</p></li>
<li><p>Symlink local dist folders in tools to the global one (#971, similar to #904)</p></li>
<li><p>Upgrade to GHC 8.6.5 (LTS 14.12) (#958)</p></li>
<li><p>Refactor: separate http parsing / generation from app logic. (#967)</p></li>
<li><p>spar/integration: no auth required for /sso/settings (#963)</p></li>
</ul>
</section>
</section>
<section id="id331">
<h1>2020-02-06<a class="headerlink" href="#id331" title="Permalink to this heading"></a></h1>
<section id="id332">
<h2>New features<a class="headerlink" href="#id332" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>SCIM top level extra attrs / rich info (#931)</p>
<ul>
<li><p>Added to all endpoints under “/scim/v2”</p></li>
</ul>
</li>
<li><p>Create endpoint for default SSO code (#954)</p>
<ul>
<li><p>New public endpoint:</p>
<ul>
<li><p>GET “/sso/settings”</p></li>
</ul>
</li>
<li><p>New private endpoint:</p>
<ul>
<li><p>PUT “/i/sso/settings”</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="relevant-for-client-developers">
<h2>Relevant for client developers<a class="headerlink" href="#relevant-for-client-developers" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>add docs for default sso code (#960)</p></li>
<li><p>Add missing options to services-demo config files (#961)</p></li>
</ul>
</section>
<section id="security-fixes">
<h2>Security fixes<a class="headerlink" href="#security-fixes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove verifcation code from email subject line. (#950)</p></li>
</ul>
</section>
<section id="id333">
<h2>Internal changes<a class="headerlink" href="#id333" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Whitespace (#957)</p></li>
</ul>
</section>
</section>
<section id="id334">
<h1>2020-01-30<a class="headerlink" href="#id334" title="Permalink to this heading"></a></h1>
<section id="api-changes-relevant-client-developers">
<h2>API changes (relevant client developers)<a class="headerlink" href="#api-changes-relevant-client-developers" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Allow up to 256 characters as handle, dots and dashes too (#953)</p>
<ul>
<li><p>All handles related endpoints, namely:</p>
<ul>
<li><p>POST “/users/handles”</p></li>
<li><p>HEAD “/users/handles/:handle”</p></li>
<li><p>GET “/users/handles/:handle”</p></li>
</ul>
</li>
<li><p>now accept this new format of handles</p></li>
</ul>
</li>
<li><p>Refuse to delete non-empty IdPs (412 precondition failed) (#875)</p>
<ul>
<li><p>DELETE “identity-providers/:idp” will now return 412 if there are users provisioned with that IDP</p></li>
</ul>
</li>
<li><p>Linear onboarding feature: Provide information about custom backends (#946)</p>
<ul>
<li><p>New public endpoint:</p>
<ul>
<li><p>GET “/custom-backend/by-domain/:domain”</p></li>
</ul>
</li>
<li><p>New interal endpoints:</p>
<ul>
<li><p>PUT “/i/custom-backend/by-domain/:domain”</p></li>
<li><p>DELETE “/i/custom-backend/by-domain/:domain”</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="id335">
<h2>Bug fixes<a class="headerlink" href="#id335" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Make sure that someone is SSO user before setting ManagedBy (#947)</p></li>
<li><p>Misc SCIM bugfixes (#948)</p></li>
</ul>
</section>
<section id="id336">
<h2>Internal changes<a class="headerlink" href="#id336" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix complexity issue in cassandra query. (#942)</p></li>
<li><p>Remove collectd metrics (finally!) (#940)</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">cargoSha256</span></code> for cryptobox-c in stack-deps.nix (#949)</p></li>
</ul>
</section>
</section>
<section id="id337">
<h1>2020-01-08<a class="headerlink" href="#id337" title="Permalink to this heading"></a></h1>
<section id="relevant-for-self-hosters">
<h2>Relevant for self-hosters<a class="headerlink" href="#relevant-for-self-hosters" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Handle search within team (#921)</p></li>
<li><p>Fixed logic with connection checks (#930)</p></li>
</ul>
</section>
<section id="id338">
<h2>Relevant for client developers<a class="headerlink" href="#id338" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>SCIM Fixes Phase 1 + 2 (#926)</p></li>
</ul>
</section>
<section id="id339">
<h2>Bug fixes<a class="headerlink" href="#id339" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Stack nix fixes (#937)</p></li>
</ul>
</section>
</section>
<section id="id340">
<h1>2019-12-20<a class="headerlink" href="#id340" title="Permalink to this heading"></a></h1>
<section id="id341">
<h2>Relevant for self-hosters<a class="headerlink" href="#id341" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Access tokens are now sanitized on nginz logs (#920)</p></li>
</ul>
</section>
<section id="id342">
<h2>Relevant for client developers<a class="headerlink" href="#id342" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Conversation roles (#911)</p>
<ul>
<li><p>Users joining by link are always members (#924) and (#927)</p></li>
</ul>
</li>
</ul>
</section>
<section id="id343">
<h2>Bug fixes<a class="headerlink" href="#id343" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Limit batch size when adding users to conversations (#923)</p></li>
<li><p>Fixed user property integration test (#922)</p></li>
</ul>
</section>
</section>
<section id="id344">
<h1>2019-11-28<a class="headerlink" href="#id344" title="Permalink to this heading"></a></h1>
<section id="id345">
<h2>Relevant for client developers<a class="headerlink" href="#id345" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove unnecessary fanout team events (#915)</p></li>
</ul>
</section>
<section id="id346">
<h2>Bug fixes<a class="headerlink" href="#id346" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>SCIM fixes Phase 0: User creation in correct order (#905)</p></li>
</ul>
</section>
<section id="id347">
<h2>Internal changes<a class="headerlink" href="#id347" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Gundeck: Use polledMapConcurrently (#914)</p></li>
</ul>
</section>
</section>
<section id="id348">
<h1>2019-11-06 #901<a class="headerlink" href="#id348" title="Permalink to this heading"></a></h1>
<section id="id349">
<h2>Relevant for self-hosters<a class="headerlink" href="#id349" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>New configuration options available (none mandatory). See #895 #900 #869</p></li>
</ul>
</section>
<section id="id350">
<h2>Relevant for client developers<a class="headerlink" href="#id350" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Support HEAD requests for <code class="docutils literal notranslate"><span class="pre">/sso/initiate-bind</span></code> (#878)</p></li>
</ul>
</section>
<section id="id351">
<h2>Bug fixes<a class="headerlink" href="#id351" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Do not send conversation delete events to team members upon team deletion (#897)</p></li>
<li><p>Support SNI for bot registrations (by bumping http-client version) (#899)</p></li>
</ul>
</section>
<section id="id352">
<h2>Internal changes<a class="headerlink" href="#id352" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Make gundeck handle AWS outages better. (#869, #890, #892)</p></li>
<li><p>Improve performance by avoiding unbounded intra-service traffic spikes on team deletions (#900)</p></li>
<li><p>Add optional native push connection throttling (#895)</p></li>
<li><p>New backoffice/stern endpoint (#896)</p></li>
<li><p>SAML: Store raw idp metadata with typed details in c* (#872)</p></li>
<li><p>documentation/script updates</p></li>
</ul>
</section>
</section>
<section id="id353">
<h1>2019-09-30 #868<a class="headerlink" href="#id353" title="Permalink to this heading"></a></h1>
<section id="id354">
<h2>Relevant for self-hosters<a class="headerlink" href="#id354" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>More information is logged about user actions (#856)</p></li>
</ul>
</section>
<section id="id355">
<h2>Relevant for client developers<a class="headerlink" href="#id355" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Make team member property size configurable (#867)</p></li>
</ul>
</section>
<section id="id356">
<h2>Bug fixes<a class="headerlink" href="#id356" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix bugs related to metrics (#853, #866)</p></li>
<li><p>Sneak up on flaky test. (#863)</p></li>
</ul>
</section>
<section id="id357">
<h2>Internal Changes<a class="headerlink" href="#id357" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Derive Generic everywhere (#864)</p></li>
<li><p>Add issue templates (#862)</p></li>
<li><p>Cleanup stern (#845)</p></li>
<li><p>Log warnings only when users are suspended (#854)</p></li>
<li><p>Documentation update for restund and smoketester (#855)</p></li>
</ul>
</section>
</section>
<section id="id358">
<h1>2019-09-16 #858<a class="headerlink" href="#id358" title="Permalink to this heading"></a></h1>
<section id="id359">
<h2>Relevant for self-hosters<a class="headerlink" href="#id359" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Documentation changes for Twilio configurations and TURN setup. (#775)</p></li>
</ul>
</section>
<section id="id360">
<h2>Relevant for client developers<a class="headerlink" href="#id360" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Better events for deletion of team conversations (also send <code class="docutils literal notranslate"><span class="pre">conversation.delete</span></code> to team members) (#849)</p></li>
<li><p>Add a new type of authorization tokens for legalhold (for details on legalhold, see https://github.com/wireapp/wire-server/blob/develop/docs/reference/team/legalhold.md) (#761)</p></li>
</ul>
</section>
<section id="id361">
<h2>Bug fixes<a class="headerlink" href="#id361" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix swagger docs. (#852)</p></li>
<li><p>Fix intra call in stern (aka customer support, aka backoffice) (#844)</p></li>
</ul>
</section>
<section id="id362">
<h2>Internal Changes<a class="headerlink" href="#id362" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Change feature flags from boolean to custom enum types. (#850)</p></li>
<li><p>Fix flaky integration test. (#848)</p></li>
<li><p>Cleanup: incoherent functions for response body parsing. (#847)</p></li>
<li><p>add route for consistency (#851)</p></li>
</ul>
</section>
</section>
<section id="id363">
<h1>2019-09-03 #843<a class="headerlink" href="#id363" title="Permalink to this heading"></a></h1>
<section id="id364">
<h2>Relevant for self-hosters<a class="headerlink" href="#id364" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Option for limiting login retries (#830)</p></li>
<li><p>Option for suspending inactive users (#831)</p></li>
<li><p>Add json logging (#828) (#836)</p></li>
<li><p>Feature Flags in galley options. (#825)</p></li>
</ul>
</section>
<section id="id365">
<h2>Relevant for client developers<a class="headerlink" href="#id365" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Specialize the error cases on conversation lookup. (#841)</p></li>
</ul>
</section>
<section id="id366">
<h2>Bug fixes<a class="headerlink" href="#id366" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix is-team-owner logic (don’t require email in all cases) (#833)</p></li>
<li><p>Typos in swagger (#826)</p></li>
</ul>
</section>
<section id="id367">
<h2>Internal changes<a class="headerlink" href="#id367" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix flaky integration test. (#834)</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">exposed-modules</span></code> sections from all package.yaml files. (#832)</p></li>
<li><p>Remove Debug.Trace from Imports. (#838)</p></li>
<li><p>Cleanup integration tests (#839)</p></li>
</ul>
</section>
</section>
<section id="id368">
<h1>2019-08-08 #822<a class="headerlink" href="#id368" title="Permalink to this heading"></a></h1>
<section id="id369">
<h2>Features<a class="headerlink" href="#id369" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>legalhold (#802), but block feature activation (#823)</p></li>
<li><p>a few shell scripts for self-hosters (#805, #801)</p></li>
<li><p>Release nginz_disco (#759)</p></li>
</ul>
</section>
<section id="public-api-changes">
<h2>Public API changes<a class="headerlink" href="#public-api-changes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>SSO is disabled by default now; but enabled for all teams that already have an IdP.</p></li>
<li><p>feature flags (starting with legalhold, sso) (#813, #818)</p>
<ul>
<li><p>new public end-points (#813, #818):</p>
<ul>
<li><p>get “/teams/:tid/features/legalhold”</p></li>
<li><p>get “/teams/:tid/features/sso”</p></li>
</ul>
</li>
<li><p>new internal end-points:</p>
<ul>
<li><p>get “/i/teams/:tid/features/legalhold”</p></li>
<li><p>get “/i/teams/:tid/features/sso”</p></li>
<li><p>put “/i/teams/:tid/features/legalhold”</p></li>
<li><p>put “/i/teams/:tid/features/sso”</p></li>
</ul>
</li>
<li><p>new backoffice end-points:</p>
<ul>
<li><p>get “/teams/:tid/features/legalhold”</p></li>
<li><p>get “/teams/:tid/features/sso”</p></li>
<li><p>put “/teams/:tid/features/legalhold”</p></li>
<li><p>put “/teams/:tid/features/sso”</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Always throw json errors, never plaintext (#722, #814)</p></li>
<li><p>Register IdP: allow json bodies with xml strings (#722)</p></li>
</ul>
</section>
<section id="backend-internal-changes">
<h2>Backend-internal changes<a class="headerlink" href="#backend-internal-changes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[stern aka backoffice] allow galeb returning a 404 (#820)</p></li>
<li><p>Cleanup logging (#816, #819)</p></li>
<li><p>Canonicalize http request path capture names (#808, #809)</p></li>
<li><p>Galley depends on libsodium too now (#807)</p></li>
<li><p>Add generics instances to common, brig, galley types. (#804)</p></li>
<li><p>Upgrade CQL protocol version to V4 (#763)</p></li>
<li><p>Log last prekey used only at debug level (#785)</p></li>
<li><p>Cleanup (#799)</p></li>
</ul>
</section>
</section>
<section id="id370">
<h1>2019-07-08 #798<a class="headerlink" href="#id370" title="Permalink to this heading"></a></h1>
<section id="id371">
<h2>Internal Changes<a class="headerlink" href="#id371" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>restund: add EXTRA_CFLAGS  to work on ubuntu 16 (#788)</p></li>
<li><p>Fix flaky unit test. (#770)</p></li>
<li><p>Add upstream references in stack.yaml deps (wai-middleware-prometheus). (#760)</p></li>
<li><p>Cannon analytics (2) (#750)</p></li>
<li><p>fix this file.</p></li>
</ul>
</section>
</section>
<section id="id372">
<h1>2019-05-13 #756<a class="headerlink" href="#id372" title="Permalink to this heading"></a></h1>
<section id="documentation-changes">
<h2>Documentation changes<a class="headerlink" href="#documentation-changes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Group provisioning (#748)</p></li>
<li><p>Instructions for running load tests (#738)</p></li>
<li><p>Twilio configuration (#733)</p></li>
</ul>
</section>
<section id="id373">
<h2>Bug fixes<a class="headerlink" href="#id373" title="Permalink to this heading"></a></h2>
<p>Cannon no longer reports 500s in the prometheus metrics when establishing websocket connections. (#751, #754)</p>
</section>
<section id="id374">
<h2>Features<a class="headerlink" href="#id374" title="Permalink to this heading"></a></h2>
<p>Per-installation flag: Allow displaying emails of users in a team (code from #724, see description in #719)</p>
</section>
<section id="id375">
<h2>Internal Changes<a class="headerlink" href="#id375" title="Permalink to this heading"></a></h2>
<p>Docker image building improvements (#755)</p>
</section>
<section id="changes-potentially-requiring-action-for-self-hosters">
<h2>Changes (potentially) requiring action for self-hosters<a class="headerlink" href="#changes-potentially-requiring-action-for-self-hosters" title="Permalink to this heading"></a></h2>
<p>Config value <code class="docutils literal notranslate"><span class="pre">setEmailVisibility</span></code> must be set in brig’s config file (if you’re not sure, <code class="docutils literal notranslate"><span class="pre">visible_to_self</span></code> is the preferred default)</p>
</section>
</section>
<section id="id376">
<h1>2019-05-02 #746<a class="headerlink" href="#id376" title="Permalink to this heading"></a></h1>
<section id="id377">
<h2>Documentation changes<a class="headerlink" href="#id377" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Improved Cassandra documentation in <code class="docutils literal notranslate"><span class="pre">docs/README.md</span></code></p></li>
<li><p>Improved documentation on SCIM storage in <code class="docutils literal notranslate"><span class="pre">docs/README.md</span></code></p></li>
<li><p>Improved documentation on SCIM Tokens in <code class="docutils literal notranslate"><span class="pre">docs/reference/provisioning/scim-token.md</span></code></p></li>
</ul>
</section>
<section id="id378">
<h2>Bug fixes<a class="headerlink" href="#id378" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Sanitize metric names to be valid prometheus names in metrics-core</p></li>
<li><p>Add missing a <code class="docutils literal notranslate"><span class="pre">.git</span></code> suffix on gitlab dependencies in stack.yaml</p></li>
<li><p>Time bounds checks now allow 60s of tolerance; this is helpful in cases of drifting clocks (#730)</p></li>
</ul>
</section>
<section id="id379">
<h2>Features<a class="headerlink" href="#id379" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Services now provide Prometheus metrics on <code class="docutils literal notranslate"><span class="pre">/i/metrics</span></code></p></li>
<li><p>Garbage Collection and memory statistics are available alongside other prometheus metrics</p></li>
</ul>
</section>
<section id="id380">
<h2>Internal Changes<a class="headerlink" href="#id380" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Alpine Builder is no longer built with <code class="docutils literal notranslate"><span class="pre">--profile</span></code></p></li>
<li><p>SCIM users now have an additional wire-specific schema attached.</p></li>
</ul>
</section>
<section id="changes-potentially-requiring-action">
<h2>Changes (potentially) requiring action<a class="headerlink" href="#changes-potentially-requiring-action" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/i/monitoring</span></code> is <em>DEPRECATED</em>. Please use prometheus metrics provided by <code class="docutils literal notranslate"><span class="pre">/i/metrics</span></code> instead.</p></li>
<li><p>On password reset the new password must be different than the old one</p></li>
<li><p>Stern is now available as a new tool for performing adminstrative tasks via API (#720)</p></li>
<li><p>SCIM handler errors are now reported according to SCIM error schema (#575)</p></li>
</ul>
</section>
</section>
<section id="id381">
<h1>2019-04-09 #710<a class="headerlink" href="#id381" title="Permalink to this heading"></a></h1>
<section id="id382">
<h2>API changes<a class="headerlink" href="#id382" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Do not allow provisioning saml users if SCIM is configured (#706)</p></li>
</ul>
</section>
<section id="id383">
<h2>Documentation changes<a class="headerlink" href="#id383" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Docs for user deletion via SCIM. (#691)</p></li>
<li><p>Docs for jump-to-definition with Emacs (#693)</p></li>
<li><p>Add missing config options in demo (#694)</p></li>
<li><p>Move the connections doc, add haddocks (#695)</p></li>
</ul>
</section>
<section id="id384">
<h2>Bug fixes<a class="headerlink" href="#id384" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix templating in outgoing SMSs. (#696)</p></li>
<li><p>Saml implicit user creation no longer chokes on odd but legal names. (#702)</p></li>
<li><p>Fix: user deletion via scim (#698)</p></li>
</ul>
</section>
<section id="id385">
<h2>Internal changes<a class="headerlink" href="#id385" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove redundant cassandra write in renewCookie (#676)</p></li>
<li><p>Add Prometheus middleware for wire-services (#672)</p></li>
<li><p>Improve logging of spar errors (#654)</p></li>
<li><p>Upgrade cql-io-1.1.0 (#697)</p></li>
<li><p>Switch metrics-core to be backed by Prometheus (#704)</p></li>
<li><p>Refactorings:</p>
<ul>
<li><p>#665, #687, #685, #686</p></li>
</ul>
</li>
</ul>
</section>
<section id="id386">
<h2>Changes (potentially) requiring action for self-hosters<a class="headerlink" href="#id386" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Switch proxy to use YAML-only config (#684)</p></li>
</ul>
</section>
</section>
<section id="id387">
<h1>2019-03-25 #674<a class="headerlink" href="#id387" title="Permalink to this heading"></a></h1>
<section id="id388">
<h2>API changes<a class="headerlink" href="#id388" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>SCIM delete user endpoint (#660)</p></li>
<li><p>Require reauthentication when creating a SCIM token (#639)</p></li>
<li><p>Disallow duplicate external ids via SCIM update user (#657)</p></li>
</ul>
</section>
<section id="id389">
<h2>Documentation changes<a class="headerlink" href="#id389" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Make an index for the docs/ (#662)</p></li>
<li><p>Docs: using scim with curl. (#659)</p></li>
<li><p>Add spar to the arch diagram. (#650)</p></li>
</ul>
</section>
<section id="id390">
<h2>Bug fixes<a class="headerlink" href="#id390" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>ADFS-workaround for SAML2 authn response signature validation. (#670)</p></li>
<li><p>Fix: empty objects <code class="docutils literal notranslate"><span class="pre">{}</span></code> are valid TeamMemberDeleteData. (#652)</p></li>
<li><p>Better logo rendering in emails (#649)</p></li>
</ul>
</section>
<section id="id391">
<h2>Internal changes<a class="headerlink" href="#id391" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Remove some unused instances (#671)</p></li>
<li><p>Reusable wai middleware for prometheus (for Galley only for now) (#669)</p></li>
<li><p>Bump cql-io dep from merge request to latest release. (#661)</p></li>
<li><p>docker image building for all of the docker images our integration tests require. (#622, #668)</p></li>
<li><p>Checking for 404 is flaky; depends on deletion succeeding (#667)</p></li>
<li><p>Refactor Galley Tests to use Reader Pattern (#666)</p></li>
<li><p>Switch Cargohold to YAML-only config (#653)</p></li>
<li><p>Filter newlines in log output.  (#642)</p></li>
</ul>
</section>
</section>
<section id="id392">
<h1>2019-02-28 #648<a class="headerlink" href="#id392" title="Permalink to this heading"></a></h1>
<section id="id393">
<h2>API changes<a class="headerlink" href="#id393" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Support for SCIM based rich profiles (#645)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/scim/v2/Users/:id</span></code> supports rich profile</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/users/:id/rich-info</span></code> to get the rich profile id</p></li>
</ul>
</li>
</ul>
</section>
<section id="id394">
<h2>Internal changes<a class="headerlink" href="#id394" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Gundeck now uses YAML based config</p></li>
<li><p>Brig templates can now be easily customized and have been updated too</p></li>
<li><p>Misc improvements to our docs and build processes</p></li>
</ul>
</section>
</section>
<section id="id395">
<h1>2019-02-18 #646<a class="headerlink" href="#id395" title="Permalink to this heading"></a></h1>
<section id="id396">
<h2>API changes<a class="headerlink" href="#id396" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>n/a</p></li>
</ul>
</section>
<section id="id397">
<h2>Bug fixes<a class="headerlink" href="#id397" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>SAML input sanitization (#636)</p></li>
</ul>
</section>
<section id="id398">
<h2>Internal changes<a class="headerlink" href="#id398" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>helper script for starting services only without integration tests (#641)</p></li>
<li><p>Scim error handling (#640)</p></li>
<li><p>Gundeck: cleanup, improve logging (#628)</p></li>
</ul>
</section>
</section>
<section id="id399">
<h1>2019-02-18 #634<a class="headerlink" href="#id399" title="Permalink to this heading"></a></h1>
<section id="id400">
<h2>API changes<a class="headerlink" href="#id400" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Support for SCIM (#559, #608, #602, #613, #617, #614, #620, #621, #627)</p>
<ul>
<li><p>several new end-points under <code class="docutils literal notranslate"><span class="pre">/scim</span></code> (see hscim package or the standards for the details; no swagger docs).</p></li>
<li><p>new end-point <code class="docutils literal notranslate"><span class="pre">put</span> <span class="pre">&quot;/i/users/:uid/managed-by&quot;</span></code> for marking scim-managed users (no swagger docs)</p></li>
</ul>
</li>
<li><p>Add support for excluding certain phone number prefixes (#593)</p>
<ul>
<li><p>several new end-points under <code class="docutils literal notranslate"><span class="pre">/i/users/phone-prefixes/</span></code> (no swagger docs)</p></li>
</ul>
</li>
<li><p>Fix SAML2.0 compatibility issues in Spar (#607, #623)</p></li>
</ul>
</section>
<section id="id401">
<h2>Bug fixes<a class="headerlink" href="#id401" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Update swagger docs (#598)</p></li>
</ul>
</section>
<section id="id402">
<h2>Internal changes<a class="headerlink" href="#id402" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Architecture independence, better use of make features, more docs. (#594)</p></li>
<li><p>Fix nginz docker image building (#605)</p></li>
<li><p>Enable journaling locally and fix integration tests (#606)</p></li>
<li><p>Use network-2.7 for more informative “connection failed” errors (#586)</p></li>
<li><p>Use custom snapshots (#597)</p></li>
<li><p>Add module documentation for all Spar modules (#611)</p></li>
<li><p>Change the bot port in integration tests to something less common (#618)</p></li>
<li><p>Spar metrics (#604, #633)</p></li>
<li><p>Extend the list of default language extensions (#619)</p></li>
<li><p>Fix: do not have newlines in log messages. (#625)</p></li>
</ul>
</section>
</section>
<section id="id403">
<h1>2019-01-27 #596<a class="headerlink" href="#id403" title="Permalink to this heading"></a></h1>
<section id="id404">
<h2>API changes<a class="headerlink" href="#id404" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Track inviters of team members (#566)</p></li>
<li><p>New partner role. (#569, #572, #573, #576, #579, #584, #577, #592)</p></li>
<li><p>App-level websocket pongs. (#561)</p></li>
</ul>
</section>
<section id="id405">
<h2>Bug fixes<a class="headerlink" href="#id405" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Spar re-login deleted sso users; fix handling of brig errors. (#588)</p></li>
<li><p>Gundeck: lost push notifications with push-all enabled.  (#554)</p></li>
<li><p>Gundeck: do not push natively to devices if they are not on the whitelist.  (#554)</p></li>
<li><p>Gundeck: link gundeck unit tests with -threaded.  (#554)</p></li>
</ul>
</section>
<section id="id406">
<h2>Internal changes<a class="headerlink" href="#id406" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Get rid of async-pool (unliftio now provides the same functionality) (#568)</p></li>
<li><p>Fix: log multi-line error messages on one line. (#595)</p></li>
<li><p>Whitelist all wire.com email addresses (#578)</p></li>
<li><p>SCIM -&gt; Scim (#581)</p></li>
<li><p>Changes to make the demo runnable from Docker (#571)</p></li>
<li><p>Feature/docker image consistency (#570)</p></li>
<li><p>add a readme, for how to build libzauth. (#591)</p></li>
<li><p>better support debian style machines of different architecturs (#582, #587, #583, #585, #590, #580)</p></li>
</ul>
</section>
</section>
<section id="id407">
<h1>2019-01-10 #567<a class="headerlink" href="#id407" title="Permalink to this heading"></a></h1>
<section id="id408">
<h2>API changes<a class="headerlink" href="#id408" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sigkeys</span></code> attribute on POST|PUT to <code class="docutils literal notranslate"><span class="pre">/clients</span></code> is now deprecated and ignored (clients can stop sending it)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cancel_callback</span></code> parameter on GET <code class="docutils literal notranslate"><span class="pre">/notifications</span></code> is now deprecated and ignored (clients can stop sending it)</p></li>
<li><p>The deprecated <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/push/fallback/&lt;notif&gt;/cancel</span></code> is now removed.</p></li>
<li><p>The deprecated <code class="docutils literal notranslate"><span class="pre">tokenFallback</span></code> field returned on <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/push/tokens</span></code> is now removed.</p></li>
</ul>
</section>
<section id="id409">
<h2>Bug fixes<a class="headerlink" href="#id409" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Size-restrict SSO subject identities (#557)</p></li>
<li><p>Propagate team deletions to spar (#519)</p></li>
<li><p>Allow using <code class="docutils literal notranslate"><span class="pre">$arg_name</span></code> in nginz (#538)</p></li>
</ul>
</section>
<section id="id410">
<h2>Internal changes<a class="headerlink" href="#id410" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Version upgrades to GHC 8.4 (LTS-12), nginx 14.2, alpine 3.8 (#527, #540)</p></li>
<li><p>Code refactoring, consitency with Imports.hs (#543, #553, #552)</p></li>
<li><p>Improved test coverage on spar (#539)</p></li>
<li><p>Use yaml configuration in cannon (#555)</p></li>
</ul>
</section>
<section id="others">
<h2>Others<a class="headerlink" href="#others" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Docs and local dev/demo improvements</p></li>
</ul>
</section>
</section>
<section id="id411">
<h1>2018-12-07 #542<a class="headerlink" href="#id411" title="Permalink to this heading"></a></h1>
<section id="id412">
<h2>API changes<a class="headerlink" href="#id412" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>New API endpoint (<code class="docutils literal notranslate"><span class="pre">/properties-values</span></code>) to get all properties keys and values</p></li>
</ul>
</section>
<section id="id413">
<h2>Bug fixes<a class="headerlink" href="#id413" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Proper JSON object encapsulation for <code class="docutils literal notranslate"><span class="pre">conversation.receipt-mode-update</span></code> events (#535)</p></li>
<li><p>Misc Makefile related changes to improve dev workflow</p></li>
</ul>
</section>
<section id="id414">
<h2>Internal changes<a class="headerlink" href="#id414" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Gundeck now pushes events asynchronously after writing to Cassandra (#530)</p></li>
</ul>
</section>
</section>
<section id="id415">
<h1>Others<a class="headerlink" href="#id415" title="Permalink to this heading"></a></h1>
<ul class="simple">
<li><p>Improved docs (yes!) with (#528)</p></li>
</ul>
</section>
<section id="id416">
<h1>2018-11-28 #527<a class="headerlink" href="#id416" title="Permalink to this heading"></a></h1>
<section id="id417">
<h2>Bug fixes<a class="headerlink" href="#id417" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Spar now handles base64 input more leniently (#526)</p></li>
<li><p>More lenient IdP metadata parsing (#522)</p></li>
</ul>
</section>
<section id="id418">
<h2>Internal changes<a class="headerlink" href="#id418" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Refactor Haskell module imports (#524, #521, #520)</p></li>
<li><p>Switch Galley, Brig to YAML-only config (#517, #510)</p></li>
<li><p>Better SAML error types (#522)</p></li>
<li><p>Fix: gundeck bulkpush option. (#511)</p></li>
</ul>
</section>
</section>
<section id="id419">
<h1>2018-11-16 #515<a class="headerlink" href="#id419" title="Permalink to this heading"></a></h1>
<section id="id420">
<h2>Bug Fixes<a class="headerlink" href="#id420" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Fix: spar session cookie (#512)</p></li>
<li><p>SSO: fix cookie handling around binding users (#505)</p></li>
</ul>
</section>
<section id="id421">
<h2>Internal Changes<a class="headerlink" href="#id421" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>partial implementation of SCIM (without exposure to the spar routing table)</p></li>
<li><p>Always build benchmarks (#486)</p></li>
<li><p>Fix: gundeck compilation (#506)</p></li>
<li><p>Fix: use available env var for docker tag in dev make rule.  (#509)</p></li>
<li><p>Use Imports.hs in Brig, Spar, Galley (#507)</p></li>
<li><p>update dependencies docs (#514)</p></li>
</ul>
</section>
</section>
<section id="id422">
<h1>2018-10-25 #500<a class="headerlink" href="#id422" title="Permalink to this heading"></a></h1>
<section id="id423">
<h2>New Features<a class="headerlink" href="#id423" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>SSO: team member deletion, team deletion do not require
the user to have chosen a password.  (Needed for
SAML-authenticated team co-admins.)  #497</p></li>
<li><p>SSO: <code class="docutils literal notranslate"><span class="pre">sso-initiate-bind</span></code> end-point for inviting (“binding”)
existing users to SAML auth.  #496</p></li>
<li><p>SSO: shell script for registering IdPs in wire-teams.
(<code class="docutils literal notranslate"><span class="pre">/deploy/services-demo/register_idp.sh</span></code>)  #489</p></li>
<li><p>Allow setting a different endpoint for generating download links.
#480</p></li>
<li><p>Allow setting specific ports for SMTP and use different image for
SMTP.  #481</p></li>
<li><p>Route calls/config in the demo to brig.  #487</p></li>
</ul>
</section>
<section id="id424">
<h2>Internal Changes<a class="headerlink" href="#id424" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Metrics for spar (service for SSO).  #498</p></li>
<li><p>Upgrade to stackage lts-11.  #478</p></li>
<li><p>Upgrade cql-io library.  #495</p></li>
<li><p>Allow easily running tests against AWS.  #482</p></li>
</ul>
</section>
</section>
<section id="id425">
<h1>2018-10-04 #477<a class="headerlink" href="#id425" title="Permalink to this heading"></a></h1>
<section id="highlights">
<h2>Highlights<a class="headerlink" href="#highlights" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>We now store the <code class="docutils literal notranslate"><span class="pre">otr_muted_status</span></code> field per conversation,
suitable for supporting more notifications options than just “muted/not
muted”. The exact meaning of this field is client-dependent.  #469</p></li>
<li><p>Our schema migration tools (which you are probably using if
you’re doing self-hosting) are more resilient now. They have longer
timeouts and they wait for schema consistency across peers before
reporting success.  #467</p></li>
</ul>
</section>
<section id="other-changes">
<h2>Other changes<a class="headerlink" href="#other-changes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Building from scratch on macOS is now a tiny bit easier.  #474</p></li>
<li><p>Various Spar fixes, breaking changes, refactorings, and what-not. Please
refer to the commit log, in particular commits c173f42b and
80d06c9a.</p></li>
<li><p>Spar now only accepts a <a class="reference external" href="https://hackage.haskell.org/package/tls-1.4.1/docs/src/Network-TLS-Extra-Cipher.html#ciphersuite_default">subset</a> of available TLS
ciphers. See af8299d4.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Releases" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../how-to/install/index.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019 - 2023, Wire Swiss GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>