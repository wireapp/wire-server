-
  test_name: no extra results.new-index
  comments: |
    I think this is a known flake (Stefan)

-
  test_name: "team tests around truncation limits - no events, too large team"
  comments: |
    Exception: Timeout: No matching notification received.
    Match failure: expected: Just "user.delete"
     but got: Just "conversation.delete"

    2023-03-24: The test has multiple "user.delete" assertions, but since there
                is a "conversation.delete" event I think it must be the one
                generated by the team deletion. This would also explain why it
                might take longer for the event to happen than in other cases.
                I've increased the timeout from 4 to 7 seconds for that one
                assertion. Let's see if this helps.

- test_name: "GET /mls/key-packages/claim/local/:user - self claim"
  comments: |
    /bin/sh: createProcess: posix_spawnp: failed (Bad address)
    This is probably to resource exhaustion.
    Can we try increasing limits?

-
  test_name: "Brig API Integration.MLS.GET /mls/key-packages/claim/local/:user"
  comments: |
      Same error as for teset "GET /mls/key-packages/claim/local/:user - self claim"

      Error executing request: /bin/sh: createProcess: posix_spawnp: failed (Bad address)

-
   test_name: "max active tokens"
   comments: |
      CallStack (from HasCallStack):
        assertFailure, called at ./Test/Tasty/HUnit/Orig.hs:71:30 in tasty-hunit-0.10.0.3-BA9Dg64ujOjHrKq3kYOvGI:Test.Tasty.HUnit.Orig
        assertBool, called at test/integration/API/OAuth.hs:473:16 in main:API.OAuth
      Use -p '(!/turn/&&!/user.auth.cookies.limit/)&&/max active tokens/' to rerun this test only.

-
  test_name: "send billing events to some owners in large teams (indexedBillingTeamMembers disabled)"
  comments: |
    Error message: create team: Expected 1 TeamActivate, got nothing

    CallStack (from HasCallStack):
      assertFailure, called at test/integration/API/SQS.hs:74:32 in main:API.SQS
      tActivate, called at test/integration/API/SQS.hs:78:47 in main:API.SQS
      assertTeamActivate, called at test/integration/API/Util.hs:191:3 in main:API.Util
      createBindingTeam', called at test/integration/API/Util.hs:183:20 in main:API.Util
      createBindingTeam, called at test/integration/API/Teams.hs:1546:25 in main:API.Teams

-
  test_name: "delete team conversation"
  comments: |
    Exception: unexpected notification received
    Match failure: expected: no notification
     but got: "conversation.create"

    2023-03-24: The test is not waiting for notifications triggered by creating
                conversations. When later asserting that no notification is sent
                for deleting conversations, the test fails under load when the
                create conversation notification happens to come in late. This
                is fixed by waiting for all previous notifications before
                asserting the absence of (new) notifications.
-
  test_name: "POST /federation/on-user-deleted-conversations : Remove deleted remote user from local conversations"
  comments: |
    Exception: unexpected notification received
    Match failure: expected: no notification
     but got: "conversation.create"

    2023-03-24: The test is not waiting for notifications triggered by creating
                conversations. When later asserting that no notification is sent
                for deleting user, the test fails under load when the create
                conversation notification happens to come in late. This is fixed
                by waiting for all previous notifications before asserting the
                absence of (new) notifications.
-
  test_name: "POST /register - can add team members above fanout limit when whitelisting is enabled"
  comments: |
    2023-03-27: Hopefully fix by increasing timeout from 10 to 15 seconds for this test.

-
  test_name: "delete binding team (owner has no passwd)"
  comments: |
    2023-03-29: I suspect it's the team deletion notification that is timing out.
                I've added a HasCallstack to have better insights which one is failing.
                Also increased timeout from 10 to 15 seconds.

-
  test_name: "delete binding team (owner has passwd)"
  comments: |
    See "delete binding team (owner has no passwd)"
